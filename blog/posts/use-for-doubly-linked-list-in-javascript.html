<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>Using A Doubly Linked List In JavaScript</title><meta name="description" content="Use case for a doubly-linked list in JavaScript."/><meta name="next-head-count" content="4"/><link rel="preload" href="/_next/static/css/16658f58b111b779.css" as="style"/><link rel="stylesheet" href="/_next/static/css/16658f58b111b779.css" data-n-g=""/><link rel="preload" href="/_next/static/css/f3b0259de472b39f.css" as="style"/><link rel="stylesheet" href="/_next/static/css/f3b0259de472b39f.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-49b6f2937c9ce9f4.js" defer=""></script><script src="/_next/static/chunks/framework-a58013ecf93b5e10.js" defer=""></script><script src="/_next/static/chunks/main-b6034605d1b4e683.js" defer=""></script><script src="/_next/static/chunks/pages/_app-7e2d3fd7c9a12493.js" defer=""></script><script src="/_next/static/chunks/499-737bf8d8ab0e0885.js" defer=""></script><script src="/_next/static/chunks/209-9c7942c8d79f9122.js" defer=""></script><script src="/_next/static/chunks/506-bd9109170824ca61.js" defer=""></script><script src="/_next/static/chunks/404-d9beaf0cb30c7ef9.js" defer=""></script><script src="/_next/static/chunks/pages/blog/posts/%5Bid%5D-e6358faf4f468174.js" defer=""></script><script src="/_next/static/6XrfhkUDyIAapFpO446u6/_buildManifest.js" defer=""></script><script src="/_next/static/6XrfhkUDyIAapFpO446u6/_ssgManifest.js" defer=""></script><script src="/_next/static/6XrfhkUDyIAapFpO446u6/_middlewareManifest.js" defer=""></script><style data-styled="" data-styled-version="5.3.3"></style></head><body><div id="__next" data-reactroot=""><header><div class="nav_main-header-nav-container__f3aWf"><nav class="nav_main-header-nav__QbsNZ"><span class="nav_main-header-title__gVKJ_">Luke Johnson</span></nav><div class="nav-mobile-menu-button_nav-mobile-menu-button-container__5drSF"><svg class="nav-mobile-menu-button_nav-mobile-menu-button__4EHmH" viewBox="0 0 100 80" width="40" height="40"><rect width="100" height="20"></rect><rect y="30" width="100" height="20"></rect><rect y="60" width="100" height="20"></rect></svg></div></div><div class="nav_main-header-mobile-links__XXYJI"><a href="/"><div class="nav_main-header-link-conatiner__Vc8ao">Home</div></a><a href="/portfolio"><div class="nav_main-header-link-conatiner__Vc8ao">Portfolio</div></a><a href="/blog"><div class="nav_main-header-link-conatiner__Vc8ao nav_active__oTtOr">Blog</div></a><a href="/about"><div class="nav_main-header-link-conatiner__Vc8ao">About</div></a></div></header><main id="main"><div class="breadcrumbs_breadcrumb-default-container__xaQd_"><a class="breadcrumbs_breadcrumb-default-crumb__EhQMQ" href="/blog">Blog<span class="breadcrumbs_breadcrumb-default-crumb-slash__MEqpp">/</span></a><span class="breadcrumbs_breadcrumb-default-crumb-active__BfdKG">Using A Doubly Linked List In JavaScript</span></div><article class="posts_blog-post-container__Gov9e"><div class="banner_post-banner-image-container__hlC_Y"><picture><source type="image/webp" srcSet="/images/blog/nodedisplay.webp"/><source type="image/jpeg" srcSet="/images/blog/nodedisplay.jpg"/><img tabindex="0" src="/images/blog/nodedisplay.jpg" class="banner_post-banner-image__cLZGG" alt="sup"/></picture></div><h1 class="typeographery_default-h1-title__Ejl24 typeographery_default-text-center__2eLto">Using A Doubly Linked List In JavaScript</h1><p>When I was a computer science student my two favorite classes were databases and data structures. Since starting my professional work as a web programmer I have not found my use cases for the data structures I learned in college until recently. So, today I want to talk about the data structure known as a Doubly Linked List and show you a use case for it that I have recently found.</p>
<p>I will not go into the heavy implementation details of setting up a Doubly Linked List in JavaScript. However, I do have a TypeScript class and interface available for you to look at it if you want to see the full implementation details. It however is a Doubly Linked List mixed with a Map. I call it a Doubly Linked ID List.</p>
<h1 id="What-is-a-Doubly-Linked-List?">What is a Doubly Linked List?</h1>
<p>We can conceive a doubly-linked list in JavaScript to be an array or map of objects that have a reference to the object that is before and after. In that way, it preserver’s its order.</p>
<p>Now in the example class, I provided the before and after references are actually ids used in the map of objects. I do not use a direct reference for the object. Either way, it will work the same but I will get into that more later.</p>
<h1 id="What-is-it-good-for?">What is it good for?</h1>
<p>A doubly linked list excels at a couple of things. Number one would be the time complexity of inserting and taking things out of it. With a normal array if you want to add something to the front you have to move that entire array forward. With a doubly-linked list, you just change the references to the before and after objects for the objects that you want to insert in-between. Here you see the time complexity compared:</p>
<div class="view_view-table-default-container__wMgX1"><table class="view_view-table-default__ko4bi"><thead><tr><th style="text-align:left">Data Structures</th><th style="text-align:center">Insert</th><th style="text-align:center">Insert</th><th style="text-align:center">Insert</th><th style="text-align:center">Insert</th></tr></thead><tbody><tr><td style="text-align:left">Doubly Linked ID List</td><td style="text-align:center">O(1)</td><td style="text-align:center">O(1)</td><td style="text-align:center">O(1)</td><td style="text-align:center">O(n)</td></tr><tr><td style="text-align:left">Doubly Linked List</td><td style="text-align:center">O(1)</td><td style="text-align:center">O(1)</td><td style="text-align:center">O(n)</td><td style="text-align:center">O(n)</td></tr><tr><td style="text-align:left">Normal Array</td><td style="text-align:center">O(n)</td><td style="text-align:center">O(n)</td><td style="text-align:center">O(1)</td><td style="text-align:center">O(n)</td></tr></tbody></table></div>
<p>Now if you are dealing with small data sets a doubly linked list may be a bit much. But if you are dealing with thousands or millions of objects then it becomes indicative to come up with a solution that is fast especially if you have to do a lot of inserting and deleting.</p>
<h1 id="Real-Example-Use-Case">Real Example Use Case</h1>
<p>So, I am currently developing a level creator program using TypeScript, Babylon.Js, and Electron. It allows you to place thousands upon thousands of models in a single scene and have the ability to edit each individually and in a group. On the left-hand display of the window, there is a display with all the nodes in the scene. The user can scroll through all the nodes, edit them, delete them, and drag n’ drop them to new locations and inside groups.</p>
<p>Well, in this case, if we used a normal array and the user had something like 10,000 models in the scene we would have to move all other 9,999 models in the array to match the new arrangement. But with a doubly-linked list, it becomes extremely fast. We just have to remove the object from the current list by changing its before and after references as well it’s surrounding objects and then either discard it or put it in another part of the list by once again changing its new surrounding objects before and after references as well as it’s own. So, It’s about 8 operations instead of 9k.</p>
<h1 id="Conclusion">Conclusion</h1>
<p>Your app may benefit from using a doubly-linked list or some variant of it if you are doing a bunch of inserting and deleting on an array and need to preserve its order. They are easy to implement in JavaScript and can be expanded with more helpful functions such as my example class shows. They are not the solution for everything but for very specific things they are amazing.</p>
<h2 id="Full-Doubly-Linked-ID-List-Implementation">Full Doubly Linked ID List Implementation</h2>
<pre class="view_default-code-block__HAOCo"><div node="[object Object]" style="color:#e3e9f2;background:#111b27;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:0.5em 0;overflow:auto"><code class="language-ts" style="color:#e3e9f2;background:none;font-family:Consolas, Monaco, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token module" style="color:#d88b4a">export</span><span> </span><span class="token" style="color:#d88b4a">type</span><span> </span><span class="token maybe-class-name" style="color:#6ab3e4">DoubleLinkedIDListNode</span><span class="token" style="color:#d88b4a">&lt;</span><span class="token" style="color:#cdb74a">T</span><span class="token" style="color:#d88b4a">&gt;</span><span> </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>  data</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#cdb74a">T</span><span> </span><span class="token" style="color:#d88b4a">|</span><span> </span><span class="token" style="color:#cdb74a">false</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>  prev</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span> </span><span class="token" style="color:#d88b4a">|</span><span> </span><span class="token" style="color:#cdb74a">false</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>  next</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span> </span><span class="token" style="color:#d88b4a">|</span><span> </span><span class="token" style="color:#cdb74a">false</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span></span><span class="token" style="color:#e3e9f2">}</span><span class="token" style="color:#e3e9f2">;</span><span>
</span>
<span></span><span class="token module" style="color:#d88b4a">export</span><span> </span><span class="token" style="color:#d88b4a">type</span><span> </span><span class="token maybe-class-name" style="color:#6ab3e4">DoubleLinkedIDListNodes</span><span class="token" style="color:#d88b4a">&lt;</span><span class="token" style="color:#cdb74a">T</span><span class="token" style="color:#d88b4a">&gt;</span><span> </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token maybe-class-name">Record</span><span class="token" style="color:#d88b4a">&lt;</span><span>
</span><span>  </span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#e3e9f2">,</span><span>
</span><span>  </span><span class="token maybe-class-name">DoubleLinkedIDListNode</span><span class="token" style="color:#d88b4a">&lt;</span><span class="token" style="color:#cdb74a">T</span><span class="token" style="color:#d88b4a">&gt;</span><span>
</span><span></span><span class="token" style="color:#d88b4a">&gt;</span><span class="token" style="color:#e3e9f2">;</span><span>
</span>
<span></span><span class="token module" style="color:#d88b4a">export</span><span> </span><span class="token" style="color:#d88b4a">type</span><span> </span><span class="token maybe-class-name" style="color:#6ab3e4">DoubleLinkedIDConstructor</span><span class="token" style="color:#d88b4a">&lt;</span><span class="token" style="color:#cdb74a">T</span><span class="token" style="color:#d88b4a">&gt;</span><span> </span><span class="token" style="color:#d88b4a">=</span><span>
</span><span>  </span><span class="token" style="color:#d88b4a">new</span><span> </span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token arrow" style="color:#d88b4a">=&gt;</span><span> </span><span class="token maybe-class-name">DoubleLinkedIDListInterface</span><span class="token" style="color:#d88b4a">&lt;</span><span class="token" style="color:#cdb74a">T</span><span class="token" style="color:#d88b4a">&gt;</span><span class="token" style="color:#e3e9f2">;</span><span>
</span>  
<span></span><span class="token module" style="color:#d88b4a">export</span><span> </span><span class="token" style="color:#d88b4a">interface</span><span> </span><span class="token maybe-class-name" style="color:#6ab3e4">DoubleLinkedIDListInterface</span><span class="token" style="color:#d88b4a">&lt;</span><span class="token" style="color:#cdb74a">T</span><span class="token" style="color:#d88b4a">&gt;</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>  size</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">number</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>  nodes</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token maybe-class-name">DoubleLinkedIDListNodes</span><span class="token" style="color:#d88b4a">&lt;</span><span class="token" style="color:#cdb74a">T</span><span class="token" style="color:#d88b4a">&gt;</span><span class="token" style="color:#e3e9f2">;</span><span>
</span>
<span>  </span><span class="token" style="color:#cf7ef6">keys</span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#e3e9f2">[</span><span class="token" style="color:#e3e9f2">]</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>  </span><span class="token" style="color:#cf7ef6">moveNodeBeforeOther</span><span class="token" style="color:#e3e9f2">(</span><span>staticNodeId</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#e3e9f2">,</span><span> nodeMovingId</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#d88b4a">void</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>  </span><span class="token" style="color:#cf7ef6">moveNodeAfterOther</span><span class="token" style="color:#e3e9f2">(</span><span>staticNodeId</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#e3e9f2">,</span><span> nodeMovingId</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#d88b4a">void</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>  </span><span class="token" style="color:#cf7ef6">append</span><span class="token" style="color:#e3e9f2">(</span><span>id</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#d88b4a">void</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>  </span><span class="token" style="color:#cf7ef6">prepend</span><span class="token" style="color:#e3e9f2">(</span><span>id</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#d88b4a">void</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>  </span><span class="token" style="color:#cf7ef6">insertBefore</span><span class="token" style="color:#e3e9f2">(</span><span>insertAtId</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#e3e9f2">,</span><span> id</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#e3e9f2">,</span><span> </span><span class="token maybe-class-name">Data</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#cdb74a">T</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#d88b4a">void</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>  </span><span class="token" style="color:#cf7ef6">insertAfter</span><span class="token" style="color:#e3e9f2">(</span><span>insertAtId</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#e3e9f2">,</span><span> id</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#e3e9f2">,</span><span> </span><span class="token maybe-class-name">Data</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#cdb74a">T</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#d88b4a">void</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>  </span><span class="token" style="color:#cf7ef6">appendNew</span><span class="token" style="color:#e3e9f2">(</span><span>id</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#e3e9f2">,</span><span> </span><span class="token maybe-class-name">Data</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#cdb74a">T</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#d88b4a">void</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>  </span><span class="token" style="color:#cf7ef6">prependNew</span><span class="token" style="color:#e3e9f2">(</span><span>id</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#e3e9f2">,</span><span> </span><span class="token maybe-class-name">Data</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#cdb74a">T</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#d88b4a">void</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>  </span><span class="token" style="color:#cf7ef6">pop</span><span class="token" style="color:#e3e9f2">(</span><span>id</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token maybe-class-name">DoubleLinkedIDListNode</span><span class="token" style="color:#d88b4a">&lt;</span><span class="token" style="color:#cdb74a">T</span><span class="token" style="color:#d88b4a">&gt;</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>  </span><span class="token" style="color:#cf7ef6">remove</span><span class="token" style="color:#e3e9f2">(</span><span>id</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#d88b4a">void</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>  </span><span class="token" style="color:#cf7ef6">removeAll</span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#d88b4a">void</span><span class="token" style="color:#e3e9f2">;</span><span>
</span>
<span>  </span><span class="token" style="color:#cf7ef6">getValue</span><span class="token" style="color:#e3e9f2">(</span><span>id</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#cdb74a">T</span><span> </span><span class="token" style="color:#d88b4a">|</span><span> </span><span class="token" style="color:#cdb74a">false</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>  </span><span class="token" style="color:#cf7ef6">setValue</span><span class="token" style="color:#e3e9f2">(</span><span>id</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#e3e9f2">,</span><span> data</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#cdb74a">T</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#d88b4a">void</span><span class="token" style="color:#e3e9f2">;</span><span>
</span>
<span>  </span><span class="token" style="color:#cf7ef6">traverseWithFuncForward</span><span class="token" style="color:#e3e9f2">(</span><span class="token function-variable" style="color:#cf7ef6">func</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#e3e9f2">(</span><span>key</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#e3e9f2">,</span><span> data</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#cdb74a">T</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token arrow" style="color:#d88b4a">=&gt;</span><span> </span><span class="token" style="color:#ea89ea">any</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#d88b4a">void</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>  </span><span class="token" style="color:#cf7ef6">traverseWithFuncBackward</span><span class="token" style="color:#e3e9f2">(</span><span class="token function-variable" style="color:#cf7ef6">func</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#e3e9f2">(</span><span>key</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#e3e9f2">,</span><span> data</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#cdb74a">T</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token arrow" style="color:#d88b4a">=&gt;</span><span> </span><span class="token" style="color:#ea89ea">any</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#d88b4a">void</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>  </span><span class="token" style="color:#cf7ef6">traverseIDsForward</span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token maybe-class-name">IteratorResult</span><span class="token" style="color:#d88b4a">&lt;</span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#d88b4a">&gt;</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>  </span><span class="token" style="color:#cf7ef6">traverseValuesForward</span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token maybe-class-name">IteratorResult</span><span class="token" style="color:#d88b4a">&lt;</span><span class="token" style="color:#cdb74a">T</span><span> </span><span class="token" style="color:#d88b4a">|</span><span> </span><span class="token" style="color:#cdb74a">false</span><span class="token" style="color:#d88b4a">&gt;</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>  </span><span class="token" style="color:#cf7ef6">traverseKeyValuesForward</span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token maybe-class-name">IteratorResult</span><span class="token" style="color:#d88b4a">&lt;</span><span class="token" style="color:#e3e9f2">{</span><span> key</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#e3e9f2">;</span><span> value</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#cdb74a">T</span><span> </span><span class="token" style="color:#d88b4a">|</span><span> </span><span class="token" style="color:#cdb74a">false</span><span> </span><span class="token" style="color:#e3e9f2">}</span><span class="token" style="color:#d88b4a">&gt;</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>  </span><span class="token" style="color:#cf7ef6">traverseIDsBackward</span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token maybe-class-name">IteratorResult</span><span class="token" style="color:#d88b4a">&lt;</span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#d88b4a">&gt;</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>  </span><span class="token" style="color:#cf7ef6">traverseValuesBackward</span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token maybe-class-name">IteratorResult</span><span class="token" style="color:#d88b4a">&lt;</span><span class="token" style="color:#cdb74a">T</span><span> </span><span class="token" style="color:#d88b4a">|</span><span> </span><span class="token" style="color:#cdb74a">false</span><span class="token" style="color:#d88b4a">&gt;</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>  </span><span class="token" style="color:#cf7ef6">traverseKeyValuesBackward</span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token maybe-class-name">IteratorResult</span><span class="token" style="color:#d88b4a">&lt;</span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>    key</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    value</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#cdb74a">T</span><span> </span><span class="token" style="color:#d88b4a">|</span><span> </span><span class="token" style="color:#cdb74a">false</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>  </span><span class="token" style="color:#e3e9f2">}</span><span class="token" style="color:#d88b4a">&gt;</span><span class="token" style="color:#e3e9f2">;</span><span>
</span>
<span>  </span><span class="token" style="color:#cf7ef6">getNextKVP</span><span class="token" style="color:#e3e9f2">(</span><span>id</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span> key</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#e3e9f2">;</span><span> value</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#cdb74a">T</span><span> </span><span class="token" style="color:#d88b4a">|</span><span> </span><span class="token" style="color:#cdb74a">false</span><span> </span><span class="token" style="color:#e3e9f2">}</span><span> </span><span class="token" style="color:#d88b4a">|</span><span> </span><span class="token" style="color:#cdb74a">false</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>  </span><span class="token" style="color:#cf7ef6">getPrevKVP</span><span class="token" style="color:#e3e9f2">(</span><span>id</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span> key</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#e3e9f2">;</span><span> value</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#cdb74a">T</span><span> </span><span class="token" style="color:#d88b4a">|</span><span> </span><span class="token" style="color:#cdb74a">false</span><span> </span><span class="token" style="color:#e3e9f2">}</span><span> </span><span class="token" style="color:#d88b4a">|</span><span> </span><span class="token" style="color:#cdb74a">false</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>  </span><span class="token" style="color:#cf7ef6">getNextID</span><span class="token" style="color:#e3e9f2">(</span><span>id</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span> </span><span class="token" style="color:#d88b4a">|</span><span> </span><span class="token" style="color:#cdb74a">false</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>  </span><span class="token" style="color:#cf7ef6">getPrevID</span><span class="token" style="color:#e3e9f2">(</span><span>id</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span> </span><span class="token" style="color:#d88b4a">|</span><span> </span><span class="token" style="color:#cdb74a">false</span><span class="token" style="color:#e3e9f2">;</span><span>
</span>
<span>  </span><span class="token" style="color:#cf7ef6">resetTraverse</span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#d88b4a">void</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>  </span><span class="token" style="color:#cf7ef6">exists</span><span class="token" style="color:#e3e9f2">(</span><span>id</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">boolean</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>  </span><span class="token" style="color:#cf7ef6">getKVP</span><span class="token" style="color:#e3e9f2">(</span><span>id</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span> key</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#e3e9f2">;</span><span> value</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#cdb74a">T</span><span> </span><span class="token" style="color:#d88b4a">|</span><span> </span><span class="token" style="color:#cdb74a">false</span><span> </span><span class="token" style="color:#e3e9f2">}</span><span> </span><span class="token" style="color:#d88b4a">|</span><span> </span><span class="token" style="color:#cdb74a">false</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>  </span><span class="token" style="color:#cf7ef6">getFirstID</span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>  </span><span class="token" style="color:#cf7ef6">getLastID</span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#e3e9f2">;</span><span>
</span>
<span>  </span><span class="token" style="color:#cf7ef6">isBefore</span><span class="token" style="color:#e3e9f2">(</span><span>startId</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#e3e9f2">,</span><span> idLookingFor</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">boolean</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>  </span><span class="token" style="color:#cf7ef6">isAfter</span><span class="token" style="color:#e3e9f2">(</span><span>startId</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#e3e9f2">,</span><span> idLookingFor</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">boolean</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span></span><span class="token" style="color:#e3e9f2">}</span><span>
</span>
<span></span><span class="token module" style="color:#d88b4a">export</span><span> </span><span class="token" style="color:#d88b4a">class</span><span> </span><span class="token maybe-class-name" style="color:#6ab3e4">DounleLinkedIDList</span><span class="token" style="color:#d88b4a">&lt;</span><span class="token" style="color:#cdb74a">T</span><span class="token" style="color:#d88b4a">&gt;</span><span> </span><span class="token" style="color:#d88b4a">implements</span><span> </span><span class="token maybe-class-name" style="color:#6ab3e4">DoubleLinkedIDListInterface</span><span class="token" style="color:#d88b4a">&lt;</span><span class="token" style="color:#cdb74a">T</span><span class="token" style="color:#d88b4a">&gt;</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>  size</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">number</span><span> </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#cdb74a">0</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>  head</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token maybe-class-name">DoubleLinkedIDListNode</span><span class="token" style="color:#d88b4a">&lt;</span><span class="token" style="color:#cdb74a">T</span><span class="token" style="color:#d88b4a">&gt;</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>  tail</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token maybe-class-name">DoubleLinkedIDListNode</span><span class="token" style="color:#d88b4a">&lt;</span><span class="token" style="color:#cdb74a">T</span><span class="token" style="color:#d88b4a">&gt;</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>  nodes</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token maybe-class-name">DoubleLinkedIDListNodes</span><span class="token" style="color:#d88b4a">&lt;</span><span class="token" style="color:#cdb74a">T</span><span class="token" style="color:#d88b4a">&gt;</span><span> </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span class="token" style="color:#e3e9f2">}</span><span class="token" style="color:#e3e9f2">;</span><span>
</span>
<span>  currentNodeID</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>  _currentIteratorFowardData</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#cdb74a">T</span><span> </span><span class="token" style="color:#d88b4a">|</span><span> </span><span class="token" style="color:#cdb74a">false</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>  _currentIteratorBackwardData</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#cdb74a">T</span><span> </span><span class="token" style="color:#d88b4a">|</span><span> </span><span class="token" style="color:#cdb74a">false</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>  _currentIteratorForwardId </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#82c366">&quot;head&quot;</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>  _currentIteratorBackwardId </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#82c366">&quot;tail&quot;</span><span class="token" style="color:#e3e9f2">;</span><span>
</span>
<span>  </span><span class="token" style="color:#cf7ef6">constructor</span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">head</span><span> </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>      data</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#cdb74a">false</span><span class="token" style="color:#e3e9f2">,</span><span>
</span><span>      next</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#82c366">&quot;tail&quot;</span><span class="token" style="color:#e3e9f2">,</span><span>
</span><span>      prev</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#cdb74a">false</span><span class="token" style="color:#e3e9f2">,</span><span>
</span><span>    </span><span class="token" style="color:#e3e9f2">}</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">tail</span><span> </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>      data</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#cdb74a">false</span><span class="token" style="color:#e3e9f2">,</span><span>
</span><span>      next</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#cdb74a">false</span><span class="token" style="color:#e3e9f2">,</span><span>
</span><span>      prev</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#82c366">&quot;head&quot;</span><span class="token" style="color:#e3e9f2">,</span><span>
</span><span>    </span><span class="token" style="color:#e3e9f2">}</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">nodes</span><span class="token" style="color:#e3e9f2">[</span><span class="token" style="color:#82c366">&quot;head&quot;</span><span class="token" style="color:#e3e9f2">]</span><span> </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">head</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">nodes</span><span class="token" style="color:#e3e9f2">[</span><span class="token" style="color:#82c366">&quot;tail&quot;</span><span class="token" style="color:#e3e9f2">]</span><span> </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">tail</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>  </span><span class="token" style="color:#e3e9f2">}</span><span>
</span>
<span>  </span><span class="token" style="color:#cf7ef6">keys</span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">const</span><span> keys </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token known-class-name" style="color:#6ab3e4">Object</span><span class="token" style="color:#e3e9f2">.</span><span class="token method" style="color:#6ab3e4">keys</span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">nodes</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">const</span><span> headIndex </span><span class="token" style="color:#d88b4a">=</span><span> keys</span><span class="token" style="color:#e3e9f2">.</span><span class="token method" style="color:#6ab3e4">indexOf</span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#82c366">&quot;head&quot;</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    keys</span><span class="token" style="color:#e3e9f2">.</span><span class="token method" style="color:#6ab3e4">splice</span><span class="token" style="color:#e3e9f2">(</span><span>headIndex</span><span class="token" style="color:#e3e9f2">,</span><span> </span><span class="token" style="color:#cdb74a">1</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">const</span><span> tailIndex </span><span class="token" style="color:#d88b4a">=</span><span> keys</span><span class="token" style="color:#e3e9f2">.</span><span class="token method" style="color:#6ab3e4">indexOf</span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#82c366">&quot;tail&quot;</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    keys</span><span class="token" style="color:#e3e9f2">.</span><span class="token method" style="color:#6ab3e4">splice</span><span class="token" style="color:#e3e9f2">(</span><span>tailIndex</span><span class="token" style="color:#e3e9f2">,</span><span> </span><span class="token" style="color:#cdb74a">1</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">return</span><span> keys</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>  </span><span class="token" style="color:#e3e9f2">}</span><span>
</span>
<span>  </span><span class="token" style="color:#cf7ef6">getFirstID</span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">if</span><span> </span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">head</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">next</span><span> </span><span class="token" style="color:#d88b4a">==</span><span> </span><span class="token" style="color:#82c366">&quot;tail&quot;</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token control-flow" style="color:#d88b4a">return</span><span> </span><span class="token" style="color:#82c366">&quot;&quot;</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">return</span><span> </span><span class="token" style="color:#d88b4a">&lt;</span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#d88b4a">&gt;</span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">head</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">next</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>  </span><span class="token" style="color:#e3e9f2">}</span><span>
</span>
<span>  </span><span class="token" style="color:#cf7ef6">getLastID</span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">if</span><span> </span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">tail</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">prev</span><span> </span><span class="token" style="color:#d88b4a">==</span><span> </span><span class="token" style="color:#82c366">&quot;head&quot;</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token control-flow" style="color:#d88b4a">return</span><span> </span><span class="token" style="color:#82c366">&quot;&quot;</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">return</span><span> </span><span class="token" style="color:#d88b4a">&lt;</span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#d88b4a">&gt;</span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">tail</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">prev</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>  </span><span class="token" style="color:#e3e9f2">}</span><span>
</span>
<span>  </span><span class="token" style="color:#cf7ef6">insertBefore</span><span class="token" style="color:#e3e9f2">(</span><span>insertAtId</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#e3e9f2">,</span><span> id</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#e3e9f2">,</span><span> </span><span class="token maybe-class-name">Data</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#cdb74a">T</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">if</span><span> </span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#d88b4a">!</span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token method" style="color:#6ab3e4">exists</span><span class="token" style="color:#e3e9f2">(</span><span>insertAtId</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>      </span><span class="token control-flow" style="color:#d88b4a">throw</span><span> </span><span class="token" style="color:#d88b4a">new</span><span> </span><span class="token known-class-name" style="color:#6ab3e4">Error</span><span class="token" style="color:#e3e9f2">(</span><span class="token template-string template-punctuation" style="color:#82c366">`</span><span class="token template-string interpolation interpolation-punctuation" style="color:#e3e9f2">${</span><span class="token template-string interpolation">insertAtId</span><span class="token template-string interpolation interpolation-punctuation" style="color:#e3e9f2">}</span><span class="token template-string" style="color:#82c366"> does not exist.</span><span class="token template-string template-punctuation" style="color:#82c366">`</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#e3e9f2">}</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">if</span><span> </span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token method" style="color:#6ab3e4">exists</span><span class="token" style="color:#e3e9f2">(</span><span>id</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>      </span><span class="token control-flow" style="color:#d88b4a">throw</span><span> </span><span class="token" style="color:#d88b4a">new</span><span> </span><span class="token known-class-name" style="color:#6ab3e4">Error</span><span class="token" style="color:#e3e9f2">(</span><span class="token template-string template-punctuation" style="color:#82c366">`</span><span class="token template-string interpolation interpolation-punctuation" style="color:#e3e9f2">${</span><span class="token template-string interpolation">id</span><span class="token template-string interpolation interpolation-punctuation" style="color:#e3e9f2">}</span><span class="token template-string" style="color:#82c366"> already exist.</span><span class="token template-string template-punctuation" style="color:#82c366">`</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#e3e9f2">}</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">const</span><span> insertBeforerNode </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">nodes</span><span class="token" style="color:#e3e9f2">[</span><span>insertAtId</span><span class="token" style="color:#e3e9f2">]</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">if</span><span> </span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#d88b4a">!</span><span>insertBeforerNode</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">prev</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token control-flow" style="color:#d88b4a">return</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">const</span><span> beforeNodeID </span><span class="token" style="color:#d88b4a">=</span><span> insertBeforerNode</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">prev</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">const</span><span> beforeNode </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">nodes</span><span class="token" style="color:#e3e9f2">[</span><span>beforeNodeID</span><span class="token" style="color:#e3e9f2">]</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">const</span><span> newNode</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token maybe-class-name">DoubleLinkedIDListNode</span><span class="token" style="color:#d88b4a">&lt;</span><span class="token" style="color:#cdb74a">T</span><span class="token" style="color:#d88b4a">&gt;</span><span> </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>      data</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token maybe-class-name">Data</span><span class="token" style="color:#e3e9f2">,</span><span>
</span><span>      prev</span><span class="token" style="color:#d88b4a">:</span><span> beforeNodeID</span><span class="token" style="color:#e3e9f2">,</span><span>
</span><span>      next</span><span class="token" style="color:#d88b4a">:</span><span> insertAtId</span><span class="token" style="color:#e3e9f2">,</span><span>
</span><span>    </span><span class="token" style="color:#e3e9f2">}</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    beforeNode</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">next</span><span> </span><span class="token" style="color:#d88b4a">=</span><span> id</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    insertBeforerNode</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">prev</span><span> </span><span class="token" style="color:#d88b4a">=</span><span> id</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">nodes</span><span class="token" style="color:#e3e9f2">[</span><span>id</span><span class="token" style="color:#e3e9f2">]</span><span> </span><span class="token" style="color:#d88b4a">=</span><span> newNode</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">size</span><span class="token" style="color:#d88b4a">++</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>  </span><span class="token" style="color:#e3e9f2">}</span><span>
</span>    
<span>  </span><span class="token" style="color:#cf7ef6">insertAfter</span><span class="token" style="color:#e3e9f2">(</span><span>insertAtId</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#e3e9f2">,</span><span> id</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#e3e9f2">,</span><span> </span><span class="token maybe-class-name">Data</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#cdb74a">T</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">if</span><span> </span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#d88b4a">!</span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token method" style="color:#6ab3e4">exists</span><span class="token" style="color:#e3e9f2">(</span><span>insertAtId</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>      </span><span class="token control-flow" style="color:#d88b4a">throw</span><span> </span><span class="token" style="color:#d88b4a">new</span><span> </span><span class="token known-class-name" style="color:#6ab3e4">Error</span><span class="token" style="color:#e3e9f2">(</span><span class="token template-string template-punctuation" style="color:#82c366">`</span><span class="token template-string interpolation interpolation-punctuation" style="color:#e3e9f2">${</span><span class="token template-string interpolation">insertAtId</span><span class="token template-string interpolation interpolation-punctuation" style="color:#e3e9f2">}</span><span class="token template-string" style="color:#82c366"> does not exist.</span><span class="token template-string template-punctuation" style="color:#82c366">`</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#e3e9f2">}</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">if</span><span> </span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token method" style="color:#6ab3e4">exists</span><span class="token" style="color:#e3e9f2">(</span><span>id</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>      </span><span class="token control-flow" style="color:#d88b4a">throw</span><span> </span><span class="token" style="color:#d88b4a">new</span><span> </span><span class="token known-class-name" style="color:#6ab3e4">Error</span><span class="token" style="color:#e3e9f2">(</span><span class="token template-string template-punctuation" style="color:#82c366">`</span><span class="token template-string interpolation interpolation-punctuation" style="color:#e3e9f2">${</span><span class="token template-string interpolation">id</span><span class="token template-string interpolation interpolation-punctuation" style="color:#e3e9f2">}</span><span class="token template-string" style="color:#82c366"> already exist.</span><span class="token template-string template-punctuation" style="color:#82c366">`</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#e3e9f2">}</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">const</span><span> insertAfterNode </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">nodes</span><span class="token" style="color:#e3e9f2">[</span><span>insertAtId</span><span class="token" style="color:#e3e9f2">]</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">if</span><span> </span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#d88b4a">!</span><span>insertAfterNode</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">next</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token control-flow" style="color:#d88b4a">return</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">const</span><span> nextNodeID </span><span class="token" style="color:#d88b4a">=</span><span> insertAfterNode</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">next</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">const</span><span> nextNode </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">nodes</span><span class="token" style="color:#e3e9f2">[</span><span>nextNodeID</span><span class="token" style="color:#e3e9f2">]</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">const</span><span> newNode</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token maybe-class-name">DoubleLinkedIDListNode</span><span class="token" style="color:#d88b4a">&lt;</span><span class="token" style="color:#cdb74a">T</span><span class="token" style="color:#d88b4a">&gt;</span><span> </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>      data</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token maybe-class-name">Data</span><span class="token" style="color:#e3e9f2">,</span><span>
</span><span>      prev</span><span class="token" style="color:#d88b4a">:</span><span> insertAtId</span><span class="token" style="color:#e3e9f2">,</span><span>
</span><span>      next</span><span class="token" style="color:#d88b4a">:</span><span> nextNodeID</span><span class="token" style="color:#e3e9f2">,</span><span>
</span><span>    </span><span class="token" style="color:#e3e9f2">}</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    nextNode</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">prev</span><span> </span><span class="token" style="color:#d88b4a">=</span><span> id</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    insertAfterNode</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">next</span><span> </span><span class="token" style="color:#d88b4a">=</span><span> id</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">nodes</span><span class="token" style="color:#e3e9f2">[</span><span>id</span><span class="token" style="color:#e3e9f2">]</span><span> </span><span class="token" style="color:#d88b4a">=</span><span> newNode</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">size</span><span class="token" style="color:#d88b4a">++</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">return</span><span> </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">nodes</span><span class="token" style="color:#e3e9f2">[</span><span>id</span><span class="token" style="color:#e3e9f2">]</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>  </span><span class="token" style="color:#e3e9f2">}</span><span>
</span>
<span>  </span><span class="token" style="color:#cf7ef6">moveNodeBeforeOther</span><span class="token" style="color:#e3e9f2">(</span><span>staticNodeId</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#e3e9f2">,</span><span> nodeMovingId</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">if</span><span> </span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#d88b4a">!</span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token method" style="color:#6ab3e4">exists</span><span class="token" style="color:#e3e9f2">(</span><span>staticNodeId</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>      </span><span class="token control-flow" style="color:#d88b4a">throw</span><span> </span><span class="token" style="color:#d88b4a">new</span><span> </span><span class="token known-class-name" style="color:#6ab3e4">Error</span><span class="token" style="color:#e3e9f2">(</span><span class="token template-string template-punctuation" style="color:#82c366">`</span><span class="token template-string interpolation interpolation-punctuation" style="color:#e3e9f2">${</span><span class="token template-string interpolation">staticNodeId</span><span class="token template-string interpolation interpolation-punctuation" style="color:#e3e9f2">}</span><span class="token template-string" style="color:#82c366"> does not exist.</span><span class="token template-string template-punctuation" style="color:#82c366">`</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#e3e9f2">}</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">if</span><span> </span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#d88b4a">!</span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token method" style="color:#6ab3e4">exists</span><span class="token" style="color:#e3e9f2">(</span><span>nodeMovingId</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>      </span><span class="token control-flow" style="color:#d88b4a">throw</span><span> </span><span class="token" style="color:#d88b4a">new</span><span> </span><span class="token known-class-name" style="color:#6ab3e4">Error</span><span class="token" style="color:#e3e9f2">(</span><span class="token template-string template-punctuation" style="color:#82c366">`</span><span class="token template-string interpolation interpolation-punctuation" style="color:#e3e9f2">${</span><span class="token template-string interpolation">nodeMovingId</span><span class="token template-string interpolation interpolation-punctuation" style="color:#e3e9f2">}</span><span class="token template-string" style="color:#82c366"> does not exist.</span><span class="token template-string template-punctuation" style="color:#82c366">`</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#e3e9f2">}</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">const</span><span> insertBeforerNode </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">nodes</span><span class="token" style="color:#e3e9f2">[</span><span>staticNodeId</span><span class="token" style="color:#e3e9f2">]</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">if</span><span> </span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#d88b4a">!</span><span>insertBeforerNode</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">prev</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token control-flow" style="color:#d88b4a">return</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">const</span><span> beforeNodeID </span><span class="token" style="color:#d88b4a">=</span><span> insertBeforerNode</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">prev</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">const</span><span> beforeNode </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">nodes</span><span class="token" style="color:#e3e9f2">[</span><span>beforeNodeID</span><span class="token" style="color:#e3e9f2">]</span><span class="token" style="color:#e3e9f2">;</span><span>
</span>
<span>    </span><span class="token" style="color:#d88b4a">const</span><span> nodeMoving </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token method" style="color:#6ab3e4">pop</span><span class="token" style="color:#e3e9f2">(</span><span>nodeMovingId</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#e3e9f2">;</span><span>
</span>
<span>    beforeNode</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">next</span><span> </span><span class="token" style="color:#d88b4a">=</span><span> nodeMovingId</span><span class="token" style="color:#e3e9f2">;</span><span>
</span>
<span>    nodeMoving</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">prev</span><span> </span><span class="token" style="color:#d88b4a">=</span><span> beforeNodeID</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    nodeMoving</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">next</span><span> </span><span class="token" style="color:#d88b4a">=</span><span> staticNodeId</span><span class="token" style="color:#e3e9f2">;</span><span>
</span>
<span>    insertBeforerNode</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">prev</span><span> </span><span class="token" style="color:#d88b4a">=</span><span> nodeMovingId</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>  </span><span class="token" style="color:#e3e9f2">}</span><span>
</span><span>  </span><span class="token" style="color:#cf7ef6">moveNodeAfterOther</span><span class="token" style="color:#e3e9f2">(</span><span>staticNodeId</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#e3e9f2">,</span><span> nodeMovingId</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">if</span><span> </span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#d88b4a">!</span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token method" style="color:#6ab3e4">exists</span><span class="token" style="color:#e3e9f2">(</span><span>staticNodeId</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>      </span><span class="token control-flow" style="color:#d88b4a">throw</span><span> </span><span class="token" style="color:#d88b4a">new</span><span> </span><span class="token known-class-name" style="color:#6ab3e4">Error</span><span class="token" style="color:#e3e9f2">(</span><span class="token template-string template-punctuation" style="color:#82c366">`</span><span class="token template-string interpolation interpolation-punctuation" style="color:#e3e9f2">${</span><span class="token template-string interpolation">staticNodeId</span><span class="token template-string interpolation interpolation-punctuation" style="color:#e3e9f2">}</span><span class="token template-string" style="color:#82c366"> does not exist.</span><span class="token template-string template-punctuation" style="color:#82c366">`</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#e3e9f2">}</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">if</span><span> </span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#d88b4a">!</span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token method" style="color:#6ab3e4">exists</span><span class="token" style="color:#e3e9f2">(</span><span>nodeMovingId</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>      </span><span class="token control-flow" style="color:#d88b4a">throw</span><span> </span><span class="token" style="color:#d88b4a">new</span><span> </span><span class="token known-class-name" style="color:#6ab3e4">Error</span><span class="token" style="color:#e3e9f2">(</span><span class="token template-string template-punctuation" style="color:#82c366">`</span><span class="token template-string interpolation interpolation-punctuation" style="color:#e3e9f2">${</span><span class="token template-string interpolation">nodeMovingId</span><span class="token template-string interpolation interpolation-punctuation" style="color:#e3e9f2">}</span><span class="token template-string" style="color:#82c366"> does not exist.</span><span class="token template-string template-punctuation" style="color:#82c366">`</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#e3e9f2">}</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">const</span><span> insertAfterNode </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">nodes</span><span class="token" style="color:#e3e9f2">[</span><span>staticNodeId</span><span class="token" style="color:#e3e9f2">]</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">if</span><span> </span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#d88b4a">!</span><span>insertAfterNode</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">next</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token control-flow" style="color:#d88b4a">return</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">const</span><span> afterNodeID </span><span class="token" style="color:#d88b4a">=</span><span> insertAfterNode</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">next</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">const</span><span> afterNode </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">nodes</span><span class="token" style="color:#e3e9f2">[</span><span>afterNodeID</span><span class="token" style="color:#e3e9f2">]</span><span class="token" style="color:#e3e9f2">;</span><span>
</span>
<span>    </span><span class="token" style="color:#d88b4a">const</span><span> nodeMoving </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token method" style="color:#6ab3e4">pop</span><span class="token" style="color:#e3e9f2">(</span><span>nodeMovingId</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    insertAfterNode</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">next</span><span> </span><span class="token" style="color:#d88b4a">=</span><span> nodeMovingId</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    nodeMoving</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">prev</span><span> </span><span class="token" style="color:#d88b4a">=</span><span> staticNodeId</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    nodeMoving</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">next</span><span> </span><span class="token" style="color:#d88b4a">=</span><span> afterNodeID</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    afterNode</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">prev</span><span> </span><span class="token" style="color:#d88b4a">=</span><span> nodeMovingId</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>  </span><span class="token" style="color:#e3e9f2">}</span><span>
</span><span>  </span><span class="token" style="color:#cf7ef6">pop</span><span class="token" style="color:#e3e9f2">(</span><span>id</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token maybe-class-name">DoubleLinkedIDListNode</span><span class="token" style="color:#d88b4a">&lt;</span><span class="token" style="color:#cdb74a">T</span><span class="token" style="color:#d88b4a">&gt;</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">if</span><span> </span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#d88b4a">!</span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token method" style="color:#6ab3e4">exists</span><span class="token" style="color:#e3e9f2">(</span><span>id</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>      </span><span class="token control-flow" style="color:#d88b4a">throw</span><span> </span><span class="token" style="color:#d88b4a">new</span><span> </span><span class="token known-class-name" style="color:#6ab3e4">Error</span><span class="token" style="color:#e3e9f2">(</span><span class="token template-string template-punctuation" style="color:#82c366">`</span><span class="token template-string interpolation interpolation-punctuation" style="color:#e3e9f2">${</span><span class="token template-string interpolation">id</span><span class="token template-string interpolation interpolation-punctuation" style="color:#e3e9f2">}</span><span class="token template-string" style="color:#82c366"> does not exist.</span><span class="token template-string template-punctuation" style="color:#82c366">`</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#e3e9f2">}</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">const</span><span> nodeMoving </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">nodes</span><span class="token" style="color:#e3e9f2">[</span><span>id</span><span class="token" style="color:#e3e9f2">]</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">const</span><span> nodeMovingBeforeId </span><span class="token" style="color:#d88b4a">=</span><span> nodeMoving</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">prev</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">const</span><span> nodeMovingAfterId </span><span class="token" style="color:#d88b4a">=</span><span> nodeMoving</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">next</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">if</span><span> </span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#d88b4a">!</span><span>nodeMovingBeforeId </span><span class="token" style="color:#d88b4a">&amp;&amp;</span><span> </span><span class="token" style="color:#d88b4a">!</span><span>nodeMovingAfterId</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>      </span><span class="token control-flow" style="color:#d88b4a">return</span><span> nodeMoving</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#e3e9f2">}</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">const</span><span> nodeMovingBefore </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">nodes</span><span class="token" style="color:#e3e9f2">[</span><span class="token" style="color:#d88b4a">&lt;</span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#d88b4a">&gt;</span><span>nodeMovingBeforeId</span><span class="token" style="color:#e3e9f2">]</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">const</span><span> nodeMovingAfter </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">nodes</span><span class="token" style="color:#e3e9f2">[</span><span class="token" style="color:#d88b4a">&lt;</span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#d88b4a">&gt;</span><span>nodeMovingAfterId</span><span class="token" style="color:#e3e9f2">]</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    nodeMovingBefore</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">next</span><span> </span><span class="token" style="color:#d88b4a">=</span><span> nodeMovingAfterId</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    nodeMovingAfter</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">prev</span><span> </span><span class="token" style="color:#d88b4a">=</span><span> nodeMovingBeforeId</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">return</span><span> nodeMoving</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>  </span><span class="token" style="color:#e3e9f2">}</span><span>
</span><span>  </span><span class="token" style="color:#cf7ef6">remove</span><span class="token" style="color:#e3e9f2">(</span><span>id</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#d88b4a">void</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">if</span><span> </span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#d88b4a">!</span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token method" style="color:#6ab3e4">exists</span><span class="token" style="color:#e3e9f2">(</span><span>id</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>      </span><span class="token control-flow" style="color:#d88b4a">throw</span><span> </span><span class="token" style="color:#d88b4a">new</span><span> </span><span class="token known-class-name" style="color:#6ab3e4">Error</span><span class="token" style="color:#e3e9f2">(</span><span class="token template-string template-punctuation" style="color:#82c366">`</span><span class="token template-string interpolation interpolation-punctuation" style="color:#e3e9f2">${</span><span class="token template-string interpolation">id</span><span class="token template-string interpolation interpolation-punctuation" style="color:#e3e9f2">}</span><span class="token template-string" style="color:#82c366"> does not exist.</span><span class="token template-string template-punctuation" style="color:#82c366">`</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#e3e9f2">}</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token method" style="color:#6ab3e4">pop</span><span class="token" style="color:#e3e9f2">(</span><span>id</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#ccd6e4;font-style:italic">//@ts-ignore</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">nodes</span><span class="token" style="color:#e3e9f2">[</span><span>id</span><span class="token" style="color:#e3e9f2">]</span><span> </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token nil" style="color:#d88b4a">undefined</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">delete</span><span> </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">nodes</span><span class="token" style="color:#e3e9f2">[</span><span>id</span><span class="token" style="color:#e3e9f2">]</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">size</span><span class="token" style="color:#d88b4a">--</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>  </span><span class="token" style="color:#e3e9f2">}</span><span>
</span><span>  </span><span class="token" style="color:#cf7ef6">removeAll</span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>    </span><span class="token" style="color:#ccd6e4;font-style:italic">//@ts-ignore</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">nodes</span><span> </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token nil" style="color:#d88b4a">undefined</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">nodes</span><span> </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span class="token" style="color:#e3e9f2">}</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">size</span><span> </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#cdb74a">0</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">head</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">next</span><span> </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#82c366">&quot;tail&quot;</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">tail</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">prev</span><span> </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#82c366">&quot;head&quot;</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">_currentIteratorBackwardData</span><span> </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#cdb74a">false</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">_currentIteratorFowardData</span><span> </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#cdb74a">false</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">_currentIteratorForwardId</span><span> </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#82c366">&quot;head&quot;</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">_currentIteratorBackwardId</span><span> </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#82c366">&quot;tail&quot;</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>  </span><span class="token" style="color:#e3e9f2">}</span><span>
</span>
<span>  </span><span class="token" style="color:#cf7ef6">append</span><span class="token" style="color:#e3e9f2">(</span><span>id</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">if</span><span> </span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#d88b4a">!</span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token method" style="color:#6ab3e4">exists</span><span class="token" style="color:#e3e9f2">(</span><span>id</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>      </span><span class="token control-flow" style="color:#d88b4a">throw</span><span> </span><span class="token" style="color:#d88b4a">new</span><span> </span><span class="token known-class-name" style="color:#6ab3e4">Error</span><span class="token" style="color:#e3e9f2">(</span><span class="token template-string template-punctuation" style="color:#82c366">`</span><span class="token template-string interpolation interpolation-punctuation" style="color:#e3e9f2">${</span><span class="token template-string interpolation">id</span><span class="token template-string interpolation interpolation-punctuation" style="color:#e3e9f2">}</span><span class="token template-string" style="color:#82c366"> does not exist.</span><span class="token template-string template-punctuation" style="color:#82c366">`</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#e3e9f2">}</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">if</span><span> </span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#d88b4a">!</span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">tail</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">prev</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token control-flow" style="color:#d88b4a">return</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">if</span><span> </span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">tail</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">prev</span><span> </span><span class="token" style="color:#d88b4a">==</span><span> </span><span class="token" style="color:#82c366">&quot;head&quot;</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>      </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">head</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">next</span><span> </span><span class="token" style="color:#d88b4a">=</span><span> id</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#e3e9f2">}</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">const</span><span> prevNodeId </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">tail</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">prev</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">const</span><span> prevNode </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">nodes</span><span class="token" style="color:#e3e9f2">[</span><span>prevNodeId</span><span class="token" style="color:#e3e9f2">]</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    prevNode</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">next</span><span> </span><span class="token" style="color:#d88b4a">=</span><span> id</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">tail</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">prev</span><span> </span><span class="token" style="color:#d88b4a">=</span><span> id</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">const</span><span> movingNode </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token method" style="color:#6ab3e4">pop</span><span class="token" style="color:#e3e9f2">(</span><span>id</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    movingNode</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">prev</span><span> </span><span class="token" style="color:#d88b4a">=</span><span> prevNodeId</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    movingNode</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">next</span><span> </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#82c366">&quot;tail&quot;</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>  </span><span class="token" style="color:#e3e9f2">}</span><span>
</span><span>  </span><span class="token" style="color:#cf7ef6">prepend</span><span class="token" style="color:#e3e9f2">(</span><span>id</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">if</span><span> </span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#d88b4a">!</span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token method" style="color:#6ab3e4">exists</span><span class="token" style="color:#e3e9f2">(</span><span>id</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>      </span><span class="token control-flow" style="color:#d88b4a">throw</span><span> </span><span class="token" style="color:#d88b4a">new</span><span> </span><span class="token known-class-name" style="color:#6ab3e4">Error</span><span class="token" style="color:#e3e9f2">(</span><span class="token template-string template-punctuation" style="color:#82c366">`</span><span class="token template-string interpolation interpolation-punctuation" style="color:#e3e9f2">${</span><span class="token template-string interpolation">id</span><span class="token template-string interpolation interpolation-punctuation" style="color:#e3e9f2">}</span><span class="token template-string" style="color:#82c366"> does not exist.</span><span class="token template-string template-punctuation" style="color:#82c366">`</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#e3e9f2">}</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">if</span><span> </span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#d88b4a">!</span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">head</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">next</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token control-flow" style="color:#d88b4a">return</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">if</span><span> </span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">head</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">next</span><span> </span><span class="token" style="color:#d88b4a">==</span><span> </span><span class="token" style="color:#82c366">&quot;tail&quot;</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>      </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">tail</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">prev</span><span> </span><span class="token" style="color:#d88b4a">=</span><span> id</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#e3e9f2">}</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">const</span><span> nextNodeId </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">head</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">next</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">const</span><span> nextNode </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">nodes</span><span class="token" style="color:#e3e9f2">[</span><span>nextNodeId</span><span class="token" style="color:#e3e9f2">]</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    nextNode</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">prev</span><span> </span><span class="token" style="color:#d88b4a">=</span><span> id</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">head</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">next</span><span> </span><span class="token" style="color:#d88b4a">=</span><span> id</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">const</span><span> movingNode </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token method" style="color:#6ab3e4">pop</span><span class="token" style="color:#e3e9f2">(</span><span>id</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    movingNode</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">prev</span><span> </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#82c366">&quot;head&quot;</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    movingNode</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">next</span><span> </span><span class="token" style="color:#d88b4a">=</span><span> nextNodeId</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>  </span><span class="token" style="color:#e3e9f2">}</span><span>
</span>
<span>  </span><span class="token" style="color:#cf7ef6">appendNew</span><span class="token" style="color:#e3e9f2">(</span><span>id</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#e3e9f2">,</span><span> </span><span class="token maybe-class-name">Data</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#cdb74a">T</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">if</span><span> </span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token method" style="color:#6ab3e4">exists</span><span class="token" style="color:#e3e9f2">(</span><span>id</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>      </span><span class="token control-flow" style="color:#d88b4a">throw</span><span> </span><span class="token" style="color:#d88b4a">new</span><span> </span><span class="token known-class-name" style="color:#6ab3e4">Error</span><span class="token" style="color:#e3e9f2">(</span><span class="token template-string template-punctuation" style="color:#82c366">`</span><span class="token template-string interpolation interpolation-punctuation" style="color:#e3e9f2">${</span><span class="token template-string interpolation">id</span><span class="token template-string interpolation interpolation-punctuation" style="color:#e3e9f2">}</span><span class="token template-string" style="color:#82c366"> already exist.</span><span class="token template-string template-punctuation" style="color:#82c366">`</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#e3e9f2">}</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">if</span><span> </span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#d88b4a">!</span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">tail</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">prev</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token control-flow" style="color:#d88b4a">return</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">if</span><span> </span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">tail</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">prev</span><span> </span><span class="token" style="color:#d88b4a">==</span><span> </span><span class="token" style="color:#82c366">&quot;head&quot;</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>      </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">head</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">next</span><span> </span><span class="token" style="color:#d88b4a">=</span><span> id</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#e3e9f2">}</span><span>
</span>
<span>    </span><span class="token" style="color:#d88b4a">const</span><span> bottomNodeId </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">tail</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">prev</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">const</span><span> newNode</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token maybe-class-name">DoubleLinkedIDListNode</span><span class="token" style="color:#d88b4a">&lt;</span><span class="token" style="color:#cdb74a">T</span><span class="token" style="color:#d88b4a">&gt;</span><span> </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>      data</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token maybe-class-name">Data</span><span class="token" style="color:#e3e9f2">,</span><span>
</span><span>      prev</span><span class="token" style="color:#d88b4a">:</span><span> bottomNodeId</span><span class="token" style="color:#e3e9f2">,</span><span>
</span><span>      next</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#82c366">&quot;tail&quot;</span><span class="token" style="color:#e3e9f2">,</span><span>
</span><span>    </span><span class="token" style="color:#e3e9f2">}</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">nodes</span><span class="token" style="color:#e3e9f2">[</span><span>id</span><span class="token" style="color:#e3e9f2">]</span><span> </span><span class="token" style="color:#d88b4a">=</span><span> newNode</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">nodes</span><span class="token" style="color:#e3e9f2">[</span><span>bottomNodeId</span><span class="token" style="color:#e3e9f2">]</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">next</span><span> </span><span class="token" style="color:#d88b4a">=</span><span> id</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">tail</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">prev</span><span> </span><span class="token" style="color:#d88b4a">=</span><span> id</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">size</span><span class="token" style="color:#d88b4a">++</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>  </span><span class="token" style="color:#e3e9f2">}</span><span>
</span><span>  </span><span class="token" style="color:#cf7ef6">prependNew</span><span class="token" style="color:#e3e9f2">(</span><span>id</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#e3e9f2">,</span><span> </span><span class="token maybe-class-name">Data</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#cdb74a">T</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">if</span><span> </span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token method" style="color:#6ab3e4">exists</span><span class="token" style="color:#e3e9f2">(</span><span>id</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>      </span><span class="token control-flow" style="color:#d88b4a">throw</span><span> </span><span class="token" style="color:#d88b4a">new</span><span> </span><span class="token known-class-name" style="color:#6ab3e4">Error</span><span class="token" style="color:#e3e9f2">(</span><span class="token template-string template-punctuation" style="color:#82c366">`</span><span class="token template-string interpolation interpolation-punctuation" style="color:#e3e9f2">${</span><span class="token template-string interpolation">id</span><span class="token template-string interpolation interpolation-punctuation" style="color:#e3e9f2">}</span><span class="token template-string" style="color:#82c366"> already exist.</span><span class="token template-string template-punctuation" style="color:#82c366">`</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#e3e9f2">}</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">if</span><span> </span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#d88b4a">!</span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">head</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">next</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token control-flow" style="color:#d88b4a">return</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">if</span><span> </span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">head</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">next</span><span> </span><span class="token" style="color:#d88b4a">==</span><span> </span><span class="token" style="color:#82c366">&quot;tail&quot;</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>      </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">tail</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">prev</span><span> </span><span class="token" style="color:#d88b4a">=</span><span> id</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#e3e9f2">}</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">const</span><span> topNodeId </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">head</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">next</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">const</span><span> newNode</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token maybe-class-name">DoubleLinkedIDListNode</span><span class="token" style="color:#d88b4a">&lt;</span><span class="token" style="color:#cdb74a">T</span><span class="token" style="color:#d88b4a">&gt;</span><span> </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>      data</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token maybe-class-name">Data</span><span class="token" style="color:#e3e9f2">,</span><span>
</span><span>      prev</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#82c366">&quot;head&quot;</span><span class="token" style="color:#e3e9f2">,</span><span>
</span><span>      next</span><span class="token" style="color:#d88b4a">:</span><span> topNodeId</span><span class="token" style="color:#e3e9f2">,</span><span>
</span><span>    </span><span class="token" style="color:#e3e9f2">}</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">nodes</span><span class="token" style="color:#e3e9f2">[</span><span>id</span><span class="token" style="color:#e3e9f2">]</span><span> </span><span class="token" style="color:#d88b4a">=</span><span> newNode</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">nodes</span><span class="token" style="color:#e3e9f2">[</span><span>topNodeId</span><span class="token" style="color:#e3e9f2">]</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">prev</span><span> </span><span class="token" style="color:#d88b4a">=</span><span> id</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">head</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">next</span><span> </span><span class="token" style="color:#d88b4a">=</span><span> id</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">size</span><span class="token" style="color:#d88b4a">++</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>  </span><span class="token" style="color:#e3e9f2">}</span><span>
</span>
<span>  </span><span class="token" style="color:#cf7ef6">getValue</span><span class="token" style="color:#e3e9f2">(</span><span>id</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">if</span><span> </span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#d88b4a">!</span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token method" style="color:#6ab3e4">exists</span><span class="token" style="color:#e3e9f2">(</span><span>id</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>      </span><span class="token control-flow" style="color:#d88b4a">throw</span><span> </span><span class="token" style="color:#d88b4a">new</span><span> </span><span class="token known-class-name" style="color:#6ab3e4">Error</span><span class="token" style="color:#e3e9f2">(</span><span class="token template-string template-punctuation" style="color:#82c366">`</span><span class="token template-string interpolation interpolation-punctuation" style="color:#e3e9f2">${</span><span class="token template-string interpolation">id</span><span class="token template-string interpolation interpolation-punctuation" style="color:#e3e9f2">}</span><span class="token template-string" style="color:#82c366"> does not exist.</span><span class="token template-string template-punctuation" style="color:#82c366">`</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#e3e9f2">}</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">return</span><span> </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">nodes</span><span class="token" style="color:#e3e9f2">[</span><span>id</span><span class="token" style="color:#e3e9f2">]</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">data</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>  </span><span class="token" style="color:#e3e9f2">}</span><span>
</span><span>  </span><span class="token" style="color:#cf7ef6">setValue</span><span class="token" style="color:#e3e9f2">(</span><span>id</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#e3e9f2">,</span><span> data</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#cdb74a">T</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">if</span><span> </span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#d88b4a">!</span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token method" style="color:#6ab3e4">exists</span><span class="token" style="color:#e3e9f2">(</span><span>id</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>      </span><span class="token control-flow" style="color:#d88b4a">throw</span><span> </span><span class="token" style="color:#d88b4a">new</span><span> </span><span class="token known-class-name" style="color:#6ab3e4">Error</span><span class="token" style="color:#e3e9f2">(</span><span class="token template-string template-punctuation" style="color:#82c366">`</span><span class="token template-string interpolation interpolation-punctuation" style="color:#e3e9f2">${</span><span class="token template-string interpolation">id</span><span class="token template-string interpolation interpolation-punctuation" style="color:#e3e9f2">}</span><span class="token template-string" style="color:#82c366"> does not exist.</span><span class="token template-string template-punctuation" style="color:#82c366">`</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#e3e9f2">}</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">nodes</span><span class="token" style="color:#e3e9f2">[</span><span>id</span><span class="token" style="color:#e3e9f2">]</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">data</span><span> </span><span class="token" style="color:#d88b4a">=</span><span> data</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>  </span><span class="token" style="color:#e3e9f2">}</span><span>
</span>
<span>  </span><span class="token" style="color:#cf7ef6">traverseWithFuncForward</span><span class="token" style="color:#e3e9f2">(</span><span class="token function-variable" style="color:#cf7ef6">func</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#e3e9f2">(</span><span>key</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#e3e9f2">,</span><span> data</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#cdb74a">T</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token arrow" style="color:#d88b4a">=&gt;</span><span> </span><span class="token" style="color:#ea89ea">any</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">let</span><span> data</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token maybe-class-name">IteratorResult</span><span class="token" style="color:#d88b4a">&lt;</span><span class="token" style="color:#e3e9f2">{</span><span> key</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#e3e9f2">;</span><span> value</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#cdb74a">T</span><span> </span><span class="token" style="color:#d88b4a">|</span><span> </span><span class="token" style="color:#cdb74a">false</span><span> </span><span class="token" style="color:#e3e9f2">}</span><span class="token" style="color:#d88b4a">&gt;</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    data </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token method" style="color:#6ab3e4">traverseKeyValuesForward</span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">while</span><span> </span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#d88b4a">!</span><span>data</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">done</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>      </span><span class="token" style="color:#cf7ef6">func</span><span class="token" style="color:#e3e9f2">(</span><span>data</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">value</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">key</span><span class="token" style="color:#e3e9f2">,</span><span> </span><span class="token" style="color:#d88b4a">&lt;</span><span class="token" style="color:#cdb74a">T</span><span class="token" style="color:#d88b4a">&gt;</span><span>data</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">value</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">value</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#e3e9f2">;</span><span>
</span>
<span>      data </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token method" style="color:#6ab3e4">traverseKeyValuesForward</span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#e3e9f2">}</span><span>
</span><span>  </span><span class="token" style="color:#e3e9f2">}</span><span>
</span>
<span>  </span><span class="token" style="color:#cf7ef6">traverseWithFuncBackward</span><span class="token" style="color:#e3e9f2">(</span><span class="token function-variable" style="color:#cf7ef6">func</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#e3e9f2">(</span><span>key</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#e3e9f2">,</span><span> data</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#cdb74a">T</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token arrow" style="color:#d88b4a">=&gt;</span><span> </span><span class="token" style="color:#ea89ea">any</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">let</span><span> data</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token maybe-class-name">IteratorResult</span><span class="token" style="color:#d88b4a">&lt;</span><span class="token" style="color:#e3e9f2">{</span><span> key</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#e3e9f2">;</span><span> value</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#cdb74a">T</span><span> </span><span class="token" style="color:#d88b4a">|</span><span> </span><span class="token" style="color:#cdb74a">false</span><span> </span><span class="token" style="color:#e3e9f2">}</span><span class="token" style="color:#d88b4a">&gt;</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    data </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token method" style="color:#6ab3e4">traverseKeyValuesBackward</span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">while</span><span> </span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#d88b4a">!</span><span>data</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">done</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>      </span><span class="token" style="color:#cf7ef6">func</span><span class="token" style="color:#e3e9f2">(</span><span>data</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">value</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">key</span><span class="token" style="color:#e3e9f2">,</span><span> </span><span class="token" style="color:#d88b4a">&lt;</span><span class="token" style="color:#cdb74a">T</span><span class="token" style="color:#d88b4a">&gt;</span><span>data</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">value</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">value</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#e3e9f2">;</span><span>
</span>
<span>      data </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token method" style="color:#6ab3e4">traverseKeyValuesForward</span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#e3e9f2">}</span><span>
</span><span>  </span><span class="token" style="color:#e3e9f2">}</span><span>
</span>
<span>  </span><span class="token" style="color:#cf7ef6">resetTraverse</span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">_currentIteratorForwardId</span><span> </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#82c366">&quot;head&quot;</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">_currentIteratorBackwardId</span><span> </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#82c366">&quot;tail&quot;</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>  </span><span class="token" style="color:#e3e9f2">}</span><span>
</span>
<span>  </span><span class="token" style="color:#cf7ef6">traverseIDsForward</span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token maybe-class-name">IteratorResult</span><span class="token" style="color:#d88b4a">&lt;</span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#d88b4a">&gt;</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">let</span><span> done </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#cdb74a">false</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">if</span><span> </span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">nodes</span><span class="token" style="color:#e3e9f2">[</span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">_currentIteratorForwardId</span><span class="token" style="color:#e3e9f2">]</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">next</span><span> </span><span class="token" style="color:#d88b4a">==</span><span> </span><span class="token" style="color:#82c366">&quot;tail&quot;</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>      done </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#cdb74a">true</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>      </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">_currentIteratorForwardId</span><span> </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#82c366">&quot;head&quot;</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#e3e9f2">}</span><span> </span><span class="token control-flow" style="color:#d88b4a">else</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>      </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">_currentIteratorForwardId</span><span> </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#d88b4a">&lt;</span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#d88b4a">&gt;</span><span class="token" style="color:#e3e9f2">(</span><span>
</span><span>        </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">nodes</span><span class="token" style="color:#e3e9f2">[</span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">_currentIteratorForwardId</span><span class="token" style="color:#e3e9f2">]</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">next</span><span>
</span><span>      </span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>      </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">_currentIteratorFowardData</span><span> </span><span class="token" style="color:#d88b4a">=</span><span>
</span><span>        </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">nodes</span><span class="token" style="color:#e3e9f2">[</span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">_currentIteratorForwardId</span><span class="token" style="color:#e3e9f2">]</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">data</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#e3e9f2">}</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">return</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>      done</span><span class="token" style="color:#d88b4a">:</span><span> done</span><span class="token" style="color:#e3e9f2">,</span><span>
</span><span>      value</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">_currentIteratorForwardId</span><span class="token" style="color:#e3e9f2">,</span><span>
</span><span>    </span><span class="token" style="color:#e3e9f2">}</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>  </span><span class="token" style="color:#e3e9f2">}</span><span>
</span><span>  </span><span class="token" style="color:#cf7ef6">traverseValuesForward</span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token maybe-class-name">IteratorResult</span><span class="token" style="color:#d88b4a">&lt;</span><span class="token" style="color:#cdb74a">T</span><span> </span><span class="token" style="color:#d88b4a">|</span><span> </span><span class="token" style="color:#cdb74a">false</span><span class="token" style="color:#d88b4a">&gt;</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">let</span><span> done </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#cdb74a">false</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">if</span><span> </span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">nodes</span><span class="token" style="color:#e3e9f2">[</span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">_currentIteratorForwardId</span><span class="token" style="color:#e3e9f2">]</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">next</span><span> </span><span class="token" style="color:#d88b4a">==</span><span> </span><span class="token" style="color:#82c366">&quot;tail&quot;</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>      done </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#cdb74a">true</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>      </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">_currentIteratorForwardId</span><span> </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#82c366">&quot;head&quot;</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#e3e9f2">}</span><span> </span><span class="token control-flow" style="color:#d88b4a">else</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>      </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">_currentIteratorForwardId</span><span> </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#d88b4a">&lt;</span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#d88b4a">&gt;</span><span class="token" style="color:#e3e9f2">(</span><span>
</span><span>        </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">nodes</span><span class="token" style="color:#e3e9f2">[</span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">_currentIteratorForwardId</span><span class="token" style="color:#e3e9f2">]</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">next</span><span>
</span><span>      </span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>      </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">_currentIteratorFowardData</span><span> </span><span class="token" style="color:#d88b4a">=</span><span>
</span><span>        </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">nodes</span><span class="token" style="color:#e3e9f2">[</span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">_currentIteratorForwardId</span><span class="token" style="color:#e3e9f2">]</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">data</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#e3e9f2">}</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">return</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>      done</span><span class="token" style="color:#d88b4a">:</span><span> done</span><span class="token" style="color:#e3e9f2">,</span><span>
</span><span>      value</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">_currentIteratorFowardData</span><span class="token" style="color:#e3e9f2">,</span><span>
</span><span>    </span><span class="token" style="color:#e3e9f2">}</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>  </span><span class="token" style="color:#e3e9f2">}</span><span>
</span><span>  </span><span class="token" style="color:#cf7ef6">traverseKeyValuesForward</span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token maybe-class-name">IteratorResult</span><span class="token" style="color:#d88b4a">&lt;</span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>    key</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    value</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#cdb74a">T</span><span> </span><span class="token" style="color:#d88b4a">|</span><span> </span><span class="token" style="color:#cdb74a">false</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>  </span><span class="token" style="color:#e3e9f2">}</span><span class="token" style="color:#d88b4a">&gt;</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">let</span><span> done </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#cdb74a">false</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">if</span><span> </span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">nodes</span><span class="token" style="color:#e3e9f2">[</span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">_currentIteratorForwardId</span><span class="token" style="color:#e3e9f2">]</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">next</span><span> </span><span class="token" style="color:#d88b4a">==</span><span> </span><span class="token" style="color:#82c366">&quot;tail&quot;</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>      done </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#cdb74a">true</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>      </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">_currentIteratorForwardId</span><span> </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#82c366">&quot;head&quot;</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#e3e9f2">}</span><span> </span><span class="token control-flow" style="color:#d88b4a">else</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>      </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">_currentIteratorForwardId</span><span> </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#d88b4a">&lt;</span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#d88b4a">&gt;</span><span class="token" style="color:#e3e9f2">(</span><span>
</span><span>        </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">nodes</span><span class="token" style="color:#e3e9f2">[</span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">_currentIteratorForwardId</span><span class="token" style="color:#e3e9f2">]</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">next</span><span>
</span><span>      </span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>      </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">_currentIteratorFowardData</span><span> </span><span class="token" style="color:#d88b4a">=</span><span>
</span><span>        </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">nodes</span><span class="token" style="color:#e3e9f2">[</span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">_currentIteratorForwardId</span><span class="token" style="color:#e3e9f2">]</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">data</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#e3e9f2">}</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">return</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>      done</span><span class="token" style="color:#d88b4a">:</span><span> done</span><span class="token" style="color:#e3e9f2">,</span><span>
</span><span>      value</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>        key</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">_currentIteratorForwardId</span><span class="token" style="color:#e3e9f2">,</span><span>
</span><span>        value</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">_currentIteratorFowardData</span><span class="token" style="color:#e3e9f2">,</span><span>
</span><span>      </span><span class="token" style="color:#e3e9f2">}</span><span class="token" style="color:#e3e9f2">,</span><span>
</span><span>    </span><span class="token" style="color:#e3e9f2">}</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>  </span><span class="token" style="color:#e3e9f2">}</span><span>
</span>
<span>  </span><span class="token" style="color:#cf7ef6">traverseIDsBackward</span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token maybe-class-name">IteratorResult</span><span class="token" style="color:#d88b4a">&lt;</span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#d88b4a">&gt;</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">let</span><span> done </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#cdb74a">false</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">if</span><span> </span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">nodes</span><span class="token" style="color:#e3e9f2">[</span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">_currentIteratorBackwardId</span><span class="token" style="color:#e3e9f2">]</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">prev</span><span> </span><span class="token" style="color:#d88b4a">==</span><span> </span><span class="token" style="color:#82c366">&quot;head&quot;</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>      done </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#cdb74a">true</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>      </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">_currentIteratorBackwardId</span><span> </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#82c366">&quot;tail&quot;</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#e3e9f2">}</span><span> </span><span class="token control-flow" style="color:#d88b4a">else</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>      </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">_currentIteratorBackwardId</span><span> </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#d88b4a">&lt;</span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#d88b4a">&gt;</span><span class="token" style="color:#e3e9f2">(</span><span>
</span><span>        </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">nodes</span><span class="token" style="color:#e3e9f2">[</span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">_currentIteratorBackwardId</span><span class="token" style="color:#e3e9f2">]</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">prev</span><span>
</span><span>      </span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#e3e9f2">}</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">return</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>      done</span><span class="token" style="color:#d88b4a">:</span><span> done</span><span class="token" style="color:#e3e9f2">,</span><span>
</span><span>      value</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">_currentIteratorBackwardId</span><span class="token" style="color:#e3e9f2">,</span><span>
</span><span>    </span><span class="token" style="color:#e3e9f2">}</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>  </span><span class="token" style="color:#e3e9f2">}</span><span>
</span><span>  </span><span class="token" style="color:#cf7ef6">traverseValuesBackward</span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token maybe-class-name">IteratorResult</span><span class="token" style="color:#d88b4a">&lt;</span><span class="token" style="color:#cdb74a">T</span><span> </span><span class="token" style="color:#d88b4a">|</span><span> </span><span class="token" style="color:#cdb74a">false</span><span class="token" style="color:#d88b4a">&gt;</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">let</span><span> done </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#cdb74a">false</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">if</span><span> </span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">nodes</span><span class="token" style="color:#e3e9f2">[</span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">_currentIteratorBackwardId</span><span class="token" style="color:#e3e9f2">]</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">prev</span><span> </span><span class="token" style="color:#d88b4a">==</span><span> </span><span class="token" style="color:#82c366">&quot;head&quot;</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>      done </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#cdb74a">true</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>      </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">_currentIteratorBackwardId</span><span> </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#82c366">&quot;tail&quot;</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#e3e9f2">}</span><span> </span><span class="token control-flow" style="color:#d88b4a">else</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>      </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">_currentIteratorBackwardId</span><span> </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#d88b4a">&lt;</span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#d88b4a">&gt;</span><span class="token" style="color:#e3e9f2">(</span><span>
</span><span>        </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">nodes</span><span class="token" style="color:#e3e9f2">[</span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">_currentIteratorBackwardId</span><span class="token" style="color:#e3e9f2">]</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">prev</span><span>
</span><span>      </span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>      </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">_currentIteratorBackwardData</span><span> </span><span class="token" style="color:#d88b4a">=</span><span>
</span><span>        </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">nodes</span><span class="token" style="color:#e3e9f2">[</span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">_currentIteratorBackwardId</span><span class="token" style="color:#e3e9f2">]</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">data</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#e3e9f2">}</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">return</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>      done</span><span class="token" style="color:#d88b4a">:</span><span> done</span><span class="token" style="color:#e3e9f2">,</span><span>
</span><span>      value</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">_currentIteratorBackwardData</span><span class="token" style="color:#e3e9f2">,</span><span>
</span><span>    </span><span class="token" style="color:#e3e9f2">}</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>  </span><span class="token" style="color:#e3e9f2">}</span><span>
</span><span>  </span><span class="token" style="color:#cf7ef6">traverseKeyValuesBackward</span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token maybe-class-name">IteratorResult</span><span class="token" style="color:#d88b4a">&lt;</span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>    key</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    value</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#cdb74a">T</span><span> </span><span class="token" style="color:#d88b4a">|</span><span> </span><span class="token" style="color:#cdb74a">false</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>  </span><span class="token" style="color:#e3e9f2">}</span><span class="token" style="color:#d88b4a">&gt;</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">let</span><span> done </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#cdb74a">false</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">if</span><span> </span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">nodes</span><span class="token" style="color:#e3e9f2">[</span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">_currentIteratorBackwardId</span><span class="token" style="color:#e3e9f2">]</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">prev</span><span> </span><span class="token" style="color:#d88b4a">==</span><span> </span><span class="token" style="color:#82c366">&quot;head&quot;</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>      done </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#cdb74a">true</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>      </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">_currentIteratorBackwardId</span><span> </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#82c366">&quot;tail&quot;</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#e3e9f2">}</span><span> </span><span class="token control-flow" style="color:#d88b4a">else</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>      </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">_currentIteratorBackwardId</span><span> </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#d88b4a">&lt;</span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#d88b4a">&gt;</span><span class="token" style="color:#e3e9f2">(</span><span>
</span><span>        </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">nodes</span><span class="token" style="color:#e3e9f2">[</span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">_currentIteratorBackwardId</span><span class="token" style="color:#e3e9f2">]</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">prev</span><span>
</span><span>      </span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>      </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">_currentIteratorBackwardData</span><span> </span><span class="token" style="color:#d88b4a">=</span><span>
</span><span>        </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">nodes</span><span class="token" style="color:#e3e9f2">[</span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">_currentIteratorBackwardId</span><span class="token" style="color:#e3e9f2">]</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">data</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#e3e9f2">}</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">return</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>      done</span><span class="token" style="color:#d88b4a">:</span><span> done</span><span class="token" style="color:#e3e9f2">,</span><span>
</span><span>      value</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>        key</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">_currentIteratorBackwardId</span><span class="token" style="color:#e3e9f2">,</span><span>
</span><span>        value</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">_currentIteratorBackwardData</span><span class="token" style="color:#e3e9f2">,</span><span>
</span><span>      </span><span class="token" style="color:#e3e9f2">}</span><span class="token" style="color:#e3e9f2">,</span><span>
</span><span>    </span><span class="token" style="color:#e3e9f2">}</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>  </span><span class="token" style="color:#e3e9f2">}</span><span>
</span>
<span>  </span><span class="token" style="color:#cf7ef6">exists</span><span class="token" style="color:#e3e9f2">(</span><span>id</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">if</span><span> </span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">nodes</span><span class="token" style="color:#e3e9f2">[</span><span>id</span><span class="token" style="color:#e3e9f2">]</span><span> </span><span class="token" style="color:#d88b4a">===</span><span> </span><span class="token nil" style="color:#d88b4a">undefined</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>      </span><span class="token control-flow" style="color:#d88b4a">return</span><span> </span><span class="token" style="color:#cdb74a">false</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#e3e9f2">}</span><span> </span><span class="token control-flow" style="color:#d88b4a">else</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>      </span><span class="token control-flow" style="color:#d88b4a">return</span><span> </span><span class="token" style="color:#cdb74a">true</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#e3e9f2">}</span><span>
</span><span>  </span><span class="token" style="color:#e3e9f2">}</span><span>
</span>
<span>  </span><span class="token" style="color:#cf7ef6">getKVP</span><span class="token" style="color:#e3e9f2">(</span><span>id</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span> key</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#e3e9f2">;</span><span> value</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#cdb74a">T</span><span> </span><span class="token" style="color:#d88b4a">|</span><span> </span><span class="token" style="color:#cdb74a">false</span><span> </span><span class="token" style="color:#e3e9f2">}</span><span> </span><span class="token" style="color:#d88b4a">|</span><span> </span><span class="token" style="color:#cdb74a">false</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">if</span><span> </span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#d88b4a">!</span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token method" style="color:#6ab3e4">exists</span><span class="token" style="color:#e3e9f2">(</span><span>id</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>      </span><span class="token control-flow" style="color:#d88b4a">throw</span><span> </span><span class="token" style="color:#d88b4a">new</span><span> </span><span class="token known-class-name" style="color:#6ab3e4">Error</span><span class="token" style="color:#e3e9f2">(</span><span class="token template-string template-punctuation" style="color:#82c366">`</span><span class="token template-string interpolation interpolation-punctuation" style="color:#e3e9f2">${</span><span class="token template-string interpolation">id</span><span class="token template-string interpolation interpolation-punctuation" style="color:#e3e9f2">}</span><span class="token template-string" style="color:#82c366"> does not exist.</span><span class="token template-string template-punctuation" style="color:#82c366">`</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#e3e9f2">}</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">const</span><span> node </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">nodes</span><span class="token" style="color:#e3e9f2">[</span><span>id</span><span class="token" style="color:#e3e9f2">]</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">if</span><span> </span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#d88b4a">!</span><span>node</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>      </span><span class="token control-flow" style="color:#d88b4a">return</span><span> </span><span class="token" style="color:#cdb74a">false</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#e3e9f2">}</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">return</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span> key</span><span class="token" style="color:#d88b4a">:</span><span> id</span><span class="token" style="color:#e3e9f2">,</span><span> value</span><span class="token" style="color:#d88b4a">:</span><span> node</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">data</span><span> </span><span class="token" style="color:#e3e9f2">}</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>  </span><span class="token" style="color:#e3e9f2">}</span><span>
</span>
<span>  </span><span class="token" style="color:#cf7ef6">getNextKVP</span><span class="token" style="color:#e3e9f2">(</span><span>id</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span> key</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#e3e9f2">;</span><span> value</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#cdb74a">T</span><span> </span><span class="token" style="color:#d88b4a">|</span><span> </span><span class="token" style="color:#cdb74a">false</span><span> </span><span class="token" style="color:#e3e9f2">}</span><span> </span><span class="token" style="color:#d88b4a">|</span><span> </span><span class="token" style="color:#cdb74a">false</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">if</span><span> </span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#d88b4a">!</span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token method" style="color:#6ab3e4">exists</span><span class="token" style="color:#e3e9f2">(</span><span>id</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>      </span><span class="token control-flow" style="color:#d88b4a">throw</span><span> </span><span class="token" style="color:#d88b4a">new</span><span> </span><span class="token known-class-name" style="color:#6ab3e4">Error</span><span class="token" style="color:#e3e9f2">(</span><span class="token template-string template-punctuation" style="color:#82c366">`</span><span class="token template-string interpolation interpolation-punctuation" style="color:#e3e9f2">${</span><span class="token template-string interpolation">id</span><span class="token template-string interpolation interpolation-punctuation" style="color:#e3e9f2">}</span><span class="token template-string" style="color:#82c366"> does not exist.</span><span class="token template-string template-punctuation" style="color:#82c366">`</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#e3e9f2">}</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">if</span><span> </span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#d88b4a">!</span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">nodes</span><span class="token" style="color:#e3e9f2">[</span><span>id</span><span class="token" style="color:#e3e9f2">]</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>      </span><span class="token control-flow" style="color:#d88b4a">throw</span><span> </span><span class="token" style="color:#d88b4a">new</span><span> </span><span class="token known-class-name" style="color:#6ab3e4">Error</span><span class="token" style="color:#e3e9f2">(</span><span class="token template-string template-punctuation" style="color:#82c366">`</span><span class="token template-string interpolation interpolation-punctuation" style="color:#e3e9f2">${</span><span class="token template-string interpolation">id</span><span class="token template-string interpolation interpolation-punctuation" style="color:#e3e9f2">}</span><span class="token template-string" style="color:#82c366"> does not exist</span><span class="token template-string template-punctuation" style="color:#82c366">`</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#e3e9f2">}</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">const</span><span> node </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">nodes</span><span class="token" style="color:#e3e9f2">[</span><span>id</span><span class="token" style="color:#e3e9f2">]</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">if</span><span> </span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#d88b4a">!</span><span>node</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">next</span><span> </span><span class="token" style="color:#d88b4a">||</span><span> node</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">next</span><span> </span><span class="token" style="color:#d88b4a">==</span><span> </span><span class="token" style="color:#82c366">&quot;tail&quot;</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token control-flow" style="color:#d88b4a">return</span><span> </span><span class="token" style="color:#cdb74a">false</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">const</span><span> nextNode </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">nodes</span><span class="token" style="color:#e3e9f2">[</span><span>node</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">next</span><span class="token" style="color:#e3e9f2">]</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">return</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span> key</span><span class="token" style="color:#d88b4a">:</span><span> node</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">next</span><span class="token" style="color:#e3e9f2">,</span><span> value</span><span class="token" style="color:#d88b4a">:</span><span> nextNode</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">data</span><span> </span><span class="token" style="color:#e3e9f2">}</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>  </span><span class="token" style="color:#e3e9f2">}</span><span>
</span>
<span>  </span><span class="token" style="color:#cf7ef6">getPrevKVP</span><span class="token" style="color:#e3e9f2">(</span><span>id</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span> key</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#e3e9f2">;</span><span> value</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#cdb74a">T</span><span> </span><span class="token" style="color:#d88b4a">|</span><span> </span><span class="token" style="color:#cdb74a">false</span><span> </span><span class="token" style="color:#e3e9f2">}</span><span> </span><span class="token" style="color:#d88b4a">|</span><span> </span><span class="token" style="color:#cdb74a">false</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">if</span><span> </span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#d88b4a">!</span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token method" style="color:#6ab3e4">exists</span><span class="token" style="color:#e3e9f2">(</span><span>id</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>      </span><span class="token control-flow" style="color:#d88b4a">throw</span><span> </span><span class="token" style="color:#d88b4a">new</span><span> </span><span class="token known-class-name" style="color:#6ab3e4">Error</span><span class="token" style="color:#e3e9f2">(</span><span class="token template-string template-punctuation" style="color:#82c366">`</span><span class="token template-string interpolation interpolation-punctuation" style="color:#e3e9f2">${</span><span class="token template-string interpolation">id</span><span class="token template-string interpolation interpolation-punctuation" style="color:#e3e9f2">}</span><span class="token template-string" style="color:#82c366"> does not exist.</span><span class="token template-string template-punctuation" style="color:#82c366">`</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#e3e9f2">}</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">const</span><span> node </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">nodes</span><span class="token" style="color:#e3e9f2">[</span><span>id</span><span class="token" style="color:#e3e9f2">]</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">if</span><span> </span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#d88b4a">!</span><span>node</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">prev</span><span> </span><span class="token" style="color:#d88b4a">||</span><span> node</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">prev</span><span> </span><span class="token" style="color:#d88b4a">==</span><span> </span><span class="token" style="color:#82c366">&quot;head&quot;</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token control-flow" style="color:#d88b4a">return</span><span> </span><span class="token" style="color:#cdb74a">false</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">const</span><span> nextNode </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">nodes</span><span class="token" style="color:#e3e9f2">[</span><span>node</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">prev</span><span class="token" style="color:#e3e9f2">]</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">return</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span> key</span><span class="token" style="color:#d88b4a">:</span><span> node</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">prev</span><span class="token" style="color:#e3e9f2">,</span><span> value</span><span class="token" style="color:#d88b4a">:</span><span> nextNode</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">data</span><span> </span><span class="token" style="color:#e3e9f2">}</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>  </span><span class="token" style="color:#e3e9f2">}</span><span>
</span>
<span>  </span><span class="token" style="color:#cf7ef6">getNextID</span><span class="token" style="color:#e3e9f2">(</span><span>id</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span> </span><span class="token" style="color:#d88b4a">|</span><span> </span><span class="token" style="color:#cdb74a">false</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">if</span><span> </span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#d88b4a">!</span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token method" style="color:#6ab3e4">exists</span><span class="token" style="color:#e3e9f2">(</span><span>id</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>      </span><span class="token control-flow" style="color:#d88b4a">throw</span><span> </span><span class="token" style="color:#d88b4a">new</span><span> </span><span class="token known-class-name" style="color:#6ab3e4">Error</span><span class="token" style="color:#e3e9f2">(</span><span class="token template-string template-punctuation" style="color:#82c366">`</span><span class="token template-string interpolation interpolation-punctuation" style="color:#e3e9f2">${</span><span class="token template-string interpolation">id</span><span class="token template-string interpolation interpolation-punctuation" style="color:#e3e9f2">}</span><span class="token template-string" style="color:#82c366"> does not exist.</span><span class="token template-string template-punctuation" style="color:#82c366">`</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#e3e9f2">}</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">const</span><span> node </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">nodes</span><span class="token" style="color:#e3e9f2">[</span><span>id</span><span class="token" style="color:#e3e9f2">]</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">if</span><span> </span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#d88b4a">!</span><span>node</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">next</span><span> </span><span class="token" style="color:#d88b4a">||</span><span> node</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">next</span><span> </span><span class="token" style="color:#d88b4a">==</span><span> </span><span class="token" style="color:#82c366">&quot;tail&quot;</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token control-flow" style="color:#d88b4a">return</span><span> </span><span class="token" style="color:#cdb74a">false</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">return</span><span> node</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">next</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>  </span><span class="token" style="color:#e3e9f2">}</span><span>
</span><span>  </span><span class="token" style="color:#cf7ef6">getPrevID</span><span class="token" style="color:#e3e9f2">(</span><span>id</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span> </span><span class="token" style="color:#d88b4a">|</span><span> </span><span class="token" style="color:#cdb74a">false</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">if</span><span> </span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#d88b4a">!</span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token method" style="color:#6ab3e4">exists</span><span class="token" style="color:#e3e9f2">(</span><span>id</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>      </span><span class="token control-flow" style="color:#d88b4a">throw</span><span> </span><span class="token" style="color:#d88b4a">new</span><span> </span><span class="token known-class-name" style="color:#6ab3e4">Error</span><span class="token" style="color:#e3e9f2">(</span><span class="token template-string template-punctuation" style="color:#82c366">`</span><span class="token template-string interpolation interpolation-punctuation" style="color:#e3e9f2">${</span><span class="token template-string interpolation">id</span><span class="token template-string interpolation interpolation-punctuation" style="color:#e3e9f2">}</span><span class="token template-string" style="color:#82c366"> does not exist.</span><span class="token template-string template-punctuation" style="color:#82c366">`</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#e3e9f2">}</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">const</span><span> node </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">nodes</span><span class="token" style="color:#e3e9f2">[</span><span>id</span><span class="token" style="color:#e3e9f2">]</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">if</span><span> </span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#d88b4a">!</span><span>node</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">prev</span><span> </span><span class="token" style="color:#d88b4a">||</span><span> node</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">prev</span><span> </span><span class="token" style="color:#d88b4a">==</span><span> </span><span class="token" style="color:#82c366">&quot;head&quot;</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token control-flow" style="color:#d88b4a">return</span><span> </span><span class="token" style="color:#cdb74a">false</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">return</span><span> node</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">prev</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>  </span><span class="token" style="color:#e3e9f2">}</span><span>
</span>
<span>  </span><span class="token" style="color:#cf7ef6">isBefore</span><span class="token" style="color:#e3e9f2">(</span><span>startId</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#e3e9f2">,</span><span> idLookingFor</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">if</span><span> </span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#d88b4a">!</span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token method" style="color:#6ab3e4">exists</span><span class="token" style="color:#e3e9f2">(</span><span>startId</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>      </span><span class="token control-flow" style="color:#d88b4a">throw</span><span> </span><span class="token" style="color:#d88b4a">new</span><span> </span><span class="token known-class-name" style="color:#6ab3e4">Error</span><span class="token" style="color:#e3e9f2">(</span><span class="token template-string template-punctuation" style="color:#82c366">`</span><span class="token template-string interpolation interpolation-punctuation" style="color:#e3e9f2">${</span><span class="token template-string interpolation">startId</span><span class="token template-string interpolation interpolation-punctuation" style="color:#e3e9f2">}</span><span class="token template-string" style="color:#82c366"> does not exist.</span><span class="token template-string template-punctuation" style="color:#82c366">`</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#e3e9f2">}</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">if</span><span> </span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#d88b4a">!</span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token method" style="color:#6ab3e4">exists</span><span class="token" style="color:#e3e9f2">(</span><span>idLookingFor</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>      </span><span class="token control-flow" style="color:#d88b4a">throw</span><span> </span><span class="token" style="color:#d88b4a">new</span><span> </span><span class="token known-class-name" style="color:#6ab3e4">Error</span><span class="token" style="color:#e3e9f2">(</span><span class="token template-string template-punctuation" style="color:#82c366">`</span><span class="token template-string interpolation interpolation-punctuation" style="color:#e3e9f2">${</span><span class="token template-string interpolation">idLookingFor</span><span class="token template-string interpolation interpolation-punctuation" style="color:#e3e9f2">}</span><span class="token template-string" style="color:#82c366"> does not exist.</span><span class="token template-string template-punctuation" style="color:#82c366">`</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#e3e9f2">}</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">if</span><span> </span><span class="token" style="color:#e3e9f2">(</span><span>startId </span><span class="token" style="color:#d88b4a">==</span><span> idLookingFor</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token control-flow" style="color:#d88b4a">return</span><span> </span><span class="token" style="color:#cdb74a">true</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">const</span><span> startNode </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">nodes</span><span class="token" style="color:#e3e9f2">[</span><span>startId</span><span class="token" style="color:#e3e9f2">]</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">if</span><span> </span><span class="token" style="color:#e3e9f2">(</span><span>startNode</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">prev</span><span> </span><span class="token" style="color:#d88b4a">==</span><span> idLookingFor</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token control-flow" style="color:#d88b4a">return</span><span> </span><span class="token" style="color:#cdb74a">true</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">let</span><span> prev </span><span class="token" style="color:#d88b4a">=</span><span> startNode</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">prev</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">while</span><span> </span><span class="token" style="color:#e3e9f2">(</span><span>prev</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>      </span><span class="token control-flow" style="color:#d88b4a">if</span><span> </span><span class="token" style="color:#e3e9f2">(</span><span>prev </span><span class="token" style="color:#d88b4a">==</span><span> idLookingFor</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>        prev </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#cdb74a">false</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>        </span><span class="token control-flow" style="color:#d88b4a">return</span><span> </span><span class="token" style="color:#cdb74a">true</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>      </span><span class="token" style="color:#e3e9f2">}</span><span>
</span><span>      </span><span class="token" style="color:#d88b4a">const</span><span> newNode </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">nodes</span><span class="token" style="color:#e3e9f2">[</span><span>prev</span><span class="token" style="color:#e3e9f2">]</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>      prev </span><span class="token" style="color:#d88b4a">=</span><span> newNode</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">prev</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>      </span><span class="token control-flow" style="color:#d88b4a">if</span><span> </span><span class="token" style="color:#e3e9f2">(</span><span>prev </span><span class="token" style="color:#d88b4a">==</span><span> </span><span class="token" style="color:#82c366">&quot;head&quot;</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token control-flow" style="color:#d88b4a">break</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#e3e9f2">}</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">return</span><span> </span><span class="token" style="color:#cdb74a">false</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>  </span><span class="token" style="color:#e3e9f2">}</span><span>
</span><span>  </span><span class="token" style="color:#cf7ef6">isAfter</span><span class="token" style="color:#e3e9f2">(</span><span>startId</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#e3e9f2">,</span><span> idLookingFor</span><span class="token" style="color:#d88b4a">:</span><span> </span><span class="token" style="color:#ea89ea">string</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">if</span><span> </span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#d88b4a">!</span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token method" style="color:#6ab3e4">exists</span><span class="token" style="color:#e3e9f2">(</span><span>startId</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>      </span><span class="token control-flow" style="color:#d88b4a">throw</span><span> </span><span class="token" style="color:#d88b4a">new</span><span> </span><span class="token known-class-name" style="color:#6ab3e4">Error</span><span class="token" style="color:#e3e9f2">(</span><span class="token template-string template-punctuation" style="color:#82c366">`</span><span class="token template-string interpolation interpolation-punctuation" style="color:#e3e9f2">${</span><span class="token template-string interpolation">startId</span><span class="token template-string interpolation interpolation-punctuation" style="color:#e3e9f2">}</span><span class="token template-string" style="color:#82c366"> does not exist.</span><span class="token template-string template-punctuation" style="color:#82c366">`</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#e3e9f2">}</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">if</span><span> </span><span class="token" style="color:#e3e9f2">(</span><span class="token" style="color:#d88b4a">!</span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token method" style="color:#6ab3e4">exists</span><span class="token" style="color:#e3e9f2">(</span><span>idLookingFor</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>      </span><span class="token control-flow" style="color:#d88b4a">throw</span><span> </span><span class="token" style="color:#d88b4a">new</span><span> </span><span class="token known-class-name" style="color:#6ab3e4">Error</span><span class="token" style="color:#e3e9f2">(</span><span class="token template-string template-punctuation" style="color:#82c366">`</span><span class="token template-string interpolation interpolation-punctuation" style="color:#e3e9f2">${</span><span class="token template-string interpolation">idLookingFor</span><span class="token template-string interpolation interpolation-punctuation" style="color:#e3e9f2">}</span><span class="token template-string" style="color:#82c366"> does not exist.</span><span class="token template-string template-punctuation" style="color:#82c366">`</span><span class="token" style="color:#e3e9f2">)</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#e3e9f2">}</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">if</span><span> </span><span class="token" style="color:#e3e9f2">(</span><span>startId </span><span class="token" style="color:#d88b4a">==</span><span> idLookingFor</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token control-flow" style="color:#d88b4a">return</span><span> </span><span class="token" style="color:#cdb74a">true</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">const</span><span> startNode </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">nodes</span><span class="token" style="color:#e3e9f2">[</span><span>startId</span><span class="token" style="color:#e3e9f2">]</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">if</span><span> </span><span class="token" style="color:#e3e9f2">(</span><span>startNode</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">next</span><span> </span><span class="token" style="color:#d88b4a">==</span><span> idLookingFor</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token control-flow" style="color:#d88b4a">return</span><span> </span><span class="token" style="color:#cdb74a">true</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#d88b4a">let</span><span> next </span><span class="token" style="color:#d88b4a">=</span><span> startNode</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">next</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">while</span><span> </span><span class="token" style="color:#e3e9f2">(</span><span>next</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>      </span><span class="token control-flow" style="color:#d88b4a">if</span><span> </span><span class="token" style="color:#e3e9f2">(</span><span>next </span><span class="token" style="color:#d88b4a">==</span><span> idLookingFor</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token" style="color:#e3e9f2">{</span><span>
</span><span>        next </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#cdb74a">false</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>        </span><span class="token control-flow" style="color:#d88b4a">return</span><span> </span><span class="token" style="color:#cdb74a">true</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>      </span><span class="token" style="color:#e3e9f2">}</span><span>
</span><span>      </span><span class="token" style="color:#d88b4a">const</span><span> newNode </span><span class="token" style="color:#d88b4a">=</span><span> </span><span class="token" style="color:#d88b4a">this</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">nodes</span><span class="token" style="color:#e3e9f2">[</span><span>next</span><span class="token" style="color:#e3e9f2">]</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>      next </span><span class="token" style="color:#d88b4a">=</span><span> newNode</span><span class="token" style="color:#e3e9f2">.</span><span class="token" style="color:#6ab3e4">prev</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>      </span><span class="token control-flow" style="color:#d88b4a">if</span><span> </span><span class="token" style="color:#e3e9f2">(</span><span>next </span><span class="token" style="color:#d88b4a">==</span><span> </span><span class="token" style="color:#82c366">&quot;tail&quot;</span><span class="token" style="color:#e3e9f2">)</span><span> </span><span class="token control-flow" style="color:#d88b4a">break</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>    </span><span class="token" style="color:#e3e9f2">}</span><span>
</span><span>    </span><span class="token control-flow" style="color:#d88b4a">return</span><span> </span><span class="token" style="color:#cdb74a">false</span><span class="token" style="color:#e3e9f2">;</span><span>
</span><span>  </span><span class="token" style="color:#e3e9f2">}</span><span>
</span><span></span><span class="token" style="color:#e3e9f2">}</span></code></div></pre><button class="back-to-top_default-back-to-top-button__TglGC">Back To Top</button></article></main><footer class="footer_main-footer__8GXj7"><div class="footer_main-footer-content__sCsP0"><h2 class="footer_main-footer-title__R7K7k typeographery_default-text-center__2eLto">Luke Johnson</h2><h3 class="typeographery_default-h3-title__DZnVN typeographery_default-text-center__2eLto">Find Me</h3><div class="social-icon-group_social-icon-group-default-container__v5UJK social-icon-group_center-container__lqebP"><span class="social-icon-group_social-icon__WoOQW social-icon-group_twitter-icon__znuFY"><a href="https://twitter.com/DivineSoftware"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm6.066 9.645c.183 4.04-2.83 8.544-8.164 8.544-1.622 0-3.131-.476-4.402-1.291 1.524.18 3.045-.244 4.252-1.189-1.256-.023-2.317-.854-2.684-1.995.451.086.895.061 1.298-.049-1.381-.278-2.335-1.522-2.304-2.853.388.215.83.344 1.301.359-1.279-.855-1.641-2.544-.889-3.835 1.416 1.738 3.533 2.881 5.92 3.001-.419-1.796.944-3.527 2.799-3.527.825 0 1.572.349 2.096.907.654-.128 1.27-.368 1.824-.697-.215.671-.67 1.233-1.263 1.589.581-.07 1.135-.224 1.649-.453-.384.578-.87 1.084-1.433 1.489z"></path></svg></a></span><span class="social-icon-group_social-icon__WoOQW social-icon-group_youtube-icon__0aK6c"><a href="https://www.youtube.com/channel/UC6n2h7qiuEHI6oLLvod5wdg"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm4.441 16.892c-2.102.144-6.784.144-8.883 0-2.276-.156-2.541-1.27-2.558-4.892.017-3.629.285-4.736 2.558-4.892 2.099-.144 6.782-.144 8.883 0 2.277.156 2.541 1.27 2.559 4.892-.018 3.629-.285 4.736-2.559 4.892zm-6.441-7.234l4.917 2.338-4.917 2.346v-4.684z"></path></svg></a></span><span class="social-icon-group_social-icon__WoOQW undefined"><a href="https://www.linkedin.com/in/luke-damian-johnson/"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm-2 16h-2v-6h2v6zm-1-6.891c-.607 0-1.1-.496-1.1-1.109 0-.612.492-1.109 1.1-1.109s1.1.497 1.1 1.109c0 .613-.493 1.109-1.1 1.109zm8 6.891h-1.998v-2.861c0-1.881-2.002-1.722-2.002 0v2.861h-2v-6h2v1.093c.872-1.616 4-1.736 4 1.548v3.359z"></path></svg></a></span><span class="social-icon-group_social-icon__WoOQW social-icon-group_reddit-icon__xii7e"><a href="https://www.reddit.com/r/DivineStarGames/"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M14.238 15.348c.085.084.085.221 0 .306-.465.462-1.194.687-2.231.687l-.008-.002-.008.002c-1.036 0-1.766-.225-2.231-.688-.085-.084-.085-.221 0-.305.084-.084.222-.084.307 0 .379.377 1.008.561 1.924.561l.008.002.008-.002c.915 0 1.544-.184 1.924-.561.085-.084.223-.084.307 0zm-3.44-2.418c0-.507-.414-.919-.922-.919-.509 0-.923.412-.923.919 0 .506.414.918.923.918.508.001.922-.411.922-.918zm13.202-.93c0 6.627-5.373 12-12 12s-12-5.373-12-12 5.373-12 12-12 12 5.373 12 12zm-5-.129c0-.851-.695-1.543-1.55-1.543-.417 0-.795.167-1.074.435-1.056-.695-2.485-1.137-4.066-1.194l.865-2.724 2.343.549-.003.034c0 .696.569 1.262 1.268 1.262.699 0 1.267-.566 1.267-1.262s-.568-1.262-1.267-1.262c-.537 0-.994.335-1.179.804l-2.525-.592c-.11-.027-.223.037-.257.145l-.965 3.038c-1.656.02-3.155.466-4.258 1.181-.277-.255-.644-.415-1.05-.415-.854.001-1.549.693-1.549 1.544 0 .566.311 1.056.768 1.325-.03.164-.05.331-.05.5 0 2.281 2.805 4.137 6.253 4.137s6.253-1.856 6.253-4.137c0-.16-.017-.317-.044-.472.486-.261.82-.766.82-1.353zm-4.872.141c-.509 0-.922.412-.922.919 0 .506.414.918.922.918s.922-.412.922-.918c0-.507-.413-.919-.922-.919z"></path></svg></a></span></div><h3 class="typeographery_default-h3-title__DZnVN typeographery_default-text-center__2eLto">Contact Me</h3><p class="typeographery_default-span__Rq_Yg typeographery_default-text-center__2eLto">Email:<a href="mailto:ldjohnso@mtu.edu">ldjohnso@mtu.edu</a></p><p class="footer_copyright-notice__r3E3f">©️ 2022, All rights reserved.</p><p class="footer_copyright-notice__r3E3f">All content is created by Lucas Johnson. Any content that is not is linked with attritubutes.</p></div></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"data":{"title":"Using A Doubly Linked List In JavaScript","description":"Use case for a doubly-linked list in JavaScript.","date":"2021-11-10","banner":" { \"src\" : \"/images/blog/nodedisplay.jpg\", \"alt\":\"sup\" } ","id":"use-for-doubly-linked-list-in-javascript"},"content":"\r\nWhen I was a computer science student my two favorite classes were databases and data structures. Since starting my professional work as a web programmer I have not found my use cases for the data structures I learned in college until recently. So, today I want to talk about the data structure known as a Doubly Linked List and show you a use case for it that I have recently found.\r\n\r\nI will not go into the heavy implementation details of setting up a Doubly Linked List in JavaScript. However, I do have a TypeScript class and interface available for you to look at it if you want to see the full implementation details. It however is a Doubly Linked List mixed with a Map. I call it a Doubly Linked ID List.\r\n\r\n# What is a Doubly Linked List?\r\n\r\nWe can conceive a doubly-linked list in JavaScript to be an array or map of objects that have a reference to the object that is before and after. In that way, it preserver’s its order.\r\n\r\nNow in the example class, I provided the before and after references are actually ids used in the map of objects. I do not use a direct reference for the object. Either way, it will work the same but I will get into that more later.\r\n\r\n# What is it good for?\r\n\r\nA doubly linked list excels at a couple of things. Number one would be the time complexity of inserting and taking things out of it. With a normal array if you want to add something to the front you have to move that entire array forward. With a doubly-linked list, you just change the references to the before and after objects for the objects that you want to insert in-between. Here you see the time complexity compared:\r\n\r\n\r\n| Data Structures       | Insert | Insert | Insert | Insert |\r\n| :-------------------- | :----: | :----: | :----: | :----: |\r\n| Doubly Linked ID List |  O(1)  |  O(1)  |  O(1)  |  O(n)  |\r\n| Doubly Linked List    |  O(1)  |  O(1)  |  O(n)  |  O(n)  |\r\n| Normal Array          |  O(n)  |  O(n)  |  O(1)  |  O(n)  |\r\n\r\n\r\nNow if you are dealing with small data sets a doubly linked list may be a bit much. But if you are dealing with thousands or millions of objects then it becomes indicative to come up with a solution that is fast especially if you have to do a lot of inserting and deleting.\r\n\r\n# Real Example Use Case\r\n\r\nSo, I am currently developing a level creator program using TypeScript, Babylon.Js, and Electron. It allows you to place thousands upon thousands of models in a single scene and have the ability to edit each individually and in a group. On the left-hand display of the window, there is a display with all the nodes in the scene. The user can scroll through all the nodes, edit them, delete them, and drag n’ drop them to new locations and inside groups.\r\n\r\nWell, in this case, if we used a normal array and the user had something like 10,000 models in the scene we would have to move all other 9,999 models in the array to match the new arrangement. But with a doubly-linked list, it becomes extremely fast. We just have to remove the object from the current list by changing its before and after references as well it’s surrounding objects and then either discard it or put it in another part of the list by once again changing its new surrounding objects before and after references as well as it’s own. So, It’s about 8 operations instead of 9k.\r\n\r\n# Conclusion\r\n\r\nYour app may benefit from using a doubly-linked list or some variant of it if you are doing a bunch of inserting and deleting on an array and need to preserve its order. They are easy to implement in JavaScript and can be expanded with more helpful functions such as my example class shows. They are not the solution for everything but for very specific things they are amazing.\r\n\r\n## Full Doubly Linked ID List Implementation\r\n\r\n```ts\r\nexport type DoubleLinkedIDListNode\u003cT\u003e = {\r\n  data: T | false;\r\n  prev: string | false;\r\n  next: string | false;\r\n};\r\n\r\nexport type DoubleLinkedIDListNodes\u003cT\u003e = Record\u003c\r\n  string,\r\n  DoubleLinkedIDListNode\u003cT\u003e\r\n\u003e;\r\n\r\nexport type DoubleLinkedIDConstructor\u003cT\u003e =\r\n  new () =\u003e DoubleLinkedIDListInterface\u003cT\u003e;\r\n  \r\nexport interface DoubleLinkedIDListInterface\u003cT\u003e {\r\n  size: number;\r\n  nodes: DoubleLinkedIDListNodes\u003cT\u003e;\r\n\r\n  keys(): string[];\r\n  moveNodeBeforeOther(staticNodeId: string, nodeMovingId: string): void;\r\n  moveNodeAfterOther(staticNodeId: string, nodeMovingId: string): void;\r\n  append(id: string): void;\r\n  prepend(id: string): void;\r\n  insertBefore(insertAtId: string, id: string, Data: T): void;\r\n  insertAfter(insertAtId: string, id: string, Data: T): void;\r\n  appendNew(id: string, Data: T): void;\r\n  prependNew(id: string, Data: T): void;\r\n  pop(id: string): DoubleLinkedIDListNode\u003cT\u003e;\r\n  remove(id: string): void;\r\n  removeAll(): void;\r\n\r\n  getValue(id: string): T | false;\r\n  setValue(id: string, data: T): void;\r\n\r\n  traverseWithFuncForward(func: (key: string, data: T) =\u003e any): void;\r\n  traverseWithFuncBackward(func: (key: string, data: T) =\u003e any): void;\r\n  traverseIDsForward(): IteratorResult\u003cstring\u003e;\r\n  traverseValuesForward(): IteratorResult\u003cT | false\u003e;\r\n  traverseKeyValuesForward(): IteratorResult\u003c{ key: string; value: T | false }\u003e;\r\n  traverseIDsBackward(): IteratorResult\u003cstring\u003e;\r\n  traverseValuesBackward(): IteratorResult\u003cT | false\u003e;\r\n  traverseKeyValuesBackward(): IteratorResult\u003c{\r\n    key: string;\r\n    value: T | false;\r\n  }\u003e;\r\n\r\n  getNextKVP(id: string): { key: string; value: T | false } | false;\r\n  getPrevKVP(id: string): { key: string; value: T | false } | false;\r\n  getNextID(id: string): string | false;\r\n  getPrevID(id: string): string | false;\r\n\r\n  resetTraverse(): void;\r\n  exists(id: string): boolean;\r\n  getKVP(id: string): { key: string; value: T | false } | false;\r\n  getFirstID(): string;\r\n  getLastID(): string;\r\n\r\n  isBefore(startId: string, idLookingFor: string): boolean;\r\n  isAfter(startId: string, idLookingFor: string): boolean;\r\n}\r\n\r\nexport class DounleLinkedIDList\u003cT\u003e implements DoubleLinkedIDListInterface\u003cT\u003e {\r\n  size: number = 0;\r\n  head: DoubleLinkedIDListNode\u003cT\u003e;\r\n  tail: DoubleLinkedIDListNode\u003cT\u003e;\r\n  nodes: DoubleLinkedIDListNodes\u003cT\u003e = {};\r\n\r\n  currentNodeID: string;\r\n  _currentIteratorFowardData: T | false;\r\n  _currentIteratorBackwardData: T | false;\r\n  _currentIteratorForwardId = \"head\";\r\n  _currentIteratorBackwardId = \"tail\";\r\n\r\n  constructor() {\r\n    this.head = {\r\n      data: false,\r\n      next: \"tail\",\r\n      prev: false,\r\n    };\r\n    this.tail = {\r\n      data: false,\r\n      next: false,\r\n      prev: \"head\",\r\n    };\r\n    this.nodes[\"head\"] = this.head;\r\n    this.nodes[\"tail\"] = this.tail;\r\n  }\r\n\r\n  keys() {\r\n    const keys = Object.keys(this.nodes);\r\n    const headIndex = keys.indexOf(\"head\");\r\n    keys.splice(headIndex, 1);\r\n    const tailIndex = keys.indexOf(\"tail\");\r\n    keys.splice(tailIndex, 1);\r\n    return keys;\r\n  }\r\n\r\n  getFirstID() {\r\n    if (this.head.next == \"tail\") return \"\";\r\n    return \u003cstring\u003ethis.head.next;\r\n  }\r\n\r\n  getLastID() {\r\n    if (this.tail.prev == \"head\") return \"\";\r\n    return \u003cstring\u003ethis.tail.prev;\r\n  }\r\n\r\n  insertBefore(insertAtId: string, id: string, Data: T) {\r\n    if (!this.exists(insertAtId)) {\r\n      throw new Error(`${insertAtId} does not exist.`);\r\n    }\r\n    if (this.exists(id)) {\r\n      throw new Error(`${id} already exist.`);\r\n    }\r\n    const insertBeforerNode = this.nodes[insertAtId];\r\n    if (!insertBeforerNode.prev) return;\r\n    const beforeNodeID = insertBeforerNode.prev;\r\n    const beforeNode = this.nodes[beforeNodeID];\r\n    const newNode: DoubleLinkedIDListNode\u003cT\u003e = {\r\n      data: Data,\r\n      prev: beforeNodeID,\r\n      next: insertAtId,\r\n    };\r\n    beforeNode.next = id;\r\n    insertBeforerNode.prev = id;\r\n    this.nodes[id] = newNode;\r\n    this.size++;\r\n  }\r\n    \r\n  insertAfter(insertAtId: string, id: string, Data: T) {\r\n    if (!this.exists(insertAtId)) {\r\n      throw new Error(`${insertAtId} does not exist.`);\r\n    }\r\n    if (this.exists(id)) {\r\n      throw new Error(`${id} already exist.`);\r\n    }\r\n    const insertAfterNode = this.nodes[insertAtId];\r\n    if (!insertAfterNode.next) return;\r\n    const nextNodeID = insertAfterNode.next;\r\n    const nextNode = this.nodes[nextNodeID];\r\n    const newNode: DoubleLinkedIDListNode\u003cT\u003e = {\r\n      data: Data,\r\n      prev: insertAtId,\r\n      next: nextNodeID,\r\n    };\r\n    nextNode.prev = id;\r\n    insertAfterNode.next = id;\r\n    this.nodes[id] = newNode;\r\n    this.size++;\r\n    return this.nodes[id];\r\n  }\r\n\r\n  moveNodeBeforeOther(staticNodeId: string, nodeMovingId: string) {\r\n    if (!this.exists(staticNodeId)) {\r\n      throw new Error(`${staticNodeId} does not exist.`);\r\n    }\r\n    if (!this.exists(nodeMovingId)) {\r\n      throw new Error(`${nodeMovingId} does not exist.`);\r\n    }\r\n    const insertBeforerNode = this.nodes[staticNodeId];\r\n    if (!insertBeforerNode.prev) return;\r\n    const beforeNodeID = insertBeforerNode.prev;\r\n    const beforeNode = this.nodes[beforeNodeID];\r\n\r\n    const nodeMoving = this.pop(nodeMovingId);\r\n\r\n    beforeNode.next = nodeMovingId;\r\n\r\n    nodeMoving.prev = beforeNodeID;\r\n    nodeMoving.next = staticNodeId;\r\n\r\n    insertBeforerNode.prev = nodeMovingId;\r\n  }\r\n  moveNodeAfterOther(staticNodeId: string, nodeMovingId: string) {\r\n    if (!this.exists(staticNodeId)) {\r\n      throw new Error(`${staticNodeId} does not exist.`);\r\n    }\r\n    if (!this.exists(nodeMovingId)) {\r\n      throw new Error(`${nodeMovingId} does not exist.`);\r\n    }\r\n    const insertAfterNode = this.nodes[staticNodeId];\r\n    if (!insertAfterNode.next) return;\r\n    const afterNodeID = insertAfterNode.next;\r\n    const afterNode = this.nodes[afterNodeID];\r\n\r\n    const nodeMoving = this.pop(nodeMovingId);\r\n    insertAfterNode.next = nodeMovingId;\r\n    nodeMoving.prev = staticNodeId;\r\n    nodeMoving.next = afterNodeID;\r\n    afterNode.prev = nodeMovingId;\r\n  }\r\n  pop(id: string): DoubleLinkedIDListNode\u003cT\u003e {\r\n    if (!this.exists(id)) {\r\n      throw new Error(`${id} does not exist.`);\r\n    }\r\n    const nodeMoving = this.nodes[id];\r\n    const nodeMovingBeforeId = nodeMoving.prev;\r\n    const nodeMovingAfterId = nodeMoving.next;\r\n    if (!nodeMovingBeforeId \u0026\u0026 !nodeMovingAfterId) {\r\n      return nodeMoving;\r\n    }\r\n    const nodeMovingBefore = this.nodes[\u003cstring\u003enodeMovingBeforeId];\r\n    const nodeMovingAfter = this.nodes[\u003cstring\u003enodeMovingAfterId];\r\n    nodeMovingBefore.next = nodeMovingAfterId;\r\n    nodeMovingAfter.prev = nodeMovingBeforeId;\r\n    return nodeMoving;\r\n  }\r\n  remove(id: string): void {\r\n    if (!this.exists(id)) {\r\n      throw new Error(`${id} does not exist.`);\r\n    }\r\n    this.pop(id);\r\n    //@ts-ignore\r\n    this.nodes[id] = undefined;\r\n    delete this.nodes[id];\r\n    this.size--;\r\n  }\r\n  removeAll() {\r\n    //@ts-ignore\r\n    this.nodes = undefined;\r\n    this.nodes = {};\r\n    this.size = 0;\r\n    this.head.next = \"tail\";\r\n    this.tail.prev = \"head\";\r\n    this._currentIteratorBackwardData = false;\r\n    this._currentIteratorFowardData = false;\r\n    this._currentIteratorForwardId = \"head\";\r\n    this._currentIteratorBackwardId = \"tail\";\r\n  }\r\n\r\n  append(id: string) {\r\n    if (!this.exists(id)) {\r\n      throw new Error(`${id} does not exist.`);\r\n    }\r\n    if (!this.tail.prev) return;\r\n    if (this.tail.prev == \"head\") {\r\n      this.head.next = id;\r\n    }\r\n    const prevNodeId = this.tail.prev;\r\n    const prevNode = this.nodes[prevNodeId];\r\n    prevNode.next = id;\r\n    this.tail.prev = id;\r\n    const movingNode = this.pop(id);\r\n    movingNode.prev = prevNodeId;\r\n    movingNode.next = \"tail\";\r\n  }\r\n  prepend(id: string) {\r\n    if (!this.exists(id)) {\r\n      throw new Error(`${id} does not exist.`);\r\n    }\r\n    if (!this.head.next) return;\r\n    if (this.head.next == \"tail\") {\r\n      this.tail.prev = id;\r\n    }\r\n    const nextNodeId = this.head.next;\r\n    const nextNode = this.nodes[nextNodeId];\r\n    nextNode.prev = id;\r\n    this.head.next = id;\r\n    const movingNode = this.pop(id);\r\n    movingNode.prev = \"head\";\r\n    movingNode.next = nextNodeId;\r\n  }\r\n\r\n  appendNew(id: string, Data: T) {\r\n    if (this.exists(id)) {\r\n      throw new Error(`${id} already exist.`);\r\n    }\r\n    if (!this.tail.prev) return;\r\n    if (this.tail.prev == \"head\") {\r\n      this.head.next = id;\r\n    }\r\n\r\n    const bottomNodeId = this.tail.prev;\r\n    const newNode: DoubleLinkedIDListNode\u003cT\u003e = {\r\n      data: Data,\r\n      prev: bottomNodeId,\r\n      next: \"tail\",\r\n    };\r\n    this.nodes[id] = newNode;\r\n    this.nodes[bottomNodeId].next = id;\r\n    this.tail.prev = id;\r\n    this.size++;\r\n  }\r\n  prependNew(id: string, Data: T) {\r\n    if (this.exists(id)) {\r\n      throw new Error(`${id} already exist.`);\r\n    }\r\n    if (!this.head.next) return;\r\n    if (this.head.next == \"tail\") {\r\n      this.tail.prev = id;\r\n    }\r\n    const topNodeId = this.head.next;\r\n    const newNode: DoubleLinkedIDListNode\u003cT\u003e = {\r\n      data: Data,\r\n      prev: \"head\",\r\n      next: topNodeId,\r\n    };\r\n    this.nodes[id] = newNode;\r\n    this.nodes[topNodeId].prev = id;\r\n    this.head.next = id;\r\n    this.size++;\r\n  }\r\n\r\n  getValue(id: string) {\r\n    if (!this.exists(id)) {\r\n      throw new Error(`${id} does not exist.`);\r\n    }\r\n    return this.nodes[id].data;\r\n  }\r\n  setValue(id: string, data: T) {\r\n    if (!this.exists(id)) {\r\n      throw new Error(`${id} does not exist.`);\r\n    }\r\n    this.nodes[id].data = data;\r\n  }\r\n\r\n  traverseWithFuncForward(func: (key: string, data: T) =\u003e any) {\r\n    let data: IteratorResult\u003c{ key: string; value: T | false }\u003e;\r\n    data = this.traverseKeyValuesForward();\r\n    while (!data.done) {\r\n      func(data.value.key, \u003cT\u003edata.value.value);\r\n\r\n      data = this.traverseKeyValuesForward();\r\n    }\r\n  }\r\n\r\n  traverseWithFuncBackward(func: (key: string, data: T) =\u003e any) {\r\n    let data: IteratorResult\u003c{ key: string; value: T | false }\u003e;\r\n    data = this.traverseKeyValuesBackward();\r\n    while (!data.done) {\r\n      func(data.value.key, \u003cT\u003edata.value.value);\r\n\r\n      data = this.traverseKeyValuesForward();\r\n    }\r\n  }\r\n\r\n  resetTraverse() {\r\n    this._currentIteratorForwardId = \"head\";\r\n    this._currentIteratorBackwardId = \"tail\";\r\n  }\r\n\r\n  traverseIDsForward(): IteratorResult\u003cstring\u003e {\r\n    let done = false;\r\n    if (this.nodes[this._currentIteratorForwardId].next == \"tail\") {\r\n      done = true;\r\n      this._currentIteratorForwardId = \"head\";\r\n    } else {\r\n      this._currentIteratorForwardId = \u003cstring\u003e(\r\n        this.nodes[this._currentIteratorForwardId].next\r\n      );\r\n      this._currentIteratorFowardData =\r\n        this.nodes[this._currentIteratorForwardId].data;\r\n    }\r\n    return {\r\n      done: done,\r\n      value: this._currentIteratorForwardId,\r\n    };\r\n  }\r\n  traverseValuesForward(): IteratorResult\u003cT | false\u003e {\r\n    let done = false;\r\n    if (this.nodes[this._currentIteratorForwardId].next == \"tail\") {\r\n      done = true;\r\n      this._currentIteratorForwardId = \"head\";\r\n    } else {\r\n      this._currentIteratorForwardId = \u003cstring\u003e(\r\n        this.nodes[this._currentIteratorForwardId].next\r\n      );\r\n      this._currentIteratorFowardData =\r\n        this.nodes[this._currentIteratorForwardId].data;\r\n    }\r\n    return {\r\n      done: done,\r\n      value: this._currentIteratorFowardData,\r\n    };\r\n  }\r\n  traverseKeyValuesForward(): IteratorResult\u003c{\r\n    key: string;\r\n    value: T | false;\r\n  }\u003e {\r\n    let done = false;\r\n    if (this.nodes[this._currentIteratorForwardId].next == \"tail\") {\r\n      done = true;\r\n      this._currentIteratorForwardId = \"head\";\r\n    } else {\r\n      this._currentIteratorForwardId = \u003cstring\u003e(\r\n        this.nodes[this._currentIteratorForwardId].next\r\n      );\r\n      this._currentIteratorFowardData =\r\n        this.nodes[this._currentIteratorForwardId].data;\r\n    }\r\n    return {\r\n      done: done,\r\n      value: {\r\n        key: this._currentIteratorForwardId,\r\n        value: this._currentIteratorFowardData,\r\n      },\r\n    };\r\n  }\r\n\r\n  traverseIDsBackward(): IteratorResult\u003cstring\u003e {\r\n    let done = false;\r\n    if (this.nodes[this._currentIteratorBackwardId].prev == \"head\") {\r\n      done = true;\r\n      this._currentIteratorBackwardId = \"tail\";\r\n    } else {\r\n      this._currentIteratorBackwardId = \u003cstring\u003e(\r\n        this.nodes[this._currentIteratorBackwardId].prev\r\n      );\r\n    }\r\n    return {\r\n      done: done,\r\n      value: this._currentIteratorBackwardId,\r\n    };\r\n  }\r\n  traverseValuesBackward(): IteratorResult\u003cT | false\u003e {\r\n    let done = false;\r\n    if (this.nodes[this._currentIteratorBackwardId].prev == \"head\") {\r\n      done = true;\r\n      this._currentIteratorBackwardId = \"tail\";\r\n    } else {\r\n      this._currentIteratorBackwardId = \u003cstring\u003e(\r\n        this.nodes[this._currentIteratorBackwardId].prev\r\n      );\r\n      this._currentIteratorBackwardData =\r\n        this.nodes[this._currentIteratorBackwardId].data;\r\n    }\r\n    return {\r\n      done: done,\r\n      value: this._currentIteratorBackwardData,\r\n    };\r\n  }\r\n  traverseKeyValuesBackward(): IteratorResult\u003c{\r\n    key: string;\r\n    value: T | false;\r\n  }\u003e {\r\n    let done = false;\r\n    if (this.nodes[this._currentIteratorBackwardId].prev == \"head\") {\r\n      done = true;\r\n      this._currentIteratorBackwardId = \"tail\";\r\n    } else {\r\n      this._currentIteratorBackwardId = \u003cstring\u003e(\r\n        this.nodes[this._currentIteratorBackwardId].prev\r\n      );\r\n      this._currentIteratorBackwardData =\r\n        this.nodes[this._currentIteratorBackwardId].data;\r\n    }\r\n    return {\r\n      done: done,\r\n      value: {\r\n        key: this._currentIteratorBackwardId,\r\n        value: this._currentIteratorBackwardData,\r\n      },\r\n    };\r\n  }\r\n\r\n  exists(id: string) {\r\n    if (this.nodes[id] === undefined) {\r\n      return false;\r\n    } else {\r\n      return true;\r\n    }\r\n  }\r\n\r\n  getKVP(id: string): { key: string; value: T | false } | false {\r\n    if (!this.exists(id)) {\r\n      throw new Error(`${id} does not exist.`);\r\n    }\r\n    const node = this.nodes[id];\r\n    if (!node) {\r\n      return false;\r\n    }\r\n    return { key: id, value: node.data };\r\n  }\r\n\r\n  getNextKVP(id: string): { key: string; value: T | false } | false {\r\n    if (!this.exists(id)) {\r\n      throw new Error(`${id} does not exist.`);\r\n    }\r\n    if (!this.nodes[id]) {\r\n      throw new Error(`${id} does not exist`);\r\n    }\r\n    const node = this.nodes[id];\r\n    if (!node.next || node.next == \"tail\") return false;\r\n    const nextNode = this.nodes[node.next];\r\n    return { key: node.next, value: nextNode.data };\r\n  }\r\n\r\n  getPrevKVP(id: string): { key: string; value: T | false } | false {\r\n    if (!this.exists(id)) {\r\n      throw new Error(`${id} does not exist.`);\r\n    }\r\n    const node = this.nodes[id];\r\n    if (!node.prev || node.prev == \"head\") return false;\r\n    const nextNode = this.nodes[node.prev];\r\n    return { key: node.prev, value: nextNode.data };\r\n  }\r\n\r\n  getNextID(id: string): string | false {\r\n    if (!this.exists(id)) {\r\n      throw new Error(`${id} does not exist.`);\r\n    }\r\n    const node = this.nodes[id];\r\n    if (!node.next || node.next == \"tail\") return false;\r\n    return node.next;\r\n  }\r\n  getPrevID(id: string): string | false {\r\n    if (!this.exists(id)) {\r\n      throw new Error(`${id} does not exist.`);\r\n    }\r\n    const node = this.nodes[id];\r\n    if (!node.prev || node.prev == \"head\") return false;\r\n    return node.prev;\r\n  }\r\n\r\n  isBefore(startId: string, idLookingFor: string) {\r\n    if (!this.exists(startId)) {\r\n      throw new Error(`${startId} does not exist.`);\r\n    }\r\n    if (!this.exists(idLookingFor)) {\r\n      throw new Error(`${idLookingFor} does not exist.`);\r\n    }\r\n    if (startId == idLookingFor) return true;\r\n    const startNode = this.nodes[startId];\r\n    if (startNode.prev == idLookingFor) return true;\r\n    let prev = startNode.prev;\r\n    while (prev) {\r\n      if (prev == idLookingFor) {\r\n        prev = false;\r\n        return true;\r\n      }\r\n      const newNode = this.nodes[prev];\r\n      prev = newNode.prev;\r\n      if (prev == \"head\") break;\r\n    }\r\n    return false;\r\n  }\r\n  isAfter(startId: string, idLookingFor: string) {\r\n    if (!this.exists(startId)) {\r\n      throw new Error(`${startId} does not exist.`);\r\n    }\r\n    if (!this.exists(idLookingFor)) {\r\n      throw new Error(`${idLookingFor} does not exist.`);\r\n    }\r\n    if (startId == idLookingFor) return true;\r\n    const startNode = this.nodes[startId];\r\n    if (startNode.next == idLookingFor) return true;\r\n    let next = startNode.next;\r\n    while (next) {\r\n      if (next == idLookingFor) {\r\n        next = false;\r\n        return true;\r\n      }\r\n      const newNode = this.nodes[next];\r\n      next = newNode.prev;\r\n      if (next == \"tail\") break;\r\n    }\r\n    return false;\r\n  }\r\n}\r\n```\r\n","id":"use-for-doubly-linked-list-in-javascript"},"__N_SSG":true},"page":"/blog/posts/[id]","query":{"id":"use-for-doubly-linked-list-in-javascript"},"buildId":"6XrfhkUDyIAapFpO446u6","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>