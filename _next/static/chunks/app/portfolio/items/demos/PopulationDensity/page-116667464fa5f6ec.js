(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6195],{73752:function(){},13640:function(){},78455:function(e,t,n){Promise.resolve().then(n.bind(n,81523)),Promise.resolve().then(n.bind(n,70049)),Promise.resolve().then(n.bind(n,13042)),Promise.resolve().then(n.t.bind(n,89078,23)),Promise.resolve().then(n.t.bind(n,20123,23))},13042:function(e,t,n){"use strict";n.r(t);var i=n(57437),o=n(2265),r=n(79290),a=n(31471),s=n(37954),l=n(56503);t.default=()=>{let e=(0,o.useRef)(null);(0,o.useEffect)(()=>{let i,o,a,d,u;i=new r.Scene;let w=new r.CubeTextureLoader().load(["/assets/PopulationDensity/px.jpg","/assets/PopulationDensity/nx.jpg","/assets/PopulationDensity/py.jpg","/assets/PopulationDensity/ny.jpg","/assets/PopulationDensity/pz.jpg","/assets/PopulationDensity/nz.jpg"]);if(i.background=w,(o=new r.PerspectiveCamera(45,window.innerWidth/window.innerHeight,.1,1e3)).position.z=300,e.current){(a=new r.WebGLRenderer({canvas:e.current,antialias:!0})).setSize(window.innerWidth,window.innerHeight),(u=new s.z(o,a.domElement)).enableDamping=!0,u.dampingFactor=.05,u.minDistance=100,u.maxDistance=500;let w=new r.AmbientLight(16777215,.5);i.add(w);let p=new r.DirectionalLight(16777215,.5);p.position.set(5,10,7.5),i.add(p);let h=new l.xC(a),g=new l.CD(i,o);h.addPass(g);let m=new l.gh(i,o);h.addPass(m);let f=new l.bn(o,m.texture,{blendFunction:l.YQ.MULTIPLY,samples:21,rings:4,distanceThreshold:.1,distanceFalloff:.02,rangeThreshold:.5,rangeFalloff:.1,luminanceInfluence:.7,radius:20,intensity:15,bias:.05}),v=new l.H5(o,f);function c(){let e=window.innerWidth,t=window.innerHeight;o.aspect=e/t,o.updateProjectionMatrix(),a.setSize(e,t),h.setSize(e,t)}v.renderToScreen=!0,h.addPass(v),window.addEventListener("resize",c,!1);let b=new r.TextureLoader().load("/assets/PopulationDensity/bluemarble.jpg"),y=new r.SphereGeometry(50,192,192),P=new r.ShaderMaterial({vertexShader:"\n          varying vec4 vColor;\n          void main() {\n            vColor = color;\n            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n          }\n        ",fragmentShader:"\n          varying vec4 vColor;\n          void main() {\n            gl_FragColor = vColor;\n          }\n        ",transparent:!0,side:r.DoubleSide,vertexColors:!0}),D=new r.SphereGeometry(50,64,64),C=new r.MeshPhongMaterial({map:b,shininess:100,wireframe:!1});d=new r.Mesh(y,P);let x=new r.Mesh(D,C);i.add(d),i.add(x),(async()=>{let e=await t();await n(y,e),y.computeVertexNormals()})();let M=()=>{requestAnimationFrame(M),u.update(),h.render()};return M(),()=>{window.removeEventListener("resize",c),a.dispose(),u.dispose(),i.remove(d),i.remove(x),y.dispose(),P.dispose(),D.dispose(),C.dispose()}}},[]);let t=async()=>{let e=await (0,a.W0)("/assets/PopulationDensity/data.tif"),t=await e.getImage();return{rasterData:await t.readRasters({interleave:!0}),width:t.getWidth(),height:t.getHeight(),noDataValue:t.getGDALNoData()}},n=async(e,t)=>{let n=e.attributes.position,i=e.attributes.uv,o=new Float32Array(4*n.count),{rasterData:a,width:s,height:l,noDataValue:d}=t,u=new r.Color(15),w=new r.Color(65520),c=-1/0;for(let e=0;e<n.count;e++){let t=new r.Vector3;t.fromBufferAttribute(n,e);let p=i.getX(e),h=i.getY(e),g=Math.floor(p*(s-1)),m=Math.floor((1-h)*(l-1));if(g<0||g>=s||m<0||m>=l)continue;let f=a[m*s+g];f>c&&(c=f),(f===d||void 0===f)&&(f=0);let v=Math.min(f/17447*10,1);t.multiplyScalar(1+v),n.setXYZ(e,t.x,t.y,t.z);let b=f/17447*10;new r.Color().lerpColors(u,w,b),o[4*e]=w.r*b,o[4*e+1]=w.g*(1-b),o[4*e+2]=w.b*b,o[4*e+3]=b>.01?b+.5:0}console.error(c),e.setAttribute("color",new r.BufferAttribute(o,4)),n.needsUpdate=!0,e.attributes.color.needsUpdate=!0};return(0,i.jsx)("canvas",{ref:e})}},89078:function(){},20123:function(){}},function(e){e.O(0,[8281,5889,225,7455,154,536,1471,2971,2117,1744],function(){return e(e.s=78455)}),_N_E=e.O()}]);