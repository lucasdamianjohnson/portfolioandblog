(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[975],{68205:function(e,t,n){Promise.resolve().then(n.bind(n,81523)),Promise.resolve().then(n.bind(n,70049)),Promise.resolve().then(n.bind(n,8015)),Promise.resolve().then(n.t.bind(n,63124,23)),Promise.resolve().then(n.t.bind(n,20123,23))},8015:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return en}});var r,o,i=n(57437),a=n(2265),l=n(39664),s=n(89674),c=n(77805),u=n(88318),d=n(26961),m=n(79290),h=n(60599);let f=(0,h.g)({uTime:0,uColor:new m.Color(43775),uIntensity:1},"\n    uniform float uTime;\n    varying vec2 vUv;\n    varying float vDistorted;\n\n    void main() {\n      vUv = uv;\n      \n      // Calculate angle and radius\n      float angle = atan(position.y, position.x);\n      float radius = length(position.xy);\n      \n      // Add multiple wave distortions\n      float distortion = sin(10.0 * angle + uTime * 5.0) * 0.04;\n      distortion += sin(20.0 * angle + uTime * 10.0) * 0.2;\n      \n      vDistorted = distortion;\n      \n      vec3 pos = position + vec3(normal * distortion);\n      gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);\n    }\n  ","\n    uniform float uTime;\n    uniform vec3 uColor;\n    uniform float uIntensity;\n    varying vec2 vUv;\n    varying float vDistorted;\n\n\n\n    void main() {\n \n\n     \n      gl_FragColor = vec4(uColor, 1.0);\n    }\n  ");(0,l.e)({ElectricShaderMaterial:f});let p=new f,v=e=>{console.warn("ring mounted");let t=(0,a.useRef)(null),n=(0,a.useRef)(),{clock:r}=(0,l.D)();return(0,l.F)(()=>{let o=r.getElapsedTime();n.current&&(n.current.uTime=o),t.current&&(t.current.scale.x+=.05,t.current.scale.y+=.05,t.current.scale.z+=.05,t.current.scale.x>10&&e.die())}),(0,i.jsx)("group",{ref:t,renderOrder:-1,children:(0,i.jsxs)("mesh",{children:[(0,i.jsx)("ringGeometry",{args:[.6,.65,64,8,0,2*Math.PI]}),(0,i.jsx)("primitive",{object:p})]})})};var g=n(50270),y=n(85611);let M=new m.MeshStandardMaterial,w=new m.Shape,x=2*Math.PI/8;for(let e=0;e<8;e++){let t=e*x,n=10*Math.cos(t),r=10*Math.sin(t),o=4*Math.cos(t+x/2),i=4*Math.sin(t+x/2);0===e?w.moveTo(.015*n,.015*r):w.lineTo(.015*n,.015*r),w.lineTo(.015*o,.015*i)}w.closePath();let j=new m.ShapeGeometry(w),C=e=>{let t=(0,a.useRef)(null),{clock:n}=(0,l.D)(),r=(0,a.useRef)(Array.from({length:20},()=>{let e=2*Math.random()*Math.PI,t=Math.random()*Math.PI,n=new m.Vector3(Math.sin(t)*Math.cos(e),Math.sin(t)*Math.sin(e),Math.cos(t)).normalize();n.z=0,n.normalize();let r=6*m.MathUtils.lerp(.8,1.2,Math.random());return{position:new m.Vector3(0,0,0),direction:n,velocity:n.clone().multiplyScalar(r),age:0,lifetime:m.MathUtils.lerp(1.6,2,Math.random()),object:new m.Object3D,color:new m.Color(Math.random(),Math.random(),Math.random())}}));return(0,a.useEffect)(()=>{r.current.forEach(e=>{var n;let r=new m.Mesh(j,M);e.object.add(r),null===(n=t.current)||void 0===n||n.add(e.object)})},[j]),(0,l.F)((t,n)=>{let o=!0;r.current.forEach(e=>{if(e.age<e.lifetime){o=!1,e.position.add(e.velocity.clone().multiplyScalar(n)),e.object.position.copy(e.position);let t=e.age/e.lifetime,r=m.MathUtils.lerp(1,5,t);e.object.scale.set(r,r,r),e.age+=n}}),o&&e.die()}),(0,i.jsx)("group",{ref:t,renderOrder:-1})},b=(0,h.g)({uTime:0,uColor:new m.Color(43775),uIntensity:1},"\n    uniform float uTime;\n    varying vec2 vUv;\n    varying float vDistorted;\n\n    void main() {\n      vUv = uv;\n      \n      // Calculate angle and radius\n      float angle = atan(position.y, position.x);\n      float radius = length(position.xy);\n      \n      // Add multiple wave distortions\n      float distortion = sin(10.0 * angle + uTime * 5.0) * 0.04;\n      distortion += sin(20.0 * angle + uTime * 10.0) * 3.;\n      \n      vDistorted = distortion;\n      \n      vec3 pos = position + vec3(normal * distortion);\n      gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);\n    }\n  ","\n    uniform float uTime;\n    uniform vec3 uColor;\n    uniform float uIntensity;\n    varying vec2 vUv;\n    varying float vDistorted;\n\n\n\n    void main() {\n         float gridX = abs(fract(vUv.x * 300.0 - 0.5) - 0.5) / fwidth(vUv.x * 300.0);\n        float gridY = abs(fract(vUv.y * 300.0 - 0.5) - 0.5) / fwidth(vUv.y * 300.0);\n        float grid = min(gridX, gridY);\n\n        // Create a glowing effect with pulsating intensity\n        float glow = pow(grid, 1.) * (0.5 + 0.5 * 0.01); // The 0.01 can be adjusted or animated\n\n        // Combine base color with glow\n        vec3 finalColor;\n        if(glow > 0.4) {\n          finalColor = vec3(0.0, 0.0, 0.0);\n        } else {\n          finalColor = uColor; // Magenta color\n        }\n\n        // Compute exponential fog factor\n      //  float fogFactor = 1.0 - exp(-fogDensity * vDistance);\n      //  fogFactor = clamp(fogFactor, 0.0, 1.0);\n\n        // Mix the grid color with the fog color based on the fog factor\n     //   finalColor = mix(finalColor, fogColor, fogFactor);\n\n     //   gl_FragColor = vec4(finalColor, 1.0);\n\n     \n      gl_FragColor = vec4(finalColor,1.);\n    }\n  ");(0,l.e)({ElectricShaderMaterial:b});let T=new b,I=e=>{console.warn("wave mounted");let t=(0,a.useRef)(null),n=(0,a.useRef)(),{clock:r}=(0,l.D)(),o=(0,a.useRef)(!1);return(0,l.F)(()=>{let i=r.getElapsedTime();n.current&&(n.current.uTime=i),o.current&&t.current&&(t.current.position.z+=2,T.opacity-=.1,t.current.position.x<-300&&e.die()),t.current}),(0,a.useEffect)(()=>{t.current.children.forEach(e=>{e.rotation.y+=Math.PI,e.rotation.x+=Math.PI/2}),setTimeout(()=>{o.current=!0},3e3)},[]),(0,i.jsxs)("group",{ref:t,children:[(0,i.jsxs)("mesh",{position:[0,-10,-300],children:[(0,i.jsx)("planeGeometry",{args:[300,600,100,100]}),(0,i.jsx)("primitive",{object:T})]}),(0,i.jsxs)("mesh",{position:[0,20,-300],rotation:[0,-Math.PI,0],children:[(0,i.jsx)("planeGeometry",{args:[300,600,100,100]}),(0,i.jsx)("primitive",{object:T})]})]})};var P=n(68014);let S=new m.MeshStandardMaterial({color:new m.Color(4960511),transparent:!0,opacity:.6,blending:m.AdditiveBlending,depthWrite:!1}),R=new m.SphereGeometry(.05,8,8),D=e=>{let t=(0,a.useRef)(null),{rapier:n,world:r}=(0,d.dv)(),o=Math.PI/6,[s,c]=(0,a.useState)(!0),u=(0,a.useRef)([]),h=(0,a.useRef)(0);return(0,l.F)((e,i)=>{if(s){h.current+=100*i;let s=Math.floor(h.current);h.current-=s;for(let i=0;i<s;i++){var a,l;if(u.current.length>=500)break;let i=(Math.random()-.5)*o,s=new m.Vector3(Math.sin(i),1,(Math.random()-.5)*o).normalize().clone().multiplyScalar(5),c=new m.Mesh(R,S.clone());c.material.color=new m.Color(4960511),c.position.copy((null===(a=t.current)||void 0===a?void 0:a.position)||new m.Vector3(0,0,0)),null===(l=t.current)||void 0===l||l.add(c);let d=P.RigidBodyDesc.dynamic().setTranslation(c.position.x,c.position.y,c.position.z),h=r.createRigidBody(d),f=n.ColliderDesc.ball(.05);r.createCollider(f,h),h.setLinvel({x:s.x,y:s.y,z:s.z},!0),c.userData={rigidBody:h,spawnTime:e.clock.getElapsedTime()},u.current.push(c)}}let c=e.clock.getElapsedTime();u.current=u.current.filter(e=>{let{rigidBody:n,spawnTime:o}=e.userData,i=c-o;if(i>3){var a;return r.removeRigidBody(n),null===(a=t.current)||void 0===a||a.remove(e),!1}{let t=n.translation();return e.position.set(t.x,t.y,t.z),e.material.opacity=m.MathUtils.lerp(.6,0,i/3),!0}})}),(0,a.useEffect)(()=>{let t=setTimeout(()=>{c(!1)},3e3),n=setTimeout(()=>{e.die()},6e3);return()=>{clearTimeout(t),clearTimeout(n)}},[e]),(0,i.jsx)("group",{ref:t})},E=new m.MeshStandardMaterial({color:new m.Color(4960511),transparent:!0,opacity:.6,blending:m.AdditiveBlending,depthWrite:!1}),z=new m.SphereGeometry(.05,8,8),F=e=>{let t=(0,a.useRef)(null),{rapier:n,world:r}=(0,d.dv)(),[o,s]=(0,a.useState)(!0),c=(0,a.useRef)([]),u=(0,a.useRef)(0);return(0,l.F)((e,i)=>{if(o){u.current+=500*i;let o=Math.floor(u.current);u.current-=o;for(let i=0;i<o;i++){var a;if(c.current.length>=1e3)break;let o=m.MathUtils.lerp(-10,10,Math.random()),i=new m.Vector3(o,10,0),l=new m.Vector3((Math.random()-.5)*.2,-1,(Math.random()-.5)*.2).normalize().clone().multiplyScalar(10),s=new m.Mesh(z,E);s.material.color=new m.Color(4960511),s.position.copy(i),null===(a=t.current)||void 0===a||a.add(s);let u=P.RigidBodyDesc.dynamic().setTranslation(i.x,i.y,i.z).setGravityScale(0),d=r.createRigidBody(u),h=n.ColliderDesc.ball(.05);r.createCollider(h,d),d.setLinvel({x:l.x,y:l.y,z:l.z},!0),s.userData={rigidBody:d,spawnTime:e.clock.getElapsedTime()},c.current.push(s)}}let l=e.clock.getElapsedTime();c.current=c.current.filter(e=>{var n,o;let{rigidBody:i,spawnTime:a}=e.userData,s=l-a;if(s>5)return r.removeRigidBody(i),null===(n=t.current)||void 0===n||n.remove(e),!1;{let n=i.translation();return(e.position.set(n.x,n.y,n.z),n.y<=-10)?(r.removeRigidBody(i),null===(o=t.current)||void 0===o||o.remove(e),!1):(e.material.opacity=m.MathUtils.lerp(.6,0,s/5),!0)}})}),(0,a.useEffect)(()=>{let t=setTimeout(()=>{s(!1)},5e3),n=setTimeout(()=>{e.die()},1e4);return()=>{clearTimeout(t),clearTimeout(n)}},[e]),(0,i.jsx)("group",{ref:t})},U=new m.MeshStandardMaterial({color:new m.Color(4960511),transparent:!0,opacity:.6,roughness:.1,metalness:.5,blending:m.AdditiveBlending,depthWrite:!1,emissive:new m.Color(4960511),emissiveIntensity:.5}),B=new m.SphereGeometry(.2,16,16),V=e=>{let t=(0,a.useRef)(null),{rapier:n,world:r}=(0,d.dv)(),[o,s]=(0,a.useState)(!0),c=(0,a.useRef)([]),u=(0,a.useRef)(0);return(0,l.F)((e,i)=>{if(o){u.current+=100*i;let o=Math.floor(u.current);u.current-=o;for(let i=0;i<o;i++){var a;if(c.current.length>=200)break;let o=m.MathUtils.lerp(-10,10,Math.random());m.MathUtils.lerp(-5,5,Math.random());let i=new m.Vector3(o,-5,0),l=new m.Vector3((Math.random()-.5)*.5,1,(Math.random()-.5)*.5).normalize().clone().multiplyScalar(2),s=new m.Mesh(B,U);s.material.color=new m.Color(4960511),s.position.copy(i),null===(a=t.current)||void 0===a||a.add(s);let u=P.RigidBodyDesc.dynamic().setTranslation(i.x,i.y,i.z).setGravityScale(0),d=r.createRigidBody(u),h=n.ColliderDesc.ball(.2);r.createCollider(h,d),d.setLinvel({x:l.x,y:l.y,z:l.z},!0),d.setAngvel({x:(Math.random()-.5)*2,y:(Math.random()-.5)*2,z:(Math.random()-.5)*2},!0),s.userData={rigidBody:d,spawnTime:e.clock.getElapsedTime()},c.current.push(s)}}let l=e.clock.getElapsedTime();c.current=c.current.filter(e=>{var n,o;let{rigidBody:i,spawnTime:a}=e.userData,s=l-a;if(s>10)return r.removeRigidBody(i),null===(n=t.current)||void 0===n||n.remove(e),!1;{let n=i.translation();return(e.position.set(n.x,n.y,n.z),n.y>=15)?(r.removeRigidBody(i),null===(o=t.current)||void 0===o||o.remove(e),!1):(e.rotation.x+=.01,e.rotation.y+=.01,e.material.opacity=m.MathUtils.lerp(.6,0,s/10),!0)}})}),(0,a.useEffect)(()=>{let t=setTimeout(()=>{s(!1)},6e3),n=setTimeout(()=>{e.die()},1e4);return()=>{clearTimeout(t),clearTimeout(n)}},[e]),(0,i.jsx)("group",{ref:t})},k=new m.MeshStandardMaterial({color:new m.Color(4960511),transparent:!0,opacity:.6,roughness:.1,metalness:.5,blending:m.AdditiveBlending,depthWrite:!1,emissive:new m.Color(4960511),emissiveIntensity:.5}),G=new m.Shape,L=2*Math.PI/8;for(let e=0;e<8;e++){let t=e*L,n=10*Math.cos(t),r=10*Math.sin(t),o=4*Math.cos(t+L/2),i=4*Math.sin(t+L/2);0===e?G.moveTo(.015*n,.015*r):G.lineTo(.015*n,.015*r),G.lineTo(.015*o,.015*i)}G.closePath();let A=new m.ShapeGeometry(G),_=e=>{let t=(0,a.useRef)(null),{rapier:n,world:r}=(0,d.dv)(),[o,s]=(0,a.useState)(!0),[c,u]=(0,a.useState)(new m.Vector3),h=(0,a.useRef)([]),f=e=>{let t=e.clientX/window.innerWidth*2-1,n=-(e.clientY/window.innerHeight*2)+1;u(new m.Vector3(t,n,0))};return(0,a.useEffect)(()=>(window.addEventListener("mousemove",f),()=>{window.removeEventListener("mousemove",f)}),[]),(0,l.F)((e,i)=>{if(o&&0===h.current.length){for(let o=0;o<50;o++){var a;if(h.current.length>=50)break;let o=new m.Vector3((Math.random()-.5)*10,(Math.random()-.5)*10,0),i=new m.Mesh(A,k);i.position.copy(o),i.rotation.set(Math.random()*Math.PI,Math.random()*Math.PI,Math.random()*Math.PI),null===(a=t.current)||void 0===a||a.add(i);let l=P.RigidBodyDesc.dynamic().setTranslation(o.x,o.y,o.z).setGravityScale(0),s=r.createRigidBody(l),c=n.ColliderDesc.ball(.2);r.createCollider(c,s),i.userData={rigidBody:s,spawnTime:e.clock.getElapsedTime(),rotationalSpeed:new m.Vector3((Math.random()-.5)*2,(Math.random()-.5)*2,(Math.random()-.5)*2)},h.current.push(i)}s(!1)}let l=e.clock.getElapsedTime();h.current=h.current.filter(e=>{let{rigidBody:n,spawnTime:o,rotationalSpeed:a}=e.userData,s=l-o;if(s>5){var u;return r.removeRigidBody(n),null===(u=t.current)||void 0===u||u.remove(e),!1}{let t=n.translation();e.position.set(t.x,t.y,t.z),e.material.opacity=m.MathUtils.lerp(.6,0,s/5),e.rotation.x+=a.x*i;let r=c.clone().sub(e.position);r.normalize();let o=r.multiplyScalar(1.5);return n.setLinvel({x:o.x,y:o.y,z:o.z},!0),!0}})}),(0,a.useEffect)(()=>{let t=setTimeout(()=>{e.die()},6e3);return()=>{clearTimeout(t)}},[e,5]),(0,i.jsx)("group",{ref:t})},W=new m.MeshStandardMaterial({color:16777215,side:m.DoubleSide}),O=e=>{let t=(0,a.useRef)(null),{clock:n}=(0,l.D)(),r=(0,a.useRef)(Array.from({length:100},(e,t)=>{let n=t/100*Math.PI*2,r=new m.Vector3(0,0,0),o=new m.Vector3(Math.cos(n),Math.sin(n),0),i=o.clone().multiplyScalar(6);return{position:r,direction:o,velocity:i,angle:n,age:0,delay:t,lifetime:m.MathUtils.lerp(1.6,2,Math.random()),object:new m.Object3D,color:new m.Color(Math.random(),Math.random(),Math.random())}}));return(0,a.useEffect)(()=>{r.current.forEach(e=>{var n;let r=new m.Mesh(new m.PlaneGeometry(.2,.1),W);r.material.color=e.color,r.material.needsUpdate=!0,e.object.add(r),null===(n=t.current)||void 0===n||n.add(e.object)})},[]),(0,l.F)((t,n)=>{let o=!0;r.current.forEach(e=>{if(e.delay-=.3,!(e.delay>0)&&e.age<e.lifetime){o=!1,e.position.add(e.velocity.clone().multiplyScalar(n)),e.object.position.copy(e.position);let t=e.velocity.clone().normalize(),r=new m.Quaternion;r.setFromUnitVectors(new m.Vector3(1,0,0),t),e.object.quaternion.slerp(r,1);let i=e.age/e.lifetime,a=m.MathUtils.lerp(1,5,i);e.object.scale.set(a,a,a),e.age+=n}}),o&&e.die()}),(0,i.jsx)("group",{ref:t,renderOrder:-1})};class X{static updateColorHue(e){X.color.setHSL(e,1,.5),p.uniforms.uColor.value=new m.Color("hsl(".concat(e,", 100%, 50%)")),M.color=new m.Color("hsl(".concat(e,", 100%, 50%)")),M.emissive=M.color,S.color=new m.Color("hsl(".concat(e,", 100%, 50%)")),S.emissive=M.color,U.color=new m.Color("hsl(".concat(e,", 100%, 50%)")),U.emissive=M.color,k.color=new m.Color("hsl(".concat(e,", 100%, 50%)")),k.emissive=M.color,W.color=new m.Color("hsl(".concat(e,", 100%, 50%)")),W.emissive=M.color,E.color=new m.Color("hsl(".concat(e,", 100%, 50%)")),E.emissive=M.color,M.emissiveIntensity=10,T.uniforms.uColor.value=new m.Color("hsl(".concat(e,", 100%, 50%)"))}}X.color=new m.Color,X.mode="ring",X.modeChanged=new y.y,X.shoot=new y.y;var Y=e=>{let{size:t=2,initialHue:n=0}=e,r=(0,a.useRef)(null),o=(0,a.useRef)(null),{camera:s,size:c}=(0,l.D)(),[u,d]=(0,a.useState)(n),h=t/2,f=e=>{let t=e/360*Math.PI*2-Math.PI/2;return[h*Math.cos(t),h*Math.sin(t),.1]};(0,a.useEffect)(()=>{if(o.current){let e=f(u);o.current.position.set(...e)}X.updateColorHue(u)},[u,h]);let p=(0,g.useDrag)(e=>{let{xy:[t,n]}=e,r=new m.Vector2(t/c.width*2-1,-(n/c.height*2)+1),o=new m.Raycaster;o.setFromCamera(r,s);let i=new m.Plane(new m.Vector3(0,0,1),0),a=new m.Vector3;if(o.ray.intersectPlane(i,a),a){let e=180*(Math.atan2(a.y,a.x)+Math.PI/2)/Math.PI;e<0&&(e+=360),d(e%360)}},{pointerButtons:{LEFT:0}}),v=(0,a.useMemo)(()=>{let e=document.createElement("canvas");e.width=512,e.height=512;let t=e.getContext("2d");if(!t)return console.warn("Failed to get 2D context for hue gradient."),null;let n=t.createImageData(512,512),r=n.data;for(let e=0;e<512;e++)for(let t=0;t<512;t++){let n=t-256,o=e-256,i=Math.sqrt(n*n+o*o);if(i>=246&&i<=266){let i=Math.atan2(o,n)+Math.PI/2;i<0&&(i+=2*Math.PI);let a=180*i/Math.PI,l=new m.Color("hsl(".concat(a,", 100%, 80%)")),s=(512*e+t)*4;r[s]=Math.floor(255*l.r),r[s+1]=Math.floor(255*l.g),r[s+2]=Math.floor(255*l.b),r[s+3]=255}}t.putImageData(n,0,0);let o=new m.CanvasTexture(e);return o.wrapS=m.ClampToEdgeWrapping,o.wrapT=m.ClampToEdgeWrapping,o.needsUpdate=!0,o},[h]);return(0,i.jsxs)(i.Fragment,{children:[v&&(0,i.jsxs)("mesh",{ref:r,rotation:[0,-Math.PI,-Math.PI],children:[(0,i.jsx)("ringGeometry",{args:[h,h+.05,64,8,0,2*Math.PI]}),(0,i.jsx)("meshBasicMaterial",{side:m.DoubleSide,map:v||void 0,color:v?void 0:"white",transparent:!v})]}),(0,i.jsxs)("mesh",{ref:o,...p(),position:f(u),children:[(0,i.jsx)("circleGeometry",{args:[.1*h,32]}),(0,i.jsx)("meshStandardMaterial",{color:"hsl(".concat(u,", 100%, 50%)"),emissive:"hsl(".concat(u,", 100%, 50%)"),emissiveIntensity:10})]})]})};(r=o||(o={})).Ring="ring",r.Burst="burst",r.Attraction="explosion",r.Fountain="fountain",r.Wave="wave",r.Rain="rain",r.Bubbles="bubbles",r.Rays="rays";let H={ring:new m.Color(2003199),burst:new m.Color(16776960),explosion:new m.Color(16729344),fountain:new m.Color(3329330),wave:new m.Color(52945),rain:new m.Color(16738740),bubbles:new m.Color(16753920),rays:new m.Color(9055202)};function N(){let e=new m.Shape,t=2*Math.PI/8;for(let n=0;n<8;n++){let r=n*t,o=10*Math.cos(r),i=10*Math.sin(r),a=4*Math.cos(r+t/2),l=4*Math.sin(r+t/2);0===n?e.moveTo(.015*o,.015*i):e.lineTo(.015*o,.015*i),e.lineTo(.015*a,.015*l)}return e.closePath(),new m.ShapeGeometry(e)}function q(e){let{type:t,x:n,y:r,t:o}=e,[s,c]=(0,a.useState)({emissiveIntensity:t==X.mode?5:.5,active:t==X.mode}),u=(0,a.useRef)(null);return(0,l.F)(e=>{u.current&&(u.current.position.x+=Math.cos(e.clock.getElapsedTime())*(5e-4*(0==o?-1:1)),u.current.rotation.z+=.01)}),(0,a.useEffect)(()=>{X.modeChanged.subscribe(()=>{c(e=>({...e,emissiveIntensity:t==X.mode?5:.5,active:t==X.mode}))})},[]),(0,i.jsxs)("group",{position:[n,0,r],ref:u,onPointerDown:()=>{console.warn(t),X.mode=t,X.modeChanged.notify()},onPointerEnter:()=>{c({...s,emissiveIntensity:5})},onPointerLeave:()=>{c({...s,emissiveIntensity:s.active?5:.5})},children:[(0,i.jsxs)("mesh",{children:[(0,i.jsx)("circleGeometry",{args:[.1,32]}),(0,i.jsx)("meshPhongMaterial",{color:H[t],flatShading:!0,emissive:H[t],emissiveIntensity:s.emissiveIntensity})]}),(0,i.jsxs)("mesh",{children:[(0,i.jsx)("circleGeometry",{args:[.08,32]}),(0,i.jsx)("meshPhongMaterial",{color:"black",flatShading:!0})]})]})}function Q(e){let{x:t,y:n,r,types:o}=e,s=(0,a.useRef)(null);return(0,l.F)(e=>{s.current&&(s.current.rotation.z+=r)}),(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("group",{position:[t,n,0],ref:s,children:[(0,i.jsx)(q,{x:-.2,y:0,t:0,type:o[0]}),(0,i.jsx)(q,{x:.2,y:0,t:1,type:o[1]})]})})}function J(){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Q,{x:-.55,y:0,r:.01,types:["ring","burst"]}),(0,i.jsx)(Q,{x:.55,y:0,r:.01,types:["explosion","fountain"]}),(0,i.jsx)(Q,{x:0,y:.55,r:.01,types:["wave","rain"]}),(0,i.jsx)(Q,{x:0,y:-.55,r:.01,types:["bubbles","rays"]})]})}function K(){let{camera:e,size:t,viewport:n}=(0,l.D)(),r=(0,a.useRef)(null),o=n=>{let r=n.clientX/t.width*2-1,o=-(n.clientY/t.height*2)+1,i=new m.Vector3(r,o,.5);i.unproject(e);let a=i.sub(e.position).normalize(),l=-e.position.z/a.z;return e.position.clone().add(a.multiplyScalar(l))},s=new m.Vector3(0,0,0);return(0,a.useEffect)(()=>{r.current&&r.current.setTranslation(s,!0)},[]),(0,l.F)((e,n)=>{let{mouse:i}=e,a=o({clientX:(.5*i.x+.5)*t.width,clientY:(-(.5*i.y)+.5)*t.height});r.current&&r.current.setTranslation({x:a.x,y:a.y,z:0},!0)}),(0,i.jsx)(d.ib,{ref:r,type:"kinematicPosition",colliders:"ball",position:[0,0,0],children:(0,i.jsxs)("mesh",{children:[(0,i.jsx)("sphereGeometry",{args:[.5,8,8]}),(0,i.jsx)("meshStandardMaterial",{color:"hotpink",transparent:!0,opacity:0})]})})}function Z(){let[e,t]=(0,a.useState)({emissiveIntensity:0});return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("mesh",{position:[0,0,0],onPointerEnter:()=>{t({...e,emissiveIntensity:10})},onPointerLeave:()=>{t({...e,emissiveIntensity:0})},onPointerDown:()=>{X.shoot.notify()},children:[(0,i.jsx)("circleGeometry",{args:[.2,32,32]}),(0,i.jsx)("meshPhongMaterial",{color:"#00aaff",flatShading:!0,emissive:"#0000ff",emissiveIntensity:e.emissiveIntensity})]}),(0,i.jsxs)("mesh",{position:[0,0,0],children:[(0,i.jsx)("circleGeometry",{args:[.15,32,32]}),(0,i.jsx)("meshBasicMaterial",{color:"black",side:2})," "]})]})}N(),N(),N(),N(),N(),N(),N(),N();class ${constructor(e,t=crypto.randomUUID()){this.type=e,this.id=t,e==o.Ring&&(this.comp=v),e==o.Burst&&(this.comp=C),e==o.Wave&&(this.comp=I),e==o.Rain&&(this.comp=F),e==o.Fountain&&(this.comp=D),e==o.Bubbles&&(this.comp=V),e==o.Attraction&&(this.comp=_),e==o.Rays&&(this.comp=O)}}function ee(){let[e,t]=(0,a.useState)([]);return(0,a.useEffect)(()=>{let e=()=>{console.warn("shoot!"),t(e=>[...e,new $(X.mode)])};return X.shoot.subscribe(e),()=>{X.shoot.unsubscribe(e)}},[]),(0,i.jsx)(i.Fragment,{children:e.map(e=>{let n=e.comp;return(0,i.jsx)(n,{die:()=>t(t=>t.filter(t=>t.id!==e.id))},e.id)})})}function et(){let e=(0,a.useRef)(null);return(0,l.F)(()=>{e.current&&(e.current.rotation.z+=.01,p&&p.uniforms.uTime&&(p.uniforms.uTime.value+=.01),T&&T.uniforms.uTime&&(T.uniforms.uTime.value+=.01))}),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("mesh",{position:[0,0,0],children:[(0,i.jsx)("ringGeometry",{args:[.5,.52,32,8,0,2*Math.PI]}),(0,i.jsx)("meshPhongMaterial",{color:"cyan",flatShading:!0,emissive:"cyan",emissiveIntensity:1})]}),(0,i.jsxs)("mesh",{position:[0,0,0],children:[(0,i.jsx)("ringGeometry",{args:[.58,.6,32,8,0,2*Math.PI]}),(0,i.jsx)("meshPhongMaterial",{color:"cyan",flatShading:!0,emissive:"cyan",emissiveIntensity:1})]}),(0,i.jsx)("group",{ref:e,position:[0,0,.1],children:(0,i.jsx)(J,{})})]})}var en=()=>(0,i.jsxs)(s.Xz,{className:"render-canvas",id:"main",camera:{position:[0,0,5],fov:60,far:600},style:{width:"100%",height:"100vh"},children:[(0,i.jsx)("color",{attach:"background",args:["#000000"]}),(0,i.jsx)("ambientLight",{intensity:0}),(0,i.jsx)("directionalLight",{position:[0,200,100],intensity:1}),(0,i.jsx)(Z,{}),(0,i.jsx)(et,{}),(0,i.jsxs)(d.wI,{gravity:[0,-9.81,0],children:[(0,i.jsx)(K,{}),(0,i.jsx)(ee,{})]}),(0,i.jsx)(Y,{}),(0,i.jsx)(c.x,{children:(0,i.jsx)(u.d,{luminanceThreshold:.1,luminanceSmoothing:.9,intensity:1.6})})]})},63124:function(){},20123:function(){}},function(e){e.O(0,[6698,5889,225,7455,9329,4233,1290,2971,2117,1744],function(){return e(e.s=68205)}),_N_E=e.O()}]);