"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[545],{7610:function(t,e,o){o.d(e,{zz:function(){return r}});let i=1/3,s=1/6,a=t=>0|Math.floor(t),n=new Float64Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]);function r(t=Math.random){let e=function(t){let e=new Uint8Array(512);for(let t=0;t<256;t++)e[t]=t;for(let o=0;o<255;o++){let i=o+~~(t()*(256-o)),s=e[o];e[o]=e[i],e[i]=s}for(let t=256;t<512;t++)e[t]=e[t-256];return e}(t),o=new Float64Array(e).map(t=>n[t%12*3]),r=new Float64Array(e).map(t=>n[t%12*3+1]),h=new Float64Array(e).map(t=>n[t%12*3+2]);return function(t,n,m){let c,l,d,v,p,u,w,f,S,b;let y=(t+n+m)*i,k=a(t+y),E=a(n+y),L=a(m+y),g=(k+E+L)*s,V=t-(k-g),R=n-(E-g),K=m-(L-g);V>=R?R>=K?(p=1,u=0,w=0,f=1,S=1,b=0):(V>=K?(p=1,u=0,w=0):(p=0,u=0,w=1),f=1,S=0,b=1):R<K?(p=0,u=0,w=1,f=0,S=1,b=1):V<K?(p=0,u=1,w=0,f=0,S=1,b=1):(p=0,u=1,w=0,f=1,S=1,b=0);let A=V-p+s,D=R-u+s,j=K-w+s,z=V-f+2*s,M=R-S+2*s,Q=K-b+2*s,x=V-1+3*s,F=R-1+3*s,P=K-1+3*s,U=255&k,T=255&E,q=255&L,C=.6-V*V-R*R-K*K;if(C<0)c=0;else{let t=U+e[T+e[q]];C*=C,c=C*C*(o[t]*V+r[t]*R+h[t]*K)}let W=.6-A*A-D*D-j*j;if(W<0)l=0;else{let t=U+p+e[T+u+e[q+w]];W*=W,l=W*W*(o[t]*A+r[t]*D+h[t]*j)}let _=.6-z*z-M*M-Q*Q;if(_<0)d=0;else{let t=U+f+e[T+S+e[q+b]];_*=_,d=_*_*(o[t]*z+r[t]*M+h[t]*Q)}let H=.6-x*x-F*F-P*P;if(H<0)v=0;else{let t=U+1+e[T+1+e[q+1]];H*=H,v=H*H*(o[t]*x+r[t]*F+h[t]*P)}return 32*(c+l+d+v)}}},84270:function(t,e,o){o.d(e,{m:function(){return h}});var i=o(79290),s=Object.defineProperty,a=(t,e,o)=>e in t?s(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,n=(t,e,o)=>(a(t,"symbol"!=typeof e?e+"":e,o),o);function r(t){t.preventDefault()}class h extends i.EventDispatcher{constructor(t,e){super(),n(this,"object"),n(this,"domElement",null),n(this,"movementSpeed",1),n(this,"rollSpeed",.005),n(this,"dragToLook",!1),n(this,"autoForward",!1),n(this,"changeEvent",{type:"change"}),n(this,"EPS",1e-6),n(this,"tmpQuaternion",new i.Quaternion),n(this,"mouseStatus",0),n(this,"movementSpeedMultiplier",1),n(this,"moveState",{up:0,down:0,left:0,right:0,forward:0,back:0,pitchUp:0,pitchDown:0,yawLeft:0,yawRight:0,rollLeft:0,rollRight:0}),n(this,"moveVector",new i.Vector3(0,0,0)),n(this,"rotationVector",new i.Vector3(0,0,0)),n(this,"keydown",t=>{if(!t.altKey){switch(t.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=.1;break;case"KeyW":this.moveState.forward=1;break;case"KeyS":this.moveState.back=1;break;case"KeyA":this.moveState.left=1;break;case"KeyD":this.moveState.right=1;break;case"KeyR":this.moveState.up=1;break;case"KeyF":this.moveState.down=1;break;case"ArrowUp":this.moveState.pitchUp=1;break;case"ArrowDown":this.moveState.pitchDown=1;break;case"ArrowLeft":this.moveState.yawLeft=1;break;case"ArrowRight":this.moveState.yawRight=1;break;case"KeyQ":this.moveState.rollLeft=1;break;case"KeyE":this.moveState.rollRight=1}this.updateMovementVector(),this.updateRotationVector()}}),n(this,"keyup",t=>{switch(t.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=1;break;case"KeyW":this.moveState.forward=0;break;case"KeyS":this.moveState.back=0;break;case"KeyA":this.moveState.left=0;break;case"KeyD":this.moveState.right=0;break;case"KeyR":this.moveState.up=0;break;case"KeyF":this.moveState.down=0;break;case"ArrowUp":this.moveState.pitchUp=0;break;case"ArrowDown":this.moveState.pitchDown=0;break;case"ArrowLeft":this.moveState.yawLeft=0;break;case"ArrowRight":this.moveState.yawRight=0;break;case"KeyQ":this.moveState.rollLeft=0;break;case"KeyE":this.moveState.rollRight=0}this.updateMovementVector(),this.updateRotationVector()}),n(this,"pointerdown",t=>{if(this.dragToLook)this.mouseStatus++;else{switch(t.button){case 0:this.moveState.forward=1;break;case 2:this.moveState.back=1}this.updateMovementVector()}}),n(this,"pointermove",t=>{if(!this.dragToLook||this.mouseStatus>0){let e=this.getContainerDimensions(),o=e.size[0]/2,i=e.size[1]/2;this.moveState.yawLeft=-(t.pageX-e.offset[0]-o)/o,this.moveState.pitchDown=(t.pageY-e.offset[1]-i)/i,this.updateRotationVector()}}),n(this,"pointerup",t=>{if(this.dragToLook)this.mouseStatus--,this.moveState.yawLeft=this.moveState.pitchDown=0;else{switch(t.button){case 0:this.moveState.forward=0;break;case 2:this.moveState.back=0}this.updateMovementVector()}this.updateRotationVector()}),n(this,"lastQuaternion",new i.Quaternion),n(this,"lastPosition",new i.Vector3),n(this,"update",t=>{let e=t*this.movementSpeed,o=t*this.rollSpeed;this.object.translateX(this.moveVector.x*e),this.object.translateY(this.moveVector.y*e),this.object.translateZ(this.moveVector.z*e),this.tmpQuaternion.set(this.rotationVector.x*o,this.rotationVector.y*o,this.rotationVector.z*o,1).normalize(),this.object.quaternion.multiply(this.tmpQuaternion),(this.lastPosition.distanceToSquared(this.object.position)>this.EPS||8*(1-this.lastQuaternion.dot(this.object.quaternion))>this.EPS)&&(this.dispatchEvent(this.changeEvent),this.lastQuaternion.copy(this.object.quaternion),this.lastPosition.copy(this.object.position))}),n(this,"updateMovementVector",()=>{let t=this.moveState.forward||this.autoForward&&!this.moveState.back?1:0;this.moveVector.x=-this.moveState.left+this.moveState.right,this.moveVector.y=-this.moveState.down+this.moveState.up,this.moveVector.z=-t+this.moveState.back}),n(this,"updateRotationVector",()=>{this.rotationVector.x=-this.moveState.pitchDown+this.moveState.pitchUp,this.rotationVector.y=-this.moveState.yawRight+this.moveState.yawLeft,this.rotationVector.z=-this.moveState.rollRight+this.moveState.rollLeft}),n(this,"getContainerDimensions",()=>this.domElement==document||this.domElement instanceof Document?{size:[window.innerWidth,window.innerHeight],offset:[0,0]}:{size:[this.domElement.offsetWidth,this.domElement.offsetHeight],offset:[this.domElement.offsetLeft,this.domElement.offsetTop]}),n(this,"connect",t=>{this.domElement=t,t instanceof Document||t.setAttribute("tabindex",-1),this.domElement.addEventListener("contextmenu",r),this.domElement.addEventListener("pointermove",this.pointermove),this.domElement.addEventListener("pointerdown",this.pointerdown),this.domElement.addEventListener("pointerup",this.pointerup),window.addEventListener("keydown",this.keydown),window.addEventListener("keyup",this.keyup)}),n(this,"dispose",()=>{this.domElement.removeEventListener("contextmenu",r),this.domElement.removeEventListener("pointermove",this.pointermove),this.domElement.removeEventListener("pointerdown",this.pointerdown),this.domElement.removeEventListener("pointerup",this.pointerup),window.removeEventListener("keydown",this.keydown),window.removeEventListener("keyup",this.keyup)}),this.object=t,void 0!==e&&this.connect(e),this.updateMovementVector(),this.updateRotationVector()}}}}]);