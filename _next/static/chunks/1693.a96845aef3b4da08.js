!function(){var e,t,r,n,o,i,a={21693:function(e,t,r){"use strict";let n;var o=r(79290);class i{setSeed(e){this.z=this.seed=(null==e?Math.random()*this.m:e)>>>0}getSeed(){return this.seed}rand(){return this.z=(this.a*this.z+this.c)%this.m,this.z/this.m}constructor(e){this.seed=e,this.m=4294967296,this.a=1664525,this.c=1013904223,this.z=0,this.setSeed(e)}}let a=1/3,s=1/6,c=e=>0|Math.floor(e),l=new Float64Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]);function u(e,t,r,n,o){let i=o-n;return(((e-t)*(o-n)/(r-t)+n-n)%i+i)%i+n}self.onmessage=e=>{let t=e.data;if("set-seed"==t[0]){let e=new i(t[1]);n=function(e=Math.random){let t=function(e){let t=new Uint8Array(512);for(let e=0;e<256;e++)t[e]=e;for(let r=0;r<255;r++){let n=r+~~(e()*(256-r)),o=t[r];t[r]=t[n],t[n]=o}for(let e=256;e<512;e++)t[e]=t[e-256];return t}(e),r=new Float64Array(t).map(e=>l[e%12*3]),n=new Float64Array(t).map(e=>l[e%12*3+1]),o=new Float64Array(t).map(e=>l[e%12*3+2]);return function(e,i,l){let u,f,p,y,d,h,m,w,v,b;let A=(e+i+l)*a,V=c(e+A),S=c(i+A),g=c(l+A),M=(V+S+g)*s,x=e-(V-M),O=i-(S-M),j=l-(g-M);x>=O?O>=j?(d=1,h=0,m=0,w=1,v=1,b=0):(x>=j?(d=1,h=0,m=0):(d=0,h=0,m=1),w=1,v=0,b=1):O<j?(d=0,h=0,m=1,w=0,v=1,b=1):x<j?(d=0,h=1,m=0,w=0,v=1,b=1):(d=0,h=1,m=0,w=1,v=1,b=0);let F=x-d+s,P=O-h+s,_=j-m+s,k=x-w+2*s,z=O-v+2*s,E=j-b+2*s,T=x-1+3*s,U=O-1+3*s,N=j-1+3*s,B=255&V,C=255&S,I=255&g,L=.6-x*x-O*O-j*j;if(L<0)u=0;else{let e=B+t[C+t[I]];L*=L,u=L*L*(r[e]*x+n[e]*O+o[e]*j)}let R=.6-F*F-P*P-_*_;if(R<0)f=0;else{let e=B+d+t[C+h+t[I+m]];R*=R,f=R*R*(r[e]*F+n[e]*P+o[e]*_)}let G=.6-k*k-z*z-E*E;if(G<0)p=0;else{let e=B+w+t[C+v+t[I+b]];G*=G,p=G*G*(r[e]*k+n[e]*z+o[e]*E)}let q=.6-T*T-U*U-N*N;if(q<0)y=0;else{let e=B+1+t[C+1+t[I+1]];q*=q,y=q*q*(r[e]*T+n[e]*U+o[e]*N)}return 32*(u+f+p+y)}}(()=>e.rand())}if("make-grass"==t[0]){let[e,r,i,a,s,c,l,f,p]=t,y=function(e){let{bladeWidth:t,bladeHeight:r,noiseScale:i,noiseAmplitude:a,chunkX:s,chunkZ:c,gridSize:l}=e,f=[],p=[],y=[],d=[],h=0,m=new o.Vector3,w=[0,0];new o.Vector3;for(let e=s*l;e<s*l+l;e+=.25)for(let v=c*l;v<c*l+l;v+=.25){let c=e-l/2,b=v-l/2;if(s*l-c<-50||s*l-c>50)continue;let A=n(c*i,b*i,0)*a;if(A<0)continue;m.x=c,m.y=A,m.z=b,w[0]=u(e,-l/2,l/2,0,1),w[1]=u(v,-l/2,l/2,0,1);let V=function(e,t,r,n,i){let a=.5*e,s=t+.3*Math.random(),c=Math.random()*Math.PI*2,l=new o.Vector3(Math.sin(c),0,-Math.cos(c)),u=Math.random()*Math.PI*2,f=new o.Vector3(Math.sin(u),0,-Math.cos(u)),p=new o.Vector3().addVectors(r,new o.Vector3().copy(l).multiplyScalar(e/2*1)),y=new o.Vector3().addVectors(r,new o.Vector3().copy(l).multiplyScalar(-(e/2*1))),d=new o.Vector3().addVectors(r,new o.Vector3().copy(l).multiplyScalar(a/2*1)),h=new o.Vector3().addVectors(r,new o.Vector3().copy(l).multiplyScalar(-(a/2*1))),m=new o.Vector3().addVectors(r,new o.Vector3().copy(f).multiplyScalar(.1));d.y+=s/2,h.y+=s/2,m.y+=s;let w=[0,0,0],v=[.5,.5,.5];return{verts:[{pos:p.toArray(),uv:i,color:w},{pos:y.toArray(),uv:i,color:w},{pos:h.toArray(),uv:i,color:v},{pos:d.toArray(),uv:i,color:v},{pos:m.toArray(),uv:i,color:[1,1,1]}],indices:[n,n+1,n+2,n+2,n+4,n+3,n+3,n,n+2]}}(t,r,m,5*h,w);V.verts.forEach(e=>{f.push(...e.pos),p.push(...e.uv),d.push(...e.color)}),V.indices.forEach(e=>y.push(e)),h++}let v=new o.BufferGeometry;v.setAttribute("position",new o.BufferAttribute(new Float32Array(f),3)),v.setIndex(new o.BufferAttribute(new Uint32Array(y),1)),v.computeVertexNormals();let b=v.getAttribute("normal").array;return{positions:new Float32Array(f),indices:new Uint32Array(y),uvs:new Float32Array(p),colors:new Float32Array(d),normal:b}}({chunkX:i,chunkZ:a,gridSize:s,noiseScale:c,noiseAmplitude:l,bladeWidth:f,bladeHeight:p});self.postMessage(["set-grass",r,y],Object.values(y).map(e=>e.buffer))}}}},s={};function c(e){var t=s[e];if(void 0!==t)return t.exports;var r=s[e]={exports:{}},n=!0;try{a[e](r,r.exports,c),n=!1}finally{n&&delete s[e]}return r.exports}c.m=a,c.x=function(){var e=c.O(void 0,[225],function(){return c(21693)});return c.O(e)},e=[],c.O=function(t,r,n,o){if(r){o=o||0;for(var i=e.length;i>0&&e[i-1][2]>o;i--)e[i]=e[i-1];e[i]=[r,n,o];return}for(var a=1/0,i=0;i<e.length;i++){for(var r=e[i][0],n=e[i][1],o=e[i][2],s=!0,l=0;l<r.length;l++)a>=o&&Object.keys(c.O).every(function(e){return c.O[e](r[l])})?r.splice(l--,1):(s=!1,o<a&&(a=o));if(s){e.splice(i--,1);var u=n();void 0!==u&&(t=u)}}return t},c.d=function(e,t){for(var r in t)c.o(t,r)&&!c.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},c.f={},c.e=function(e){return Promise.all(Object.keys(c.f).reduce(function(t,r){return c.f[r](e,t),t},[]))},c.u=function(e){return"static/chunks/0f3c8638-0d71347394535373.js"},c.miniCssF=function(e){},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.j=1693,c.tt=function(){return void 0===t&&(t={createScriptURL:function(e){return e}},"undefined"!=typeof trustedTypes&&trustedTypes.createPolicy&&(t=trustedTypes.createPolicy("nextjs#bundler",t))),t},c.tu=function(e){return c.tt().createScriptURL(e)},c.p="/_next/",r={1693:1},c.f.i=function(e,t){r[e]||importScripts(c.tu(c.p+c.u(e)))},o=(n=self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push.bind(n),n.push=function(e){var t=e[0],n=e[1],i=e[2];for(var a in n)c.o(n,a)&&(c.m[a]=n[a]);for(i&&i(c);t.length;)r[t.pop()]=1;o(e)},i=c.x,c.x=function(){return c.e(225).then(i)},_N_E=c.x()}();