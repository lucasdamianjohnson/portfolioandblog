(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1471],{93813:function(t,e,r){!function(){var e={452:function(t){"use strict";t.exports=r(85605)}},i={};function n(t){var r=i[t];if(void 0!==r)return r.exports;var o=i[t]={exports:{}},s=!0;try{e[t](o,o.exports,n),s=!1}finally{s&&delete i[t]}return o.exports}n.ab="//";var o={};!function(){var t,e=(t=n(452))&&"object"==typeof t&&"default"in t?t.default:t,r=/https?|ftp|gopher|file/;function i(t){"string"==typeof t&&(t=m(t));var i,n,o,s,a,l,h,f,u,c=(n=(i=t).auth,o=i.hostname,s=i.protocol||"",a=i.pathname||"",l=i.hash||"",h=i.query||"",f=!1,n=n?encodeURIComponent(n).replace(/%3A/i,":")+"@":"",i.host?f=n+i.host:o&&(f=n+(~o.indexOf(":")?"["+o+"]":o),i.port&&(f+=":"+i.port)),h&&"object"==typeof h&&(h=e.encode(h)),u=i.search||h&&"?"+h||"",s&&":"!==s.substr(-1)&&(s+=":"),i.slashes||(!s||r.test(s))&&!1!==f?(f="//"+(f||""),a&&"/"!==a[0]&&(a="/"+a)):f||(f=""),l&&"#"!==l[0]&&(l="#"+l),u&&"?"!==u[0]&&(u="?"+u),{protocol:s,host:f,pathname:a=a.replace(/[?#]/g,encodeURIComponent),search:u=u.replace("#","%23"),hash:l});return""+c.protocol+c.host+c.pathname+c.search+c.hash}var s="http://",a=s+"w.w",l=/^([a-z0-9.+-]*:\/\/\/)([a-z0-9.+-]:\/*)?/i,h=/https?|ftp|gopher|file/;function f(t,e){var r="string"==typeof t?m(t):t;t="object"==typeof t?i(t):t;var n=m(e),o="";r.protocol&&!r.slashes&&(o=r.protocol,t=t.replace(r.protocol,""),o+="/"===e[0]||"/"===t[0]?"/":""),o&&n.protocol&&(o="",n.slashes||(o=n.protocol,e=e.replace(n.protocol,"")));var f=t.match(l);f&&!n.protocol&&(t=t.substr((o=f[1]+(f[2]||"")).length),/^\/\/[^/]/.test(e)&&(o=o.slice(0,-1)));var u=new URL(t,a+"/"),c=new URL(e,u).toString().replace(a,""),p=n.protocol||r.protocol;return p+=r.slashes||n.slashes?"//":"",!o&&p?c=c.replace(s,p):o&&(c=c.replace(s,"")),h.test(c)||~e.indexOf(".")||"/"===t.slice(-1)||"/"===e.slice(-1)||"/"!==c.slice(-1)||(c=c.slice(0,-1)),o&&(c=o+("/"===c[0]?c.substr(1):c)),c}function u(){}u.prototype.parse=m,u.prototype.format=i,u.prototype.resolve=f,u.prototype.resolveObject=f;var c=/^https?|ftp|gopher|file/,p=/^(.*?)([#?].*)/,g=/^([a-z0-9.+-]*:)(\/{0,3})(.*)/i,d=/^([a-z0-9.+-]*:)?\/\/\/*/i,y=/^([a-z0-9.+-]*:)(\/{0,2})\[(.*)\]$/i;function m(t,r,n){if(void 0===r&&(r=!1),void 0===n&&(n=!1),t&&"object"==typeof t&&t instanceof u)return t;var o=(t=t.trim()).match(p);t=o?o[1].replace(/\\/g,"/")+o[2]:t.replace(/\\/g,"/"),y.test(t)&&"/"!==t.slice(-1)&&(t+="/");var s=!/(^javascript)/.test(t)&&t.match(g),l=d.test(t),h="";s&&(c.test(s[1])||(h=s[1].toLowerCase(),t=""+s[2]+s[3]),s[2]||(l=!1,c.test(s[1])?(h=s[1],t=""+s[3]):t="//"+s[3]),3!==s[2].length&&1!==s[2].length||(h=s[1],t="/"+s[3]));var f,m=(o?o[1]:t).match(/^https?:\/\/[^/]+(:[0-9]+)(?=\/|$)/),w=m&&m[1],b=new u,I="",E="";try{f=new URL(t)}catch(e){I=e,h||n||!/^\/\//.test(t)||/^\/\/.+[@.]/.test(t)||(E="/",t=t.substr(1));try{f=new URL(t,a)}catch(t){return b.protocol=h,b.href=h,b}}b.slashes=l&&!E,b.host="w.w"===f.host?"":f.host,b.hostname="w.w"===f.hostname?"":f.hostname.replace(/(\[|\])/g,""),b.protocol=I?h||null:f.protocol,b.search=f.search.replace(/\\/g,"%5C"),b.hash=f.hash.replace(/\\/g,"%5C");var A=t.split("#");!b.search&&~A[0].indexOf("?")&&(b.search="?"),b.hash||""!==A[1]||(b.hash="#"),b.query=r?e.decode(f.search.substr(1)):b.search.substr(1),b.pathname=E+(s?f.pathname.replace(/['^|`]/g,function(t){return"%"+t.charCodeAt().toString(16).toUpperCase()}).replace(/((?:%[0-9A-F]{2})+)/g,function(t,e){try{return decodeURIComponent(e).split("").map(function(t){var e=t.charCodeAt();return e>256||/^[a-z0-9]$/i.test(t)?t:"%"+e.toString(16).toUpperCase()}).join("")}catch(t){return e}}):f.pathname),"about:"===b.protocol&&"blank"===b.pathname&&(b.protocol="",b.pathname=""),I&&"/"!==t[0]&&(b.pathname=b.pathname.substr(1)),h&&!c.test(h)&&"/"!==t.slice(-1)&&"/"===b.pathname&&(b.pathname=""),b.path=b.pathname+b.search,b.auth=[f.username,f.password].map(decodeURIComponent).filter(Boolean).join(":"),b.port=f.port,w&&!b.host.endsWith(w)&&(b.host+=w,b.port=w.slice(1)),b.href=E?""+b.pathname+b.search+b.hash:i(b);var S=/^(file)/.test(b.href)?["host","hostname"]:[];return Object.keys(b).forEach(function(t){~S.indexOf(t)||(b[t]=b[t]||null)}),b}o.parse=m,o.format=i,o.resolve=f,o.resolveObject=function(t,e){return m(f(t,e))},o.Url=u}(),t.exports=o}()},85605:function(t){!function(){"use strict";var e={815:function(t){t.exports=function(t,r,i,n){r=r||"&",i=i||"=";var o={};if("string"!=typeof t||0===t.length)return o;var s=/\+/g;t=t.split(r);var a=1e3;n&&"number"==typeof n.maxKeys&&(a=n.maxKeys);var l=t.length;a>0&&l>a&&(l=a);for(var h=0;h<l;++h){var f,u,c,p,g=t[h].replace(s,"%20"),d=g.indexOf(i);(d>=0?(f=g.substr(0,d),u=g.substr(d+1)):(f=g,u=""),c=decodeURIComponent(f),p=decodeURIComponent(u),Object.prototype.hasOwnProperty.call(o,c))?e(o[c])?o[c].push(p):o[c]=[o[c],p]:o[c]=p}return o};var e=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},577:function(t){var e=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,o,s,a){return(o=o||"&",s=s||"=",null===t&&(t=void 0),"object"==typeof t)?i(n(t),function(n){var a=encodeURIComponent(e(n))+s;return r(t[n])?i(t[n],function(t){return a+encodeURIComponent(e(t))}).join(o):a+encodeURIComponent(e(t[n]))}).join(o):a?encodeURIComponent(e(a))+s+encodeURIComponent(e(t)):""};var r=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function i(t,e){if(t.map)return t.map(e);for(var r=[],i=0;i<t.length;i++)r.push(e(t[i],i));return r}var n=Object.keys||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push(r);return e}}},r={};function i(t){var n=r[t];if(void 0!==n)return n.exports;var o=r[t]={exports:{}},s=!0;try{e[t](o,o.exports,i),s=!1}finally{s&&delete r[t]}return o.exports}i.ab="//";var n={};n.decode=n.parse=i(815),n.encode=n.stringify=i(577),t.exports=n}()},95517:function(t){function e(t,e){let r=RegExp(e,"g"),i=t.match(r);return i?i.length:0}t.exports=e,t.exports.default=e},28015:function(t,e,r){let i=r(49145),n=r(90465),o=r(95517);function s(t,e,r){let s=r&&r.debug||!1,a=(r&&r.nested,!0),l=r&&r.startIndex||0;s&&console.log("[xml-utils] starting findTagByName with",e," and ",r);let h=i(t,`<${e}[ 
>/]`,l);if(s&&console.log("[xml-utils] start:",h),-1===h)return;let f=t.slice(h+e.length),u=n(f,"^[^<]*[ /]>",0),c=-1!==u&&"/"===f[u-1];if(s&&console.log("[xml-utils] selfClosing:",c),!1===c){if(a){let t=0,r=1,i=0;for(;-1!==(u=n(f,"[ /]"+e+">",t));){let n=f.substring(t,u+1);if(r+=o(n,"<"+e+"[ \n	>]"),(i+=o(n,"</"+e+">"))>=r)break;t=u}}else u=n(f,"[ /]"+e+">",0)}let p=h+e.length+u+1;if(s&&console.log("[xml-utils] end:",p),-1===p)return;let g=t.slice(h,p);return{inner:c?null:g.slice(g.indexOf(">")+1,g.lastIndexOf("<")),outer:g,start:h,end:p}}t.exports=s,t.exports.default=s},1049:function(t,e,r){let i=r(28015);function n(t,e,r){let n;let o=[],s=r&&r.debug||!1,a=!r||"boolean"!=typeof r.nested||r.nested,l=r&&r.startIndex||0;for(;n=i(t,e,{debug:s,startIndex:l});)l=a?n.start+1+e.length:n.end,o.push(n);return s&&console.log("findTagsByName found",o.length,"tags"),o}t.exports=n,t.exports.default=n},19410:function(t){function e(t,e,r){let i=r&&r.debug||!1;i&&console.log("[xml-utils] getting "+e+" in "+t);let n="object"==typeof t?t.outer:t,o=n.slice(0,n.indexOf(">")+1),s=['"',"'"];for(let t=0;t<s.length;t++){let r=s[t],n=e+"\\="+r+"([^"+r+"]*)"+r;i&&console.log("[xml-utils] pattern:",n);let a=new RegExp(n).exec(o);if(i&&console.log("[xml-utils] match:",a),a)return a[1]}}t.exports=e,t.exports.default=e},90465:function(t){function e(t,e,r){let i=new RegExp(e).exec(t.slice(r));return i?r+i.index+i[0].length-1:-1}t.exports=e,t.exports.default=e},49145:function(t){function e(t,e,r){let i=new RegExp(e).exec(t.slice(r));return i?r+i.index:-1}t.exports=e,t.exports.default=e},21092:function(t,e){"use strict";e.byteLength=function(t){var e=l(t),r=e[0],i=e[1];return(r+i)*3/4-i},e.toByteArray=function(t){var e,r,o=l(t),s=o[0],a=o[1],h=new n((s+a)*3/4-a),f=0,u=a>0?s-4:s;for(r=0;r<u;r+=4)e=i[t.charCodeAt(r)]<<18|i[t.charCodeAt(r+1)]<<12|i[t.charCodeAt(r+2)]<<6|i[t.charCodeAt(r+3)],h[f++]=e>>16&255,h[f++]=e>>8&255,h[f++]=255&e;return 2===a&&(e=i[t.charCodeAt(r)]<<2|i[t.charCodeAt(r+1)]>>4,h[f++]=255&e),1===a&&(e=i[t.charCodeAt(r)]<<10|i[t.charCodeAt(r+1)]<<4|i[t.charCodeAt(r+2)]>>2,h[f++]=e>>8&255,h[f++]=255&e),h},e.fromByteArray=function(t){for(var e,i=t.length,n=i%3,o=[],s=0,a=i-n;s<a;s+=16383)o.push(function(t,e,i){for(var n,o=[],s=e;s<i;s+=3)o.push(r[(n=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]))>>18&63]+r[n>>12&63]+r[n>>6&63]+r[63&n]);return o.join("")}(t,s,s+16383>a?a:s+16383));return 1===n?o.push(r[(e=t[i-1])>>2]+r[e<<4&63]+"=="):2===n&&o.push(r[(e=(t[i-2]<<8)+t[i-1])>>10]+r[e>>4&63]+r[e<<2&63]+"="),o.join("")};for(var r=[],i=[],n="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,a=o.length;s<a;++s)r[s]=o[s],i[o.charCodeAt(s)]=s;function l(t){var e=t.length;if(e%4>0)throw Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");-1===r&&(r=e);var i=r===e?0:4-r%4;return[r,i]}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},10536:function(t,e,r){"use strict";let i=r(21092),n=r(32119),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function s(t){if(t>2147483647)throw RangeError('The value "'+t+'" is invalid for option "size"');let e=new Uint8Array(t);return Object.setPrototypeOf(e,a.prototype),e}function a(t,e,r){if("number"==typeof t){if("string"==typeof e)throw TypeError('The "string" argument must be of type string. Received type number');return f(t)}return l(t,e,r)}function l(t,e,r){if("string"==typeof t)return function(t,e){if(("string"!=typeof e||""===e)&&(e="utf8"),!a.isEncoding(e))throw TypeError("Unknown encoding: "+e);let r=0|g(t,e),i=s(r),n=i.write(t,e);return n!==r&&(i=i.slice(0,n)),i}(t,e);if(ArrayBuffer.isView(t))return function(t){if(k(t,Uint8Array)){let e=new Uint8Array(t);return c(e.buffer,e.byteOffset,e.byteLength)}return u(t)}(t);if(null==t)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(k(t,ArrayBuffer)||t&&k(t.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(k(t,SharedArrayBuffer)||t&&k(t.buffer,SharedArrayBuffer)))return c(t,e,r);if("number"==typeof t)throw TypeError('The "value" argument must not be of type number. Received type number');let i=t.valueOf&&t.valueOf();if(null!=i&&i!==t)return a.from(i,e,r);let n=function(t){var e;if(a.isBuffer(t)){let e=0|p(t.length),r=s(e);return 0===r.length||t.copy(r,0,0,e),r}return void 0!==t.length?"number"!=typeof t.length||(e=t.length)!=e?s(0):u(t):"Buffer"===t.type&&Array.isArray(t.data)?u(t.data):void 0}(t);if(n)return n;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return a.from(t[Symbol.toPrimitive]("string"),e,r);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function h(t){if("number"!=typeof t)throw TypeError('"size" argument must be of type number');if(t<0)throw RangeError('The value "'+t+'" is invalid for option "size"')}function f(t){return h(t),s(t<0?0:0|p(t))}function u(t){let e=t.length<0?0:0|p(t.length),r=s(e);for(let i=0;i<e;i+=1)r[i]=255&t[i];return r}function c(t,e,r){let i;if(e<0||t.byteLength<e)throw RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(i=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r),a.prototype),i}function p(t){if(t>=2147483647)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|t}function g(t,e){if(a.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||k(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);let r=t.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===r)return 0;let n=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return M(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return P(t).length;default:if(n)return i?-1:M(t).length;e=(""+e).toLowerCase(),n=!0}}function d(t,e,r){let n=!1;if((void 0===e||e<0)&&(e=0),e>this.length||((void 0===r||r>this.length)&&(r=this.length),r<=0||(r>>>=0)<=(e>>>=0)))return"";for(t||(t="utf8");;)switch(t){case"hex":return function(t,e,r){let i=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>i)&&(r=i);let n="";for(let i=e;i<r;++i)n+=G[t[i]];return n}(this,e,r);case"utf8":case"utf-8":return b(this,e,r);case"ascii":return function(t,e,r){let i="";r=Math.min(t.length,r);for(let n=e;n<r;++n)i+=String.fromCharCode(127&t[n]);return i}(this,e,r);case"latin1":case"binary":return function(t,e,r){let i="";r=Math.min(t.length,r);for(let n=e;n<r;++n)i+=String.fromCharCode(t[n]);return i}(this,e,r);case"base64":var o,s;return o=e,s=r,0===o&&s===this.length?i.fromByteArray(this):i.fromByteArray(this.slice(o,s));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(t,e,r){let i=t.slice(e,r),n="";for(let t=0;t<i.length-1;t+=2)n+=String.fromCharCode(i[t]+256*i[t+1]);return n}(this,e,r);default:if(n)throw TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function y(t,e,r){let i=t[e];t[e]=t[r],t[r]=i}function m(t,e,r,i,n){var o;if(0===t.length)return -1;if("string"==typeof r?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),(o=r=+r)!=o&&(r=n?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(n)return -1;r=t.length-1}else if(r<0){if(!n)return -1;r=0}if("string"==typeof e&&(e=a.from(e,i)),a.isBuffer(e))return 0===e.length?-1:w(t,e,r,i,n);if("number"==typeof e)return(e&=255,"function"==typeof Uint8Array.prototype.indexOf)?n?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):w(t,[e],r,i,n);throw TypeError("val must be string, number or Buffer")}function w(t,e,r,i,n){let o,s=1,a=t.length,l=e.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(t.length<2||e.length<2)return -1;s=2,a/=2,l/=2,r/=2}function h(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(n){let i=-1;for(o=r;o<a;o++)if(h(t,o)===h(e,-1===i?0:o-i)){if(-1===i&&(i=o),o-i+1===l)return i*s}else -1!==i&&(o-=o-i),i=-1}else for(r+l>a&&(r=a-l),o=r;o>=0;o--){let r=!0;for(let i=0;i<l;i++)if(h(t,o+i)!==h(e,i)){r=!1;break}if(r)return o}return -1}function b(t,e,r){r=Math.min(t.length,r);let i=[],n=e;for(;n<r;){let e=t[n],o=null,s=e>239?4:e>223?3:e>191?2:1;if(n+s<=r){let r,i,a,l;switch(s){case 1:e<128&&(o=e);break;case 2:(192&(r=t[n+1]))==128&&(l=(31&e)<<6|63&r)>127&&(o=l);break;case 3:r=t[n+1],i=t[n+2],(192&r)==128&&(192&i)==128&&(l=(15&e)<<12|(63&r)<<6|63&i)>2047&&(l<55296||l>57343)&&(o=l);break;case 4:r=t[n+1],i=t[n+2],a=t[n+3],(192&r)==128&&(192&i)==128&&(192&a)==128&&(l=(15&e)<<18|(63&r)<<12|(63&i)<<6|63&a)>65535&&l<1114112&&(o=l)}}null===o?(o=65533,s=1):o>65535&&(o-=65536,i.push(o>>>10&1023|55296),o=56320|1023&o),i.push(o),n+=s}return function(t){let e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);let r="",i=0;for(;i<e;)r+=String.fromCharCode.apply(String,t.slice(i,i+=4096));return r}(i)}function I(t,e,r){if(t%1!=0||t<0)throw RangeError("offset is not uint");if(t+e>r)throw RangeError("Trying to access beyond buffer length")}function E(t,e,r,i,n,o){if(!a.isBuffer(t))throw TypeError('"buffer" argument must be a Buffer instance');if(e>n||e<o)throw RangeError('"value" argument is out of bounds');if(r+i>t.length)throw RangeError("Index out of range")}function A(t,e,r,i,n){O(e,i,n,t,r,7);let o=Number(e&BigInt(4294967295));t[r++]=o,o>>=8,t[r++]=o,o>>=8,t[r++]=o,o>>=8,t[r++]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=s,s>>=8,t[r++]=s,s>>=8,t[r++]=s,s>>=8,t[r++]=s,r}function S(t,e,r,i,n){O(e,i,n,t,r,7);let o=Number(e&BigInt(4294967295));t[r+7]=o,o>>=8,t[r+6]=o,o>>=8,t[r+5]=o,o>>=8,t[r+4]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=s,s>>=8,t[r+2]=s,s>>=8,t[r+1]=s,s>>=8,t[r]=s,r+8}function T(t,e,r,i,n,o){if(r+i>t.length||r<0)throw RangeError("Index out of range")}function B(t,e,r,i,o){return e=+e,r>>>=0,o||T(t,e,r,4,34028234663852886e22,-34028234663852886e22),n.write(t,e,r,i,23,4),r+4}function U(t,e,r,i,o){return e=+e,r>>>=0,o||T(t,e,r,8,17976931348623157e292,-17976931348623157e292),n.write(t,e,r,i,52,8),r+8}e.lW=a,e.h2=50,a.TYPED_ARRAY_SUPPORT=function(){try{let t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),a.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}}),a.poolSize=8192,a.from=function(t,e,r){return l(t,e,r)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array),a.alloc=function(t,e,r){return(h(t),t<=0)?s(t):void 0!==e?"string"==typeof r?s(t).fill(e,r):s(t).fill(e):s(t)},a.allocUnsafe=function(t){return f(t)},a.allocUnsafeSlow=function(t){return f(t)},a.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==a.prototype},a.compare=function(t,e){if(k(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),k(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),!a.isBuffer(t)||!a.isBuffer(e))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let r=t.length,i=e.length;for(let n=0,o=Math.min(r,i);n<o;++n)if(t[n]!==e[n]){r=t[n],i=e[n];break}return r<i?-1:i<r?1:0},a.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(t,e){let r;if(!Array.isArray(t))throw TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return a.alloc(0);if(void 0===e)for(r=0,e=0;r<t.length;++r)e+=t[r].length;let i=a.allocUnsafe(e),n=0;for(r=0;r<t.length;++r){let e=t[r];if(k(e,Uint8Array))n+e.length>i.length?(a.isBuffer(e)||(e=a.from(e)),e.copy(i,n)):Uint8Array.prototype.set.call(i,e,n);else if(a.isBuffer(e))e.copy(i,n);else throw TypeError('"list" argument must be an Array of Buffers');n+=e.length}return i},a.byteLength=g,a.prototype._isBuffer=!0,a.prototype.swap16=function(){let t=this.length;if(t%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)y(this,e,e+1);return this},a.prototype.swap32=function(){let t=this.length;if(t%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)y(this,e,e+3),y(this,e+1,e+2);return this},a.prototype.swap64=function(){let t=this.length;if(t%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)y(this,e,e+7),y(this,e+1,e+6),y(this,e+2,e+5),y(this,e+3,e+4);return this},a.prototype.toString=function(){let t=this.length;return 0===t?"":0==arguments.length?b(this,0,t):d.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(t){if(!a.isBuffer(t))throw TypeError("Argument must be a Buffer");return this===t||0===a.compare(this,t)},a.prototype.inspect=function(){let t="",r=e.h2;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"},o&&(a.prototype[o]=a.prototype.inspect),a.prototype.compare=function(t,e,r,i,n){if(k(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),!a.isBuffer(t))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===i&&(i=0),void 0===n&&(n=this.length),e<0||r>t.length||i<0||n>this.length)throw RangeError("out of range index");if(i>=n&&e>=r)return 0;if(i>=n)return -1;if(e>=r)return 1;if(e>>>=0,r>>>=0,i>>>=0,n>>>=0,this===t)return 0;let o=n-i,s=r-e,l=Math.min(o,s),h=this.slice(i,n),f=t.slice(e,r);for(let t=0;t<l;++t)if(h[t]!==f[t]){o=h[t],s=f[t];break}return o<s?-1:s<o?1:0},a.prototype.includes=function(t,e,r){return -1!==this.indexOf(t,e,r)},a.prototype.indexOf=function(t,e,r){return m(this,t,e,r,!0)},a.prototype.lastIndexOf=function(t,e,r){return m(this,t,e,r,!1)},a.prototype.write=function(t,e,r,i){var n,o,s,a,l,h,f,u;if(void 0===e)i="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)i=e,r=this.length,e=0;else if(isFinite(e))e>>>=0,isFinite(r)?(r>>>=0,void 0===i&&(i="utf8")):(i=r,r=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let c=this.length-e;if((void 0===r||r>c)&&(r=c),t.length>0&&(r<0||e<0)||e>this.length)throw RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let p=!1;for(;;)switch(i){case"hex":return function(t,e,r,i){let n;r=Number(r)||0;let o=t.length-r;i?(i=Number(i))>o&&(i=o):i=o;let s=e.length;for(i>s/2&&(i=s/2),n=0;n<i;++n){let i=parseInt(e.substr(2*n,2),16);if(i!=i)break;t[r+n]=i}return n}(this,t,e,r);case"utf8":case"utf-8":return n=e,o=r,L(M(t,this.length-n),this,n,o);case"ascii":case"latin1":case"binary":return s=e,a=r,L(function(t){let e=[];for(let r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(t),this,s,a);case"base64":return l=e,h=r,L(P(t),this,l,h);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return f=e,u=r,L(function(t,e){let r,i;let n=[];for(let o=0;o<t.length&&!((e-=2)<0);++o)i=(r=t.charCodeAt(o))>>8,n.push(r%256),n.push(i);return n}(t,this.length-f),this,f,u);default:if(p)throw TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),p=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},a.prototype.slice=function(t,e){let r=this.length;t=~~t,e=void 0===e?r:~~e,t<0?(t+=r)<0&&(t=0):t>r&&(t=r),e<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t);let i=this.subarray(t,e);return Object.setPrototypeOf(i,a.prototype),i},a.prototype.readUintLE=a.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||I(t,e,this.length);let i=this[t],n=1,o=0;for(;++o<e&&(n*=256);)i+=this[t+o]*n;return i},a.prototype.readUintBE=a.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||I(t,e,this.length);let i=this[t+--e],n=1;for(;e>0&&(n*=256);)i+=this[t+--e]*n;return i},a.prototype.readUint8=a.prototype.readUInt8=function(t,e){return t>>>=0,e||I(t,1,this.length),this[t]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(t,e){return t>>>=0,e||I(t,2,this.length),this[t]|this[t+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(t,e){return t>>>=0,e||I(t,2,this.length),this[t]<<8|this[t+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(t,e){return t>>>=0,e||I(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(t,e){return t>>>=0,e||I(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},a.prototype.readBigUInt64LE=F(function(t){C(t>>>=0,"offset");let e=this[t],r=this[t+7];(void 0===e||void 0===r)&&_(t,this.length-8);let i=e+256*this[++t]+65536*this[++t]+16777216*this[++t],n=this[++t]+256*this[++t]+65536*this[++t]+16777216*r;return BigInt(i)+(BigInt(n)<<BigInt(32))}),a.prototype.readBigUInt64BE=F(function(t){C(t>>>=0,"offset");let e=this[t],r=this[t+7];(void 0===e||void 0===r)&&_(t,this.length-8);let i=16777216*e+65536*this[++t]+256*this[++t]+this[++t],n=16777216*this[++t]+65536*this[++t]+256*this[++t]+r;return(BigInt(i)<<BigInt(32))+BigInt(n)}),a.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||I(t,e,this.length);let i=this[t],n=1,o=0;for(;++o<e&&(n*=256);)i+=this[t+o]*n;return i>=(n*=128)&&(i-=Math.pow(2,8*e)),i},a.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||I(t,e,this.length);let i=e,n=1,o=this[t+--i];for(;i>0&&(n*=256);)o+=this[t+--i]*n;return o>=(n*=128)&&(o-=Math.pow(2,8*e)),o},a.prototype.readInt8=function(t,e){return(t>>>=0,e||I(t,1,this.length),128&this[t])?-((255-this[t]+1)*1):this[t]},a.prototype.readInt16LE=function(t,e){t>>>=0,e||I(t,2,this.length);let r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},a.prototype.readInt16BE=function(t,e){t>>>=0,e||I(t,2,this.length);let r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},a.prototype.readInt32LE=function(t,e){return t>>>=0,e||I(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},a.prototype.readInt32BE=function(t,e){return t>>>=0,e||I(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},a.prototype.readBigInt64LE=F(function(t){C(t>>>=0,"offset");let e=this[t],r=this[t+7];return(void 0===e||void 0===r)&&_(t,this.length-8),(BigInt(this[t+4]+256*this[t+5]+65536*this[t+6]+(r<<24))<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+16777216*this[++t])}),a.prototype.readBigInt64BE=F(function(t){C(t>>>=0,"offset");let e=this[t],r=this[t+7];return(void 0===e||void 0===r)&&_(t,this.length-8),(BigInt((e<<24)+65536*this[++t]+256*this[++t]+this[++t])<<BigInt(32))+BigInt(16777216*this[++t]+65536*this[++t]+256*this[++t]+r)}),a.prototype.readFloatLE=function(t,e){return t>>>=0,e||I(t,4,this.length),n.read(this,t,!0,23,4)},a.prototype.readFloatBE=function(t,e){return t>>>=0,e||I(t,4,this.length),n.read(this,t,!1,23,4)},a.prototype.readDoubleLE=function(t,e){return t>>>=0,e||I(t,8,this.length),n.read(this,t,!0,52,8)},a.prototype.readDoubleBE=function(t,e){return t>>>=0,e||I(t,8,this.length),n.read(this,t,!1,52,8)},a.prototype.writeUintLE=a.prototype.writeUIntLE=function(t,e,r,i){if(t=+t,e>>>=0,r>>>=0,!i){let i=Math.pow(2,8*r)-1;E(this,t,e,r,i,0)}let n=1,o=0;for(this[e]=255&t;++o<r&&(n*=256);)this[e+o]=t/n&255;return e+r},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(t,e,r,i){if(t=+t,e>>>=0,r>>>=0,!i){let i=Math.pow(2,8*r)-1;E(this,t,e,r,i,0)}let n=r-1,o=1;for(this[e+n]=255&t;--n>=0&&(o*=256);)this[e+n]=t/o&255;return e+r},a.prototype.writeUint8=a.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||E(this,t,e,1,255,0),this[e]=255&t,e+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||E(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||E(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||E(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||E(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},a.prototype.writeBigUInt64LE=F(function(t,e=0){return A(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=F(function(t,e=0){return S(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(t,e,r,i){if(t=+t,e>>>=0,!i){let i=Math.pow(2,8*r-1);E(this,t,e,r,i-1,-i)}let n=0,o=1,s=0;for(this[e]=255&t;++n<r&&(o*=256);)t<0&&0===s&&0!==this[e+n-1]&&(s=1),this[e+n]=(t/o>>0)-s&255;return e+r},a.prototype.writeIntBE=function(t,e,r,i){if(t=+t,e>>>=0,!i){let i=Math.pow(2,8*r-1);E(this,t,e,r,i-1,-i)}let n=r-1,o=1,s=0;for(this[e+n]=255&t;--n>=0&&(o*=256);)t<0&&0===s&&0!==this[e+n+1]&&(s=1),this[e+n]=(t/o>>0)-s&255;return e+r},a.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||E(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},a.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||E(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},a.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||E(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},a.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||E(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},a.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||E(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},a.prototype.writeBigInt64LE=F(function(t,e=0){return A(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=F(function(t,e=0){return S(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeFloatLE=function(t,e,r){return B(this,t,e,!0,r)},a.prototype.writeFloatBE=function(t,e,r){return B(this,t,e,!1,r)},a.prototype.writeDoubleLE=function(t,e,r){return U(this,t,e,!0,r)},a.prototype.writeDoubleBE=function(t,e,r){return U(this,t,e,!1,r)},a.prototype.copy=function(t,e,r,i){if(!a.isBuffer(t))throw TypeError("argument should be a Buffer");if(r||(r=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&i<r&&(i=r),i===r||0===t.length||0===this.length)return 0;if(e<0)throw RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw RangeError("Index out of range");if(i<0)throw RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-r&&(i=t.length-e+r);let n=i-r;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,r,i):Uint8Array.prototype.set.call(t,this.subarray(r,i),e),n},a.prototype.fill=function(t,e,r,i){let n;if("string"==typeof t){if("string"==typeof e?(i=e,e=0,r=this.length):"string"==typeof r&&(i=r,r=this.length),void 0!==i&&"string"!=typeof i)throw TypeError("encoding must be a string");if("string"==typeof i&&!a.isEncoding(i))throw TypeError("Unknown encoding: "+i);if(1===t.length){let e=t.charCodeAt(0);("utf8"===i&&e<128||"latin1"===i)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<r)throw RangeError("Out of range index");if(r<=e)return this;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(n=e;n<r;++n)this[n]=t;else{let o=a.isBuffer(t)?t:a.from(t,i),s=o.length;if(0===s)throw TypeError('The value "'+t+'" is invalid for argument "value"');for(n=0;n<r-e;++n)this[n+e]=o[n%s]}return this};let x={};function v(t,e,r){x[t]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function R(t){let e="",r=t.length,i="-"===t[0]?1:0;for(;r>=i+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function O(t,e,r,i,n,o){if(t>r||t<e){let i;let n="bigint"==typeof e?"n":"";throw i=o>3?0===e||e===BigInt(0)?`>= 0${n} and < 2${n} ** ${(o+1)*8}${n}`:`>= -(2${n} ** ${(o+1)*8-1}${n}) and < 2 ** ${(o+1)*8-1}${n}`:`>= ${e}${n} and <= ${r}${n}`,new x.ERR_OUT_OF_RANGE("value",i,t)}C(n,"offset"),(void 0===i[n]||void 0===i[n+o])&&_(n,i.length-(o+1))}function C(t,e){if("number"!=typeof t)throw new x.ERR_INVALID_ARG_TYPE(e,"number",t)}function _(t,e,r){if(Math.floor(t)!==t)throw C(t,r),new x.ERR_OUT_OF_RANGE(r||"offset","an integer",t);if(e<0)throw new x.ERR_BUFFER_OUT_OF_BOUNDS;throw new x.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}v("ERR_BUFFER_OUT_OF_BOUNDS",function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),v("ERR_INVALID_ARG_TYPE",function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`},TypeError),v("ERR_OUT_OF_RANGE",function(t,e,r){let i=`The value of "${t}" is out of range.`,n=r;return Number.isInteger(r)&&Math.abs(r)>4294967296?n=R(String(r)):"bigint"==typeof r&&(n=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(n=R(n)),n+="n"),i+=` It must be ${e}. Received ${n}`},RangeError);let D=/[^+/0-9A-Za-z-_]/g;function M(t,e){let r;e=e||1/0;let i=t.length,n=null,o=[];for(let s=0;s<i;++s){if((r=t.charCodeAt(s))>55295&&r<57344){if(!n){if(r>56319||s+1===i){(e-=3)>-1&&o.push(239,191,189);continue}n=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),n=r;continue}r=(n-55296<<10|r-56320)+65536}else n&&(e-=3)>-1&&o.push(239,191,189);if(n=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else if(r<1114112){if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}else throw Error("Invalid code point")}return o}function P(t){return i.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(D,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function L(t,e,r,i){let n;for(n=0;n<i&&!(n+r>=e.length)&&!(n>=t.length);++n)e[n+r]=t[n];return n}function k(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}let G=function(){let t="0123456789abcdef",e=Array(256);for(let r=0;r<16;++r){let i=16*r;for(let n=0;n<16;++n)e[i+n]=t[r]+t[n]}return e}();function F(t){return"undefined"==typeof BigInt?N:t}function N(){throw Error("BigInt not supported")}},32119:function(t,e){e.read=function(t,e,r,i,n){var o,s,a=8*n-i-1,l=(1<<a)-1,h=l>>1,f=-7,u=r?n-1:0,c=r?-1:1,p=t[e+u];for(u+=c,o=p&(1<<-f)-1,p>>=-f,f+=a;f>0;o=256*o+t[e+u],u+=c,f-=8);for(s=o&(1<<-f)-1,o>>=-f,f+=i;f>0;s=256*s+t[e+u],u+=c,f-=8);if(0===o)o=1-h;else{if(o===l)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,i),o-=h}return(p?-1:1)*s*Math.pow(2,o-i)},e.write=function(t,e,r,i,n,o){var s,a,l,h=8*o-n-1,f=(1<<h)-1,u=f>>1,c=23===n?5960464477539062e-23:0,p=i?0:o-1,g=i?1:-1,d=e<0||0===e&&1/e<0?1:0;for(isNaN(e=Math.abs(e))||e===1/0?(a=isNaN(e)?1:0,s=f):(s=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-s))<1&&(s--,l*=2),s+u>=1?e+=c/l:e+=c*Math.pow(2,1-u),e*l>=2&&(s++,l/=2),s+u>=f?(a=0,s=f):s+u>=1?(a=(e*l-1)*Math.pow(2,n),s+=u):(a=e*Math.pow(2,u-1)*Math.pow(2,n),s=0));n>=8;t[r+p]=255&a,p+=g,a/=256,n-=8);for(s=s<<n|a,h+=n;h>0;t[r+p]=255&s,p+=g,s/=256,h-=8);t[r+p-g]|=128*d}},31471:function(t,e,r){"use strict";function i(t){return(e,...r)=>o(t,e,r)}function n(t,e){return i(h(t,e).get)}r.d(e,{W0:function(){return t2}});let{apply:o,construct:s,defineProperty:a,get:l,getOwnPropertyDescriptor:h,getPrototypeOf:f,has:u,ownKeys:c,set:p,setPrototypeOf:g}=Reflect,{EPSILON:d,MAX_SAFE_INTEGER:y,isFinite:m,isNaN:w}=Number,{iterator:b,species:I,toStringTag:E,for:A}=Symbol,S=Object,{create:T,defineProperty:B,freeze:U,is:x}=S,v=S.prototype;v.__lookupGetter__&&i(v.__lookupGetter__),S.hasOwn||i(v.hasOwnProperty);let R=Array;R.isArray;let O=R.prototype;i(O.join),i(O.push),i(O.toLocaleString);let C=O[b],_=i(C),{abs:D,trunc:M}=Math,P=ArrayBuffer;P.isView;let L=P.prototype;i(L.slice),n(L,"byteLength");let k="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:null;k&&n(k.prototype,"byteLength");let G=f(Uint8Array);G.from;let F=G.prototype;F[b],i(F.keys),i(F.values),i(F.entries),i(F.set),i(F.reverse),i(F.fill),i(F.copyWithin),i(F.sort),i(F.slice),i(F.subarray),n(F,"buffer"),n(F,"byteOffset"),n(F,"length"),n(F,E);let N=Uint8Array,z=Uint16Array,j=Uint32Array,V=Float32Array,K=f([][b]()),$=i(K.next),q=i(function*(){}().next),H=f(K),W=DataView.prototype,Y=i(W.getUint16);i(W.setUint16);let X=WeakSet.prototype;i(X.add),i(X.has);let Z=WeakMap,J=Z.prototype,Q=i(J.get);i(J.has);let tt=i(J.set),te=new Z,tr=T(null,{next:{value:function(){return $(Q(te,this))}},[b]:{value:function(){return this}}}),ti=new Z,tn=T(H,{next:{value:function(){return q(Q(ti,this))},writable:!0,configurable:!0}});for(let t of c(K))"next"!==t&&B(tn,t,h(K,t));let to=new P(4),ts=new V(to),ta=new j(to),tl=new z(512),th=new N(512);for(let t=0;t<256;++t){let e=t-127;e<-24?(tl[t]=0,tl[256|t]=32768,th[t]=24,th[256|t]=24):e<-14?(tl[t]=1024>>-e-14,tl[256|t]=1024>>-e-14|32768,th[t]=-e-1,th[256|t]=-e-1):e<=15?(tl[t]=e+15<<10,tl[256|t]=e+15<<10|32768,th[t]=13,th[256|t]=13):e<128?(tl[t]=31744,tl[256|t]=64512,th[t]=24,th[256|t]=24):(tl[t]=31744,tl[256|t]=64512,th[t]=13,th[256|t]=13)}let tf=new j(2048);for(let t=1;t<1024;++t){let e=t<<13,r=0;for(;(8388608&e)==0;)e<<=1,r-=8388608;e&=-8388609,r+=947912704,tf[t]=e|r}for(let t=1024;t<2048;++t)tf[t]=939524096+(t-1024<<13);let tu=new j(64);for(let t=1;t<31;++t)tu[t]=t<<23;tu[31]=1199570944,tu[32]=2147483648;for(let t=33;t<63;++t)tu[t]=2147483648+(t-32<<23);tu[63]=3347054592;let tc=new z(64);for(let t=1;t<64;++t)32!==t&&(tc[t]=1024);function tp(t,e,...r){return function(t){let e=t>>10;return ta[0]=tf[tc[e]+(1023&t)]+tu[e],ts[0]}(Y(t,e,...function(t){if(t[b]===C&&K.next===$)return t;let e=T(tr);return tt(te,e,_(t)),e}(r)))}var tg=r(19410),td=r(1049),ty=r(72093);let tm=new Map;function tw(t,e){Array.isArray(t)||(t=[t]),t.forEach(t=>tm.set(t,e))}async function tb(t){let e=tm.get(t.Compression);if(!e)throw Error(`Unknown compression method identifier: ${t.Compression}`);return new(await e())(t)}function tI(t,e,r,i=1){return new(Object.getPrototypeOf(t)).constructor(e*r*i)}function tE(t,e,r){switch(t){case 1:if(e<=8)return new Uint8Array(r);if(e<=16)return new Uint16Array(r);if(e<=32)return new Uint32Array(r);break;case 2:if(8===e)return new Int8Array(r);if(16===e)return new Int16Array(r);if(32===e)return new Int32Array(r);break;case 3:switch(e){case 16:case 32:return new Float32Array(r);case 64:return new Float64Array(r)}}throw Error("Unsupported data format/bitsPerSample")}tw([void 0,1],()=>r.e(229).then(r.bind(r,90229)).then(t=>t.default)),tw(5,()=>r.e(1203).then(r.bind(r,51203)).then(t=>t.default)),tw(6,()=>{throw Error("old style JPEG compression is not supported.")}),tw(7,()=>r.e(8737).then(r.bind(r,38737)).then(t=>t.default)),tw([8,32946],()=>Promise.all([r.e(3125),r.e(9630)]).then(r.bind(r,69630)).then(t=>t.default)),tw(32773,()=>r.e(6229).then(r.bind(r,6229)).then(t=>t.default)),tw(34887,()=>Promise.all([r.e(3125),r.e(3844)]).then(r.bind(r,43844)).then(async t=>(await t.zstd.init(),t)).then(t=>t.default)),tw(50001,()=>r.e(8593).then(r.bind(r,88593)).then(t=>t.default));class tA{constructor(t,e,r,i,n,o){this.fileDirectory=t,this.geoKeys=e,this.dataView=r,this.littleEndian=i,this.tiles=n?{}:null,this.isTiled=!t.StripOffsets;let s=t.PlanarConfiguration;if(this.planarConfiguration=void 0===s?1:s,1!==this.planarConfiguration&&2!==this.planarConfiguration)throw Error("Invalid planar configuration.");this.source=o}getFileDirectory(){return this.fileDirectory}getGeoKeys(){return this.geoKeys}getWidth(){return this.fileDirectory.ImageWidth}getHeight(){return this.fileDirectory.ImageLength}getSamplesPerPixel(){return void 0!==this.fileDirectory.SamplesPerPixel?this.fileDirectory.SamplesPerPixel:1}getTileWidth(){return this.isTiled?this.fileDirectory.TileWidth:this.getWidth()}getTileHeight(){return this.isTiled?this.fileDirectory.TileLength:void 0!==this.fileDirectory.RowsPerStrip?Math.min(this.fileDirectory.RowsPerStrip,this.getHeight()):this.getHeight()}getBlockWidth(){return this.getTileWidth()}getBlockHeight(t){return this.isTiled||(t+1)*this.getTileHeight()<=this.getHeight()?this.getTileHeight():this.getHeight()-t*this.getTileHeight()}getBytesPerPixel(){let t=0;for(let e=0;e<this.fileDirectory.BitsPerSample.length;++e)t+=this.getSampleByteSize(e);return t}getSampleByteSize(t){if(t>=this.fileDirectory.BitsPerSample.length)throw RangeError(`Sample index ${t} is out of range.`);return Math.ceil(this.fileDirectory.BitsPerSample[t]/8)}getReaderForSample(t){let e=this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[t]:1,r=this.fileDirectory.BitsPerSample[t];switch(e){case 1:if(r<=8)return DataView.prototype.getUint8;if(r<=16)return DataView.prototype.getUint16;if(r<=32)return DataView.prototype.getUint32;break;case 2:if(r<=8)return DataView.prototype.getInt8;if(r<=16)return DataView.prototype.getInt16;if(r<=32)return DataView.prototype.getInt32;break;case 3:switch(r){case 16:return function(t,e){return tp(this,t,e)};case 32:return DataView.prototype.getFloat32;case 64:return DataView.prototype.getFloat64}}throw Error("Unsupported data format/bitsPerSample")}getSampleFormat(t=0){return this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[t]:1}getBitsPerSample(t=0){return this.fileDirectory.BitsPerSample[t]}getArrayForSample(t,e){return tE(this.getSampleFormat(t),this.getBitsPerSample(t),e)}async getTileOrStrip(t,e,r,i,n){let o,s,a,l;let h=Math.ceil(this.getWidth()/this.getTileWidth()),f=Math.ceil(this.getHeight()/this.getTileHeight()),{tiles:u}=this;1===this.planarConfiguration?o=e*h+t:2===this.planarConfiguration&&(o=r*h*f+e*h+t),this.isTiled?(s=this.fileDirectory.TileOffsets[o],a=this.fileDirectory.TileByteCounts[o]):(s=this.fileDirectory.StripOffsets[o],a=this.fileDirectory.StripByteCounts[o]);let c=(await this.source.fetch([{offset:s,length:a}],n))[0];return null!==u&&u[o]?l=u[o]:(l=(async()=>{let t=await i.decode(this.fileDirectory,c),r=this.getSampleFormat(),n=this.getBitsPerSample();return(1===r||2===r)&&n<=32&&n%8==0||3===r&&(16===n||32===n||64===n)||(t=function(t,e,r,i,n,o,s){let a=new DataView(t),l=2===r?1:i,h=tE(e,n,2===r?s*o:s*o*i),f=parseInt("1".repeat(n),2);if(1===e){let t=o*(1===r?i*n:n);(7&t)!=0&&(t=t+7&-8);for(let e=0;e<s;++e){let r=e*t;for(let t=0;t<o;++t){let i=r+t*l*n;for(let r=0;r<l;++r){let s=i+r*n,u=(e*o+t)*l+r,c=Math.floor(s/8),p=s%8;if(p+n<=8)h[u]=a.getUint8(c)>>8-n-p&f;else if(p+n<=16)h[u]=a.getUint16(c)>>16-n-p&f;else if(p+n<=24){let t=a.getUint16(c)<<8|a.getUint8(c+2);h[u]=t>>24-n-p&f}else h[u]=a.getUint32(c)>>32-n-p&f}}}}return h.buffer}(t,r,this.planarConfiguration,this.getSamplesPerPixel(),n,this.getTileWidth(),this.getBlockHeight(e))),t})(),null!==u&&(u[o]=l)),{x:t,y:e,sample:r,data:await l}}async _readRaster(t,e,r,i,n,o,s,a,l){let h=this.getTileWidth(),f=this.getTileHeight(),u=this.getWidth(),c=this.getHeight(),p=Math.max(Math.floor(t[0]/h),0),g=Math.min(Math.ceil(t[2]/h),Math.ceil(u/h)),d=Math.max(Math.floor(t[1]/f),0),y=Math.min(Math.ceil(t[3]/f),Math.ceil(c/f)),m=t[2]-t[0],w=this.getBytesPerPixel(),b=[],I=[];for(let t=0;t<e.length;++t)1===this.planarConfiguration?b.push(function(t,e,r){let i=0;for(let e=0;e<r;++e)i+=t[e];return i}(this.fileDirectory.BitsPerSample,0,e[t])/8):b.push(0),I.push(this.getReaderForSample(e[t]));let E=[],{littleEndian:A}=this;for(let o=d;o<y;++o)for(let s=p;s<g;++s){let a;1===this.planarConfiguration&&(a=this.getTileOrStrip(s,o,0,n,l));for(let p=0;p<e.length;++p){let g=p,d=e[p];2===this.planarConfiguration&&(w=this.getSampleByteSize(d),a=this.getTileOrStrip(s,o,d,n,l));let y=a.then(n=>{let o=new DataView(n.data),s=this.getBlockHeight(n.y),a=n.y*f,l=n.x*h,p=a+s,d=(n.x+1)*h,y=I[g],E=Math.min(s,s-(p-t[3]),c-a),S=Math.min(h,h-(d-t[2]),u-l);for(let n=Math.max(0,t[1]-a);n<E;++n)for(let s=Math.max(0,t[0]-l);s<S;++s){let f;let u=(n*h+s)*w,c=y.call(o,u+b[g],A);i?r[f=(n+a-t[1])*m*e.length+(s+l-t[0])*e.length+g]=c:(f=(n+a-t[1])*m+s+l-t[0],r[g][f]=c)}});E.push(y)}}if(await Promise.all(E),o&&t[2]-t[0]!==o||s&&t[3]-t[1]!==s){let n;return(n=i?function(t,e,r,i,n,o,s="nearest"){switch(s.toLowerCase()){case"nearest":return function(t,e,r,i,n,o){let s=e/i,a=r/n,l=tI(t,i,n,o);for(let h=0;h<n;++h){let n=Math.min(Math.round(a*h),r-1);for(let r=0;r<i;++r){let a=Math.min(Math.round(s*r),e-1);for(let s=0;s<o;++s){let f=t[n*e*o+a*o+s];l[h*i*o+r*o+s]=f}}}return l}(t,e,r,i,n,o);case"bilinear":case"linear":return function(t,e,r,i,n,o){let s=e/i,a=r/n,l=tI(t,i,n,o);for(let c=0;c<n;++c){let n=a*c,p=Math.floor(n),g=Math.min(Math.ceil(n),r-1);for(let r=0;r<i;++r){let a=s*r,d=a%1,y=Math.floor(a),m=Math.min(Math.ceil(a),e-1);for(let s=0;s<o;++s){var h,f,u;let a=t[p*e*o+y*o+s],w=t[p*e*o+m*o+s],b=t[g*e*o+y*o+s],I=t[g*e*o+m*o+s],E=(h=(1-d)*a+d*w,f=(1-d)*b+d*I,(1-(u=n%1))*h+u*f);l[c*i*o+r*o+s]=E}}}return l}(t,e,r,i,n,o);default:throw Error(`Unsupported resampling method: '${s}'`)}}(r,t[2]-t[0],t[3]-t[1],o,s,e.length,a):function(t,e,r,i,n,o="nearest"){switch(o.toLowerCase()){case"nearest":return function(t,e,r,i,n){let o=e/i,s=r/n;return t.map(t=>{let a=tI(t,i,n);for(let l=0;l<n;++l){let n=Math.min(Math.round(s*l),r-1);for(let r=0;r<i;++r){let s=Math.min(Math.round(o*r),e-1),h=t[n*e+s];a[l*i+r]=h}}return a})}(t,e,r,i,n);case"bilinear":case"linear":return function(t,e,r,i,n){let o=e/i,s=r/n;return t.map(t=>{let a=tI(t,i,n);for(let u=0;u<n;++u){let n=s*u,c=Math.floor(n),p=Math.min(Math.ceil(n),r-1);for(let r=0;r<i;++r){var l,h,f;let s=o*r,g=s%1,d=Math.floor(s),y=Math.min(Math.ceil(s),e-1),m=t[c*e+d],w=t[c*e+y],b=t[p*e+d],I=t[p*e+y],E=(l=(1-g)*m+g*w,h=(1-g)*b+g*I,(1-(f=n%1))*l+f*h);a[u*i+r]=E}}return a})}(t,e,r,i,n);default:throw Error(`Unsupported resampling method: '${o}'`)}}(r,t[2]-t[0],t[3]-t[1],o,s,a)).width=o,n.height=s,n}return r.width=o||t[2]-t[0],r.height=s||t[3]-t[1],r}async readRasters({window:t,samples:e=[],interleave:r,pool:i=null,width:n,height:o,resampleMethod:s,fillValue:a,signal:l}={}){let h;let f=t||[0,0,this.getWidth(),this.getHeight()];if(f[0]>f[2]||f[1]>f[3])throw Error("Invalid subsets");let u=(f[2]-f[0])*(f[3]-f[1]),c=this.getSamplesPerPixel();if(e&&e.length){for(let t=0;t<e.length;++t)if(e[t]>=c)return Promise.reject(RangeError(`Invalid sample index '${e[t]}'.`))}else for(let t=0;t<c;++t)e.push(t);if(r)h=tE(this.fileDirectory.SampleFormat?Math.max.apply(null,this.fileDirectory.SampleFormat):1,Math.max.apply(null,this.fileDirectory.BitsPerSample),u*e.length),a&&h.fill(a);else{h=[];for(let t=0;t<e.length;++t){let r=this.getArrayForSample(e[t],u);Array.isArray(a)&&t<a.length?r.fill(a[t]):a&&!Array.isArray(a)&&r.fill(a),h.push(r)}}let p=i||await tb(this.fileDirectory);return await this._readRaster(f,e,h,r,p,n,o,s,l)}async readRGB({window:t,interleave:e=!0,pool:r=null,width:i,height:n,resampleMethod:o,enableAlpha:s=!1,signal:a}={}){let l,h;let f=t||[0,0,this.getWidth(),this.getHeight()];if(f[0]>f[2]||f[1]>f[3])throw Error("Invalid subsets");let u=this.fileDirectory.PhotometricInterpretation;if(u===ty.Ie.RGB){let l=[0,1,2];if(this.fileDirectory.ExtraSamples!==ty.pd.Unspecified&&s){l=[];for(let t=0;t<this.fileDirectory.BitsPerSample.length;t+=1)l.push(t)}return this.readRasters({window:t,interleave:e,samples:l,pool:r,width:i,height:n,resampleMethod:o,signal:a})}switch(u){case ty.Ie.WhiteIsZero:case ty.Ie.BlackIsZero:case ty.Ie.Palette:l=[0];break;case ty.Ie.CMYK:l=[0,1,2,3];break;case ty.Ie.YCbCr:case ty.Ie.CIELab:l=[0,1,2];break;default:throw Error("Invalid or unsupported photometric interpretation.")}let c={window:f,interleave:!0,samples:l,pool:r,width:i,height:n,resampleMethod:o,signal:a},{fileDirectory:p}=this,g=await this.readRasters(c),d=2**this.fileDirectory.BitsPerSample[0];switch(u){case ty.Ie.WhiteIsZero:h=function(t,e){let r;let{width:i,height:n}=t,o=new Uint8Array(i*n*3);for(let i=0,n=0;i<t.length;++i,n+=3)r=256-t[i]/e*256,o[n]=r,o[n+1]=r,o[n+2]=r;return o}(g,d);break;case ty.Ie.BlackIsZero:h=function(t,e){let r;let{width:i,height:n}=t,o=new Uint8Array(i*n*3);for(let i=0,n=0;i<t.length;++i,n+=3)r=t[i]/e*256,o[n]=r,o[n+1]=r,o[n+2]=r;return o}(g,d);break;case ty.Ie.Palette:h=function(t,e){let{width:r,height:i}=t,n=new Uint8Array(r*i*3),o=e.length/3,s=e.length/3*2;for(let r=0,i=0;r<t.length;++r,i+=3){let a=t[r];n[i]=e[a]/65536*256,n[i+1]=e[a+o]/65536*256,n[i+2]=e[a+s]/65536*256}return n}(g,p.ColorMap);break;case ty.Ie.CMYK:h=function(t){let{width:e,height:r}=t,i=new Uint8Array(e*r*3);for(let e=0,r=0;e<t.length;e+=4,r+=3){let n=t[e],o=t[e+1],s=t[e+2],a=t[e+3];i[r]=(255-n)/256*255*((255-a)/256),i[r+1]=(255-o)/256*255*((255-a)/256),i[r+2]=(255-s)/256*255*((255-a)/256)}return i}(g);break;case ty.Ie.YCbCr:h=function(t){let{width:e,height:r}=t,i=new Uint8ClampedArray(e*r*3);for(let e=0,r=0;e<t.length;e+=3,r+=3){let n=t[e],o=t[e+1],s=t[e+2];i[r]=n+1.402*(s-128),i[r+1]=n-.34414*(o-128)-.71414*(s-128),i[r+2]=n+1.772*(o-128)}return i}(g);break;case ty.Ie.CIELab:h=function(t){let{width:e,height:r}=t,i=new Uint8Array(e*r*3);for(let e=0,r=0;e<t.length;e+=3,r+=3){let n,o,s;let a=t[e+0],l=t[e+1]<<24>>24,h=t[e+2]<<24>>24,f=(a+16)/116,u=l/500+f,c=f-h/200;n=(n=3.2406*(u=.95047*(u*u*u>.008856?u*u*u:(u-16/116)/7.787))+-1.5372*(f=1*(f*f*f>.008856?f*f*f:(f-16/116)/7.787))+-.4986*(c=1.08883*(c*c*c>.008856?c*c*c:(c-16/116)/7.787)))>.0031308?1.055*n**(1/2.4)-.055:12.92*n,o=(o=-.9689*u+1.8758*f+.0415*c)>.0031308?1.055*o**(1/2.4)-.055:12.92*o,s=(s=.0557*u+-.204*f+1.057*c)>.0031308?1.055*s**(1/2.4)-.055:12.92*s,i[r]=255*Math.max(0,Math.min(1,n)),i[r+1]=255*Math.max(0,Math.min(1,o)),i[r+2]=255*Math.max(0,Math.min(1,s))}return i}(g);break;default:throw Error("Unsupported photometric interpretation.")}if(!e){let t=new Uint8Array(h.length/3),e=new Uint8Array(h.length/3),r=new Uint8Array(h.length/3);for(let i=0,n=0;i<h.length;i+=3,++n)t[n]=h[i],e[n]=h[i+1],r[n]=h[i+2];h=[t,e,r]}return h.width=g.width,h.height=g.height,h}getTiePoints(){if(!this.fileDirectory.ModelTiepoint)return[];let t=[];for(let e=0;e<this.fileDirectory.ModelTiepoint.length;e+=6)t.push({i:this.fileDirectory.ModelTiepoint[e],j:this.fileDirectory.ModelTiepoint[e+1],k:this.fileDirectory.ModelTiepoint[e+2],x:this.fileDirectory.ModelTiepoint[e+3],y:this.fileDirectory.ModelTiepoint[e+4],z:this.fileDirectory.ModelTiepoint[e+5]});return t}getGDALMetadata(t=null){let e={};if(!this.fileDirectory.GDAL_METADATA)return null;let r=td(this.fileDirectory.GDAL_METADATA,"Item");r=null===t?r.filter(t=>void 0===tg(t,"sample")):r.filter(e=>Number(tg(e,"sample"))===t);for(let t=0;t<r.length;++t){let i=r[t];e[tg(i,"name")]=i.inner}return e}getGDALNoData(){if(!this.fileDirectory.GDAL_NODATA)return null;let t=this.fileDirectory.GDAL_NODATA;return Number(t.substring(0,t.length-1))}getOrigin(){let t=this.fileDirectory.ModelTiepoint,e=this.fileDirectory.ModelTransformation;if(t&&6===t.length)return[t[3],t[4],t[5]];if(e)return[e[3],e[7],e[11]];throw Error("The image does not have an affine transformation.")}getResolution(t=null){let e=this.fileDirectory.ModelPixelScale,r=this.fileDirectory.ModelTransformation;if(e)return[e[0],-e[1],e[2]];if(r)return 0===r[1]&&0===r[4]?[r[0],-r[5],r[10]]:[Math.sqrt(r[0]*r[0]+r[4]*r[4]),-Math.sqrt(r[1]*r[1]+r[5]*r[5]),r[10]];if(t){let[e,r,i]=t.getResolution();return[e*t.getWidth()/this.getWidth(),r*t.getHeight()/this.getHeight(),i*t.getWidth()/this.getWidth()]}throw Error("The image does not have an affine transformation.")}pixelIsArea(){return 1===this.geoKeys.GTRasterTypeGeoKey}getBoundingBox(t=!1){let e=this.getHeight(),r=this.getWidth();if(this.fileDirectory.ModelTransformation&&!t){let[t,i,n,o,s,a,l,h]=this.fileDirectory.ModelTransformation,f=[[0,0],[0,e],[r,0],[r,e]].map(([e,r])=>[o+t*e+i*r,h+s*e+a*r]),u=f.map(t=>t[0]),c=f.map(t=>t[1]);return[Math.min(...u),Math.min(...c),Math.max(...u),Math.max(...c)]}{let t=this.getOrigin(),i=this.getResolution(),n=t[0],o=t[1],s=n+i[0]*r,a=o+i[1]*e;return[Math.min(n,s),Math.min(o,a),Math.max(n,s),Math.max(o,a)]}}}class tS{constructor(t){this._dataView=new DataView(t)}get buffer(){return this._dataView.buffer}getUint64(t,e){let r;let i=this.getUint32(t,e),n=this.getUint32(t+4,e);if(e){if(!Number.isSafeInteger(r=i+4294967296*n))throw Error(`${r} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return r}if(!Number.isSafeInteger(r=4294967296*i+n))throw Error(`${r} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return r}getInt64(t,e){let r=0,i=(128&this._dataView.getUint8(t+(e?7:0)))>0,n=!0;for(let o=0;o<8;o++){let s=this._dataView.getUint8(t+(e?o:7-o));i&&(n?0!==s&&(s=255&~(s-1),n=!1):s=255&~s),r+=s*256**o}return i&&(r=-r),r}getUint8(t,e){return this._dataView.getUint8(t,e)}getInt8(t,e){return this._dataView.getInt8(t,e)}getUint16(t,e){return this._dataView.getUint16(t,e)}getInt16(t,e){return this._dataView.getInt16(t,e)}getUint32(t,e){return this._dataView.getUint32(t,e)}getInt32(t,e){return this._dataView.getInt32(t,e)}getFloat16(t,e){return tp(this._dataView,t,e)}getFloat32(t,e){return this._dataView.getFloat32(t,e)}getFloat64(t,e){return this._dataView.getFloat64(t,e)}}class tT{constructor(t,e,r,i){this._dataView=new DataView(t),this._sliceOffset=e,this._littleEndian=r,this._bigTiff=i}get sliceOffset(){return this._sliceOffset}get sliceTop(){return this._sliceOffset+this.buffer.byteLength}get littleEndian(){return this._littleEndian}get bigTiff(){return this._bigTiff}get buffer(){return this._dataView.buffer}covers(t,e){return this.sliceOffset<=t&&this.sliceTop>=t+e}readUint8(t){return this._dataView.getUint8(t-this._sliceOffset,this._littleEndian)}readInt8(t){return this._dataView.getInt8(t-this._sliceOffset,this._littleEndian)}readUint16(t){return this._dataView.getUint16(t-this._sliceOffset,this._littleEndian)}readInt16(t){return this._dataView.getInt16(t-this._sliceOffset,this._littleEndian)}readUint32(t){return this._dataView.getUint32(t-this._sliceOffset,this._littleEndian)}readInt32(t){return this._dataView.getInt32(t-this._sliceOffset,this._littleEndian)}readFloat32(t){return this._dataView.getFloat32(t-this._sliceOffset,this._littleEndian)}readFloat64(t){return this._dataView.getFloat64(t-this._sliceOffset,this._littleEndian)}readUint64(t){let e;let r=this.readUint32(t),i=this.readUint32(t+4);if(this._littleEndian){if(!Number.isSafeInteger(e=r+4294967296*i))throw Error(`${e} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return e}if(!Number.isSafeInteger(e=4294967296*r+i))throw Error(`${e} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return e}readInt64(t){let e=0,r=(128&this._dataView.getUint8(t+(this._littleEndian?7:0)))>0,i=!0;for(let n=0;n<8;n++){let o=this._dataView.getUint8(t+(this._littleEndian?n:7-n));r&&(i?0!==o&&(o=255&~(o-1),i=!1):o=255&~o),e+=o*256**n}return r&&(e=-e),e}readOffset(t){return this._bigTiff?this.readUint64(t):this.readUint32(t)}}let tB="\r\n\r\n";function tU(t){if(void 0!==Object.fromEntries)return Object.fromEntries(t);let e={};for(let[r,i]of t)e[r.toLowerCase()]=i;return e}function tx(t){let e,r,i;return t&&([,e,r,i]=t.match(/bytes (\d+)-(\d+)\/(\d+)/),e=parseInt(e,10),r=parseInt(r,10),i=parseInt(i,10)),{start:e,end:r,total:i}}class tv{async fetch(t,e){return Promise.all(t.map(t=>this.fetchSlice(t,e)))}async fetchSlice(t){throw Error(`fetching of slice ${t} not possible, not implemented`)}get fileSize(){return null}async close(){}}class tR extends Map{constructor(t={}){if(super(),!(t.maxSize&&t.maxSize>0))throw TypeError("`maxSize` must be a number greater than 0");if("number"==typeof t.maxAge&&0===t.maxAge)throw TypeError("`maxAge` must be a number greater than 0");this.maxSize=t.maxSize,this.maxAge=t.maxAge||Number.POSITIVE_INFINITY,this.onEviction=t.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_emitEvictions(t){if("function"==typeof this.onEviction)for(let[e,r]of t)this.onEviction(e,r.value)}_deleteIfExpired(t,e){return!!("number"==typeof e.expiry&&e.expiry<=Date.now())&&("function"==typeof this.onEviction&&this.onEviction(t,e.value),this.delete(t))}_getOrDeleteIfExpired(t,e){if(!1===this._deleteIfExpired(t,e))return e.value}_getItemValue(t,e){return e.expiry?this._getOrDeleteIfExpired(t,e):e.value}_peek(t,e){let r=e.get(t);return this._getItemValue(t,r)}_set(t,e){this.cache.set(t,e),this._size++,this._size>=this.maxSize&&(this._size=0,this._emitEvictions(this.oldCache),this.oldCache=this.cache,this.cache=new Map)}_moveToRecent(t,e){this.oldCache.delete(t),this._set(t,e)}*_entriesAscending(){for(let t of this.oldCache){let[e,r]=t;this.cache.has(e)||!1!==this._deleteIfExpired(e,r)||(yield t)}for(let t of this.cache){let[e,r]=t;!1===this._deleteIfExpired(e,r)&&(yield t)}}get(t){if(this.cache.has(t)){let e=this.cache.get(t);return this._getItemValue(t,e)}if(this.oldCache.has(t)){let e=this.oldCache.get(t);if(!1===this._deleteIfExpired(t,e))return this._moveToRecent(t,e),e.value}}set(t,e,{maxAge:r=this.maxAge}={}){let i="number"==typeof r&&r!==Number.POSITIVE_INFINITY?Date.now()+r:void 0;return this.cache.has(t)?this.cache.set(t,{value:e,expiry:i}):this._set(t,{value:e,expiry:i}),this}has(t){return this.cache.has(t)?!this._deleteIfExpired(t,this.cache.get(t)):!!this.oldCache.has(t)&&!this._deleteIfExpired(t,this.oldCache.get(t))}peek(t){return this.cache.has(t)?this._peek(t,this.cache):this.oldCache.has(t)?this._peek(t,this.oldCache):void 0}delete(t){let e=this.cache.delete(t);return e&&this._size--,this.oldCache.delete(t)||e}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}resize(t){if(!(t&&t>0))throw TypeError("`maxSize` must be a number greater than 0");let e=[...this._entriesAscending()],r=e.length-t;r<0?(this.cache=new Map(e),this.oldCache=new Map,this._size=e.length):(r>0&&this._emitEvictions(e.slice(0,r)),this.oldCache=new Map(e.slice(r)),this.cache=new Map,this._size=0),this.maxSize=t}*keys(){for(let[t]of this)yield t}*values(){for(let[,t]of this)yield t}*[Symbol.iterator](){for(let t of this.cache){let[e,r]=t;!1===this._deleteIfExpired(e,r)&&(yield[e,r.value])}for(let t of this.oldCache){let[e,r]=t;this.cache.has(e)||!1!==this._deleteIfExpired(e,r)||(yield[e,r.value])}}*entriesDescending(){let t=[...this.cache];for(let e=t.length-1;e>=0;--e){let[r,i]=t[e];!1===this._deleteIfExpired(r,i)&&(yield[r,i.value])}t=[...this.oldCache];for(let e=t.length-1;e>=0;--e){let[r,i]=t[e];this.cache.has(r)||!1!==this._deleteIfExpired(r,i)||(yield[r,i.value])}}*entriesAscending(){for(let[t,e]of this._entriesAscending())yield[t,e.value]}get size(){if(!this._size)return this.oldCache.size;let t=0;for(let e of this.oldCache.keys())!this.cache.has(e)&&t++;return Math.min(this._size+t,this.maxSize)}entries(){return this.entriesAscending()}forEach(t,e=this){for(let[r,i]of this.entriesAscending())t.call(e,i,r,this)}get[Symbol.toStringTag](){return JSON.stringify([...this.entriesAscending()])}}async function tO(t){return new Promise(e=>setTimeout(e,t))}class tC extends Error{constructor(t){super(t),Error.captureStackTrace&&Error.captureStackTrace(this,tC),this.name="AbortError"}}class t_ extends Error{constructor(t,e){super(e),this.errors=t,this.message=e,this.name="AggregateError"}}class tD{constructor(t,e,r=null){this.offset=t,this.length=e,this.data=r}get top(){return this.offset+this.length}}class tM{constructor(t,e,r){this.offset=t,this.length=e,this.blockIds=r}}class tP extends tv{constructor(t,{blockSize:e=65536,cacheSize:r=100}={}){super(),this.source=t,this.blockSize=e,this.blockCache=new tR({maxSize:r,onEviction:(t,e)=>{this.evictedBlocks.set(t,e)}}),this.evictedBlocks=new Map,this.blockRequests=new Map,this.blockIdsToFetch=new Set,this.abortedBlockIds=new Set}get fileSize(){return this.source.fileSize}async fetch(t,e){let r=[],i=[],n=[];for(let{offset:e,length:o}of(this.evictedBlocks.clear(),t)){let t=e+o,{fileSize:s}=this;null!==s&&(t=Math.min(t,s));let a=Math.floor(e/this.blockSize)*this.blockSize;for(let e=a;e<t;e+=this.blockSize){let t=Math.floor(e/this.blockSize);this.blockCache.has(t)||this.blockRequests.has(t)||(this.blockIdsToFetch.add(t),i.push(t)),this.blockRequests.has(t)&&r.push(this.blockRequests.get(t)),n.push(t)}}await tO(),this.fetchBlocks(e);let o=[];for(let t of i)this.blockRequests.has(t)&&o.push(this.blockRequests.get(t));await Promise.allSettled(r),await Promise.allSettled(o);let s=[],a=n.filter(t=>this.abortedBlockIds.has(t)||!this.blockCache.has(t));if(a.forEach(t=>this.blockIdsToFetch.add(t)),a.length>0&&e&&!e.aborted){for(let t of(this.fetchBlocks(null),a)){let e=this.blockRequests.get(t);if(!e)throw Error(`Block ${t} is not in the block requests`);s.push(e)}await Promise.allSettled(s)}if(e&&e.aborted)throw new tC("Request was aborted");let l=n.map(t=>this.blockCache.get(t)||this.evictedBlocks.get(t)),h=l.filter(t=>!t);if(h.length)throw new t_(h,"Request failed");let f=new Map(function(t,e){let r=Array.isArray(t)?t:Array.from(t),i=Array.isArray(e)?e:Array.from(e);return r.map((t,e)=>[t,i[e]])}(n,l));return this.readSliceData(t,f)}fetchBlocks(t){if(this.blockIdsToFetch.size>0){let e=this.groupBlocks(this.blockIdsToFetch),r=this.source.fetch(e,t);for(let i=0;i<e.length;++i)for(let n of e[i].blockIds)this.blockRequests.set(n,(async()=>{try{let t=(await r)[i],e=n*this.blockSize,o=e-t.offset,s=Math.min(o+this.blockSize,t.data.byteLength),a=t.data.slice(o,s),l=new tD(e,a.byteLength,a,n);this.blockCache.set(n,l),this.abortedBlockIds.delete(n)}catch(e){if("AbortError"===e.name)e.signal=t,this.blockCache.delete(n),this.abortedBlockIds.add(n);else throw e}finally{this.blockRequests.delete(n)}})());this.blockIdsToFetch.clear()}}groupBlocks(t){let e=Array.from(t).sort((t,e)=>t-e);if(0===e.length)return[];let r=[],i=null,n=[];for(let t of e)null===i||i+1===t?r.push(t):(n.push(new tM(r[0]*this.blockSize,r.length*this.blockSize,r)),r=[t]),i=t;return n.push(new tM(r[0]*this.blockSize,r.length*this.blockSize,r)),n}readSliceData(t,e){return t.map(t=>{let r=t.offset+t.length;null!==this.fileSize&&(r=Math.min(this.fileSize,r));let i=Math.floor(t.offset/this.blockSize),n=Math.floor(r/this.blockSize),o=new ArrayBuffer(t.length),s=new Uint8Array(o);for(let o=i;o<=n;++o){let i;let n=e.get(o),a=n.offset-t.offset,l=n.top-r,h=0,f=0;a<0?h=-a:a>0&&(f=a),i=l<0?n.length-h:r-n.offset-h;let u=new Uint8Array(n.data,h,i);s.set(u,f)}return o})}}class tL{get ok(){return this.status>=200&&this.status<=299}get status(){throw Error("not implemented")}getHeader(t){throw Error("not implemented")}async getData(){throw Error("not implemented")}}class tk{constructor(t){this.url=t}async request({headers:t,signal:e}={}){throw Error("request is not implemented")}}class tG extends tL{constructor(t){super(),this.response=t}get status(){return this.response.status}getHeader(t){return this.response.headers.get(t)}async getData(){return this.response.arrayBuffer?await this.response.arrayBuffer():(await this.response.buffer()).buffer}}class tF extends tk{constructor(t,e){super(t),this.credentials=e}async request({headers:t,signal:e}={}){return new tG(await fetch(this.url,{headers:t,credentials:this.credentials,signal:e}))}}class tN extends tL{constructor(t,e){super(),this.xhr=t,this.data=e}get status(){return this.xhr.status}getHeader(t){return this.xhr.getResponseHeader(t)}async getData(){return this.data}}class tz extends tk{constructRequest(t,e){return new Promise((r,i)=>{let n=new XMLHttpRequest;for(let[e,r]of(n.open("GET",this.url),n.responseType="arraybuffer",Object.entries(t)))n.setRequestHeader(e,r);n.onload=()=>{let t=n.response;r(new tN(n,t))},n.onerror=i,n.onabort=()=>i(new tC("Request aborted")),n.send(),e&&(e.aborted&&n.abort(),e.addEventListener("abort",()=>n.abort()))})}async request({headers:t,signal:e}={}){return await this.constructRequest(t,e)}}var tj=r(73752),tV=r(13640),tK=r(93813),t$=r(10536).lW;class tq extends tL{constructor(t,e){super(),this.response=t,this.dataPromise=e}get status(){return this.response.statusCode}getHeader(t){return this.response.headers[t]}async getData(){return await this.dataPromise}}class tH extends tk{constructor(t){super(t),this.parsedUrl=tK.parse(this.url),this.httpApi="http:"===this.parsedUrl.protocol?tj:tV}constructRequest(t,e){return new Promise((r,i)=>{let n=this.httpApi.get({...this.parsedUrl,headers:t},t=>{let e=new Promise(e=>{let r=[];t.on("data",t=>{r.push(t)}),t.on("end",()=>{e(t$.concat(r).buffer)}),t.on("error",i)});r(new tq(t,e))});n.on("error",i),e&&(e.aborted&&n.destroy(new tC("Request aborted")),e.addEventListener("abort",()=>n.destroy(new tC("Request aborted"))))})}async request({headers:t,signal:e}={}){return await this.constructRequest(t,e)}}class tW extends tv{constructor(t,e,r,i){super(),this.client=t,this.headers=e,this.maxRanges=r,this.allowFullFile=i,this._fileSize=null}async fetch(t,e){return this.maxRanges>=t.length?this.fetchSlices(t,e):(this.maxRanges>0&&t.length,Promise.all(t.map(t=>this.fetchSlice(t,e))))}async fetchSlices(t,e){let r=await this.client.request({headers:{...this.headers,Range:`bytes=${t.map(({offset:t,length:e})=>`${t}-${t+e}`).join(",")}`},signal:e});if(r.ok){if(206===r.status){let{type:i,params:n}=function(t){let[e,...r]=t.split(";").map(t=>t.trim());return{type:e,params:tU(r.map(t=>t.split("=")))}}(r.getHeader("content-type"));if("multipart/byteranges"===i){let t=function(t,e){let r=null,i=new TextDecoder("ascii"),n=[],o=`--${e}`,s=`${o}--`;for(let e=0;e<10;++e)i.decode(new Uint8Array(t,e,o.length))===o&&(r=e);if(null===r)throw Error("Could not find initial boundary");for(;r<t.byteLength;){let e=i.decode(new Uint8Array(t,r,Math.min(o.length+1024,t.byteLength-r)));if(0===e.length||e.startsWith(s))break;if(!e.startsWith(o))throw Error("Part does not start with boundary");let a=e.substr(o.length+2);if(0===a.length)break;let l=a.indexOf(tB),h=tU(a.substr(0,l).split("\r\n").map(t=>{let e=t.split(":").map(t=>t.trim());return e[0]=e[0].toLowerCase(),e})),{start:f,end:u,total:c}=tx(h["content-range"]),p=r+o.length+l+tB.length,g=parseInt(u,10)+1-parseInt(f,10);n.push({headers:h,data:t.slice(p,p+g),offset:f,length:g,fileSize:c}),r=p+g+4}return n}(await r.getData(),n.boundary);return this._fileSize=t[0].fileSize||null,t}let o=await r.getData(),{start:s,end:a,total:l}=tx(r.getHeader("content-range"));this._fileSize=l||null;let h=[{data:o,offset:s,length:a-s}];if(t.length>1){let r=await Promise.all(t.slice(1).map(t=>this.fetchSlice(t,e)));return h.concat(r)}return h}{if(!this.allowFullFile)throw Error("Server responded with full file");let t=await r.getData();return this._fileSize=t.byteLength,[{data:t,offset:0,length:t.byteLength}]}}throw Error("Error fetching data.")}async fetchSlice(t,e){let{offset:r,length:i}=t,n=await this.client.request({headers:{...this.headers,Range:`bytes=${r}-${r+i}`},signal:e});if(n.ok){if(206===n.status){let t=await n.getData(),{total:e}=tx(n.getHeader("content-range"));return this._fileSize=e||null,{data:t,offset:r,length:i}}{if(!this.allowFullFile)throw Error("Server responded with full file");let t=await n.getData();return this._fileSize=t.byteLength,{data:t,offset:0,length:t.byteLength}}}throw Error("Error fetching data.")}get fileSize(){return this._fileSize}}function tY(t,{blockSize:e,cacheSize:r}){return null===e?t:new tP(t,{blockSize:e,cacheSize:r})}function tX(t){switch(t){case ty.sf.BYTE:case ty.sf.ASCII:case ty.sf.SBYTE:case ty.sf.UNDEFINED:return 1;case ty.sf.SHORT:case ty.sf.SSHORT:return 2;case ty.sf.LONG:case ty.sf.SLONG:case ty.sf.FLOAT:case ty.sf.IFD:return 4;case ty.sf.RATIONAL:case ty.sf.SRATIONAL:case ty.sf.DOUBLE:case ty.sf.LONG8:case ty.sf.SLONG8:case ty.sf.IFD8:return 8;default:throw RangeError(`Invalid field type: ${t}`)}}function tZ(t,e,r,i){let n=null,o=null,s=tX(e);switch(e){case ty.sf.BYTE:case ty.sf.ASCII:case ty.sf.UNDEFINED:n=new Uint8Array(r),o=t.readUint8;break;case ty.sf.SBYTE:n=new Int8Array(r),o=t.readInt8;break;case ty.sf.SHORT:n=new Uint16Array(r),o=t.readUint16;break;case ty.sf.SSHORT:n=new Int16Array(r),o=t.readInt16;break;case ty.sf.LONG:case ty.sf.IFD:n=new Uint32Array(r),o=t.readUint32;break;case ty.sf.SLONG:n=new Int32Array(r),o=t.readInt32;break;case ty.sf.LONG8:case ty.sf.IFD8:n=Array(r),o=t.readUint64;break;case ty.sf.SLONG8:n=Array(r),o=t.readInt64;break;case ty.sf.RATIONAL:n=new Uint32Array(2*r),o=t.readUint32;break;case ty.sf.SRATIONAL:n=new Int32Array(2*r),o=t.readInt32;break;case ty.sf.FLOAT:n=new Float32Array(r),o=t.readFloat32;break;case ty.sf.DOUBLE:n=new Float64Array(r),o=t.readFloat64;break;default:throw RangeError(`Invalid field type: ${e}`)}if(e===ty.sf.RATIONAL||e===ty.sf.SRATIONAL)for(let e=0;e<r;e+=2)n[e]=o.call(t,i+e*s),n[e+1]=o.call(t,i+(e*s+4));else for(let e=0;e<r;++e)n[e]=o.call(t,i+e*s);return e===ty.sf.ASCII?new TextDecoder("utf-8").decode(n):n}class tJ{constructor(t,e,r){this.fileDirectory=t,this.geoKeyDirectory=e,this.nextIFDByteOffset=r}}class tQ extends Error{constructor(t){super(`No image at index ${t}`),this.index=t}}class t0{async readRasters(t={}){let{window:e,width:r,height:i}=t,{resX:n,resY:o,bbox:s}=t,a=await this.getImage(),l=a,h=await this.getImageCount(),f=a.getBoundingBox();if(e&&s)throw Error('Both "bbox" and "window" passed.');if(r||i){if(e){let[t,r]=a.getOrigin(),[i,n]=a.getResolution();s=[t+e[0]*i,r+e[1]*n,t+e[2]*i,r+e[3]*n]}let t=s||f;if(r){if(n)throw Error("Both width and resX passed");n=(t[2]-t[0])/r}if(i){if(o)throw Error("Both width and resY passed");o=(t[3]-t[1])/i}}if(n||o){let t=[];for(let e=0;e<h;++e){let r=await this.getImage(e),{SubfileType:i,NewSubfileType:n}=r.fileDirectory;(0===e||2===i||1&n)&&t.push(r)}t.sort((t,e)=>t.getWidth()-e.getWidth());for(let e=0;e<t.length;++e){let r=t[e],i=(f[2]-f[0])/r.getWidth(),s=(f[3]-f[1])/r.getHeight();if(l=r,n&&n>i||o&&o>s)break}}let u=e;if(s){let[t,e]=a.getOrigin(),[r,i]=l.getResolution(a);u=[Math.min((u=[Math.round((s[0]-t)/r),Math.round((s[1]-e)/i),Math.round((s[2]-t)/r),Math.round((s[3]-e)/i)])[0],u[2]),Math.min(u[1],u[3]),Math.max(u[0],u[2]),Math.max(u[1],u[3])]}return l.readRasters({...t,window:u})}}class t1 extends t0{constructor(t,e,r,i,n={}){super(),this.source=t,this.littleEndian=e,this.bigTiff=r,this.firstIFDOffset=i,this.cache=n.cache||!1,this.ifdRequests=[],this.ghostValues=null}async getSlice(t,e){let r=this.bigTiff?4048:1024;return new tT((await this.source.fetch([{offset:t,length:void 0!==e?e:r}]))[0],t,this.littleEndian,this.bigTiff)}async parseFileDirectoryAt(t){let e=this.bigTiff?20:12,r=this.bigTiff?8:2,i=await this.getSlice(t),n=this.bigTiff?i.readUint64(t):i.readUint16(t),o=n*e+(this.bigTiff?16:6);i.covers(t,o)||(i=await this.getSlice(t,o));let s={},a=t+(this.bigTiff?8:2);for(let t=0;t<n;a+=e,++t){let t,e;let r=i.readUint16(a),n=i.readUint16(a+2),o=this.bigTiff?i.readUint64(a+4):i.readUint32(a+4),l=tX(n),h=a+(this.bigTiff?12:8);if(l*o<=(this.bigTiff?8:4))t=tZ(i,n,o,h);else{let e=i.readOffset(h),r=tX(n)*o;t=i.covers(e,r)?tZ(i,n,o,e):tZ(await this.getSlice(e,r),n,o,e)}e=1!==o||-1!==ty.It.indexOf(r)||n===ty.sf.RATIONAL||n===ty.sf.SRATIONAL?t:t[0],s[ty.L[r]]=e}let l=function(t){let e=t.GeoKeyDirectory;if(!e)return null;let r={};for(let i=4;i<=4*e[3];i+=4){let n=ty.P1[e[i]],o=e[i+1]?ty.L[e[i+1]]:null,s=e[i+2],a=e[i+3],l=null;if(o){if(null==(l=t[o]))throw Error(`Could not get value of geoKey '${n}'.`);"string"==typeof l?l=l.substring(a,a+s-1):l.subarray&&(l=l.subarray(a,a+s),1===s&&(l=l[0]))}else l=a;r[n]=l}return r}(s);return new tJ(s,l,i.readOffset(t+r+e*n))}async requestIFD(t){if(this.ifdRequests[t])return this.ifdRequests[t];if(0===t)return this.ifdRequests[t]=this.parseFileDirectoryAt(this.firstIFDOffset),this.ifdRequests[t];if(!this.ifdRequests[t-1])try{this.ifdRequests[t-1]=this.requestIFD(t-1)}catch(e){if(e instanceof tQ)throw new tQ(t);throw e}return this.ifdRequests[t]=(async()=>{let e=await this.ifdRequests[t-1];if(0===e.nextIFDByteOffset)throw new tQ(t);return this.parseFileDirectoryAt(e.nextIFDByteOffset)})(),this.ifdRequests[t]}async getImage(t=0){let e=await this.requestIFD(t);return new tA(e.fileDirectory,e.geoKeyDirectory,this.dataView,this.littleEndian,this.cache,this.source)}async getImageCount(){let t=0,e=!0;for(;e;)try{await this.requestIFD(t),++t}catch(t){if(t instanceof tQ)e=!1;else throw t}return t}async getGhostValues(){let t=this.bigTiff?16:8;if(this.ghostValues)return this.ghostValues;let e="GDAL_STRUCTURAL_METADATA_SIZE=",r=e.length+100,i=await this.getSlice(t,r);if(e===tZ(i,ty.sf.ASCII,e.length,t)){let e=tZ(i,ty.sf.ASCII,r,t).split("\n")[0],n=Number(e.split("=")[1].split(" ")[0])+e.length;n>r&&(i=await this.getSlice(t,n));let o=tZ(i,ty.sf.ASCII,n,t);this.ghostValues={},o.split("\n").filter(t=>t.length>0).map(t=>t.split("=")).forEach(([t,e])=>{this.ghostValues[t]=e})}return this.ghostValues}static async fromSource(t,e,r){let i,n;let o=new tS((await t.fetch([{offset:0,length:1024}],r))[0]),s=o.getUint16(0,0);if(18761===s)i=!0;else if(19789===s)i=!1;else throw TypeError("Invalid byte order value.");let a=o.getUint16(2,i);if(42===a)n=!1;else if(43===a){if(n=!0,8!==o.getUint16(4,i))throw Error("Unsupported offset byte-size.")}else throw TypeError("Invalid magic number.");let l=n?o.getUint64(8,i):o.getUint32(4,i);return new t1(t,i,n,l,e)}close(){return"function"==typeof this.source.close&&this.source.close()}}async function t2(t,e={},r){return t1.fromSource(function(t,{forceXHR:e=!1,...r}={}){return"function"!=typeof fetch||e?"undefined"!=typeof XMLHttpRequest?function(t,{headers:e={},maxRanges:r=0,allowFullFile:i=!1,...n}={}){return tY(new tW(new tz(t),e,r,i),n)}(t,r):function(t,{headers:e={},maxRanges:r=0,allowFullFile:i=!1,...n}={}){return tY(new tW(new tH(t),e,r,i),n)}(t,r):function(t,{headers:e={},credentials:r,maxRanges:i=0,allowFullFile:n=!1,...o}={}){return tY(new tW(new tF(t,r),e,i,n),o)}(t,r)}(t,e),r)}},72093:function(t,e,r){"use strict";r.d(e,{Ie:function(){return l},It:function(){return o},L:function(){return i},L5:function(){return f},P1:function(){return c},Qb:function(){return u},pd:function(){return h},sf:function(){return a}});let i={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams",50674:"LercParameters"},n={};for(let t in i)i.hasOwnProperty(t)&&(n[i[t]]=parseInt(t,10));let o=[n.BitsPerSample,n.ExtraSamples,n.SampleFormat,n.StripByteCounts,n.StripOffsets,n.StripRowCounts,n.TileByteCounts,n.TileOffsets,n.SubIFDs],s={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",13:"IFD",16:"LONG8",17:"SLONG8",18:"IFD8"},a={};for(let t in s)s.hasOwnProperty(t)&&(a[s[t]]=parseInt(t,10));let l={WhiteIsZero:0,BlackIsZero:1,RGB:2,Palette:3,TransparencyMask:4,CMYK:5,YCbCr:6,CIELab:8,ICCLab:9},h={Unspecified:0,Assocalpha:1,Unassalpha:2},f={Version:0,AddCompression:1},u={None:0,Deflate:1,Zstandard:2},c={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"},p={};for(let t in c)c.hasOwnProperty(t)&&(p[c[t]]=parseInt(t,10))}}]);