"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2994],{72994:function(e,t,r){r.r(t),r.d(t,{_TGATextureLoader:function(){return i}});var a=r(79393);class i{constructor(){this.supportCascades=!1}loadCubeData(){throw".env not supported in Cube."}loadData(e,t,r){let i=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),n=(0,a.A6)(i);r(n.width,n.height,t.generateMipMaps,!1,()=>{(0,a.Ab)(t,i)})}}},79393:function(e,t,r){r.d(t,{A6:function(){return i},Ab:function(){return n}});var a=r(70626);function i(e){let t=0;return{id_length:e[t++],colormap_type:e[t++],image_type:e[t++],colormap_index:e[t++]|e[t++]<<8,colormap_length:e[t++]|e[t++]<<8,colormap_size:e[t++],origin:[e[t++]|e[t++]<<8,e[t++]|e[t++]<<8],width:e[t++]|e[t++]<<8,height:e[t++]|e[t++]<<8,pixel_size:e[t++],flags:e[t++]}}function n(e,t){let r,n,h,l,g,s,f,u;if(t.length<19){a.Y.Error("Unable to load TGA file - Not enough data to contain header");return}let c=18,d=i(t);if(d.id_length+c>t.length){a.Y.Error("Unable to load TGA file - Not enough data");return}c+=d.id_length;let w=!1,_=!1,b=!1;switch(d.image_type){case 9:w=!0;case 1:_=!0;break;case 10:w=!0;case 2:break;case 11:w=!0;case 3:b=!0}let p=d.pixel_size>>3,y=d.width*d.height*p;if(_&&(n=t.subarray(c,c+=d.colormap_length*(d.colormap_size>>3))),w){let e,a,i;r=new Uint8Array(y);let n=0,o=new Uint8Array(p);for(;c<y&&n<y;)if(a=(127&(e=t[c++]))+1,128&e){for(i=0;i<p;++i)o[i]=t[c++];for(i=0;i<a;++i)r.set(o,n+i*p);n+=p*a}else{for(a*=p,i=0;i<a;++i)r[n+i]=t[c++];n+=a}}else r=t.subarray(c,c+=_?d.width*d.height:y);switch((48&d.flags)>>4){default:case 2:h=0,g=1,u=d.width,l=0,s=1,f=d.height;break;case 0:h=0,g=1,u=d.width,l=d.height-1,s=-1,f=-1;break;case 3:h=d.width-1,g=-1,u=-1,l=0,s=1,f=d.height;break;case 1:h=d.width-1,g=-1,u=-1,l=d.height-1,s=-1,f=-1}let A=o["_getImageData"+(b?"Grey":"")+d.pixel_size+"bits"](d,n,r,l,s,f,h,g,u);e.getEngine()._uploadDataToTextureDirectly(e,A)}let o={GetTGAHeader:i,UploadContent:n,_getImageData8bits:function(e,t,r,a,i,n,o,h,l){let g=e.width,s=e.height,f,u=0,c,d,w=new Uint8Array(g*s*4);for(d=a;d!==n;d+=i)for(c=o;c!==l;c+=h,u++)f=r[u],w[(c+g*d)*4+3]=255,w[(c+g*d)*4+2]=t[3*f+0],w[(c+g*d)*4+1]=t[3*f+1],w[(c+g*d)*4+0]=t[3*f+2];return w},_getImageData16bits:function(e,t,r,a,i,n,o,h,l){let g=e.width,s=e.height,f,u=0,c,d,w=new Uint8Array(g*s*4);for(d=a;d!==n;d+=i)for(c=o;c!==l;c+=h,u+=2){let e=((31744&(f=r[u+0]+(r[u+1]<<8)))>>10)*255/31|0,t=((992&f)>>5)*255/31|0,a=(31&f)*255/31|0;w[(c+g*d)*4+0]=e,w[(c+g*d)*4+1]=t,w[(c+g*d)*4+2]=a,w[(c+g*d)*4+3]=32768&f?0:255}return w},_getImageData24bits:function(e,t,r,a,i,n,o,h,l){let g=e.width,s=e.height,f=0,u,c,d=new Uint8Array(g*s*4);for(c=a;c!==n;c+=i)for(u=o;u!==l;u+=h,f+=3)d[(u+g*c)*4+3]=255,d[(u+g*c)*4+2]=r[f+0],d[(u+g*c)*4+1]=r[f+1],d[(u+g*c)*4+0]=r[f+2];return d},_getImageData32bits:function(e,t,r,a,i,n,o,h,l){let g=e.width,s=e.height,f=0,u,c,d=new Uint8Array(g*s*4);for(c=a;c!==n;c+=i)for(u=o;u!==l;u+=h,f+=4)d[(u+g*c)*4+2]=r[f+0],d[(u+g*c)*4+1]=r[f+1],d[(u+g*c)*4+0]=r[f+2],d[(u+g*c)*4+3]=r[f+3];return d},_getImageDataGrey8bits:function(e,t,r,a,i,n,o,h,l){let g=e.width,s=e.height,f,u=0,c,d,w=new Uint8Array(g*s*4);for(d=a;d!==n;d+=i)for(c=o;c!==l;c+=h,u++)f=r[u],w[(c+g*d)*4+0]=f,w[(c+g*d)*4+1]=f,w[(c+g*d)*4+2]=f,w[(c+g*d)*4+3]=255;return w},_getImageDataGrey16bits:function(e,t,r,a,i,n,o,h,l){let g=e.width,s=e.height,f=0,u,c,d=new Uint8Array(g*s*4);for(c=a;c!==n;c+=i)for(u=o;u!==l;u+=h,f+=2)d[(u+g*c)*4+0]=r[f+0],d[(u+g*c)*4+1]=r[f+0],d[(u+g*c)*4+2]=r[f+0],d[(u+g*c)*4+3]=r[f+1];return d}}}}]);